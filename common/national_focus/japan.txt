focus_tree = {
	id = japan_wtt_focus
	
	country = {
		factor = 0
		modifier = {
			add = 20
			tag = JAP
		}
	}
	

	default = no

	continuous_focus_position = { x = 20 y = 1200 }

	focus = {
		id = JAP_greater_east_asian_co_prosperity_sphere
		icon = GFX_goal_generic_alliance
		x = 0
		y = 0

		cost = 8

		ai_will_do = {
			factor = 2
		}

		available = {
			is_subject = no
			OR = {
				has_completed_focus = JAP_purge_the_kodoha_faction
				has_completed_focus = JAP_support_the_kodoha_faction
			}
			OR = {
				threat > 0.15
				num_of_factories > 200
			}
		}

		bypass = {

		}

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		completion_reward = {
			add_research_slot = 1
			set_rule = { can_create_factions = yes }
			create_faction = JAP_greater_east_asian_co_prosperity_sphere
			unlock_decision_tooltip = JAP_greater_east_asian_co_prosperity_sphere_philippines
			unlock_decision_tooltip = JAP_greater_east_asian_co_prosperity_sphere_malaya
			unlock_decision_tooltip = JAP_greater_east_asian_co_prosperity_sphere_indonesia
		}
	}
	### MANCHURIAN PROJECT ###
	focus = {
		id = JAP_the_manchurian_project
		icon = GFX_focus_jap_manchurian_project
		x = 3
		y = 1
		prerequisite = { focus = JAP_greater_east_asian_co_prosperity_sphere }
		relative_position_id = JAP_greater_east_asian_co_prosperity_sphere
		cost = 3

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				OR = {
					has_completed_focus = JAP_support_the_kodoha_faction
					has_completed_focus = JAP_purge_the_kodoha_faction
				}
			}
			modifier = {
				factor = 10
				has_completed_focus = JAP_german_technological_exchange
			}
		}

		available = {
			MAN = { is_subject_of = ROOT }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_political_power = 100
			MAN = {				
				add_stability = 0.1
				add_war_support = 0.1
				add_political_power = 150
			}
		}
	}

	focus = {
		id = JAP_expand_manchurian_railways
		icon = GFX_goal_railroads
		prerequisite = { focus = JAP_the_manchurian_project }
		x = -2
		y = 1
		relative_position_id = JAP_the_manchurian_project

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			MAN = { is_subject_of = ROOT }
			945 = { is_fully_controlled_by = MAN }
			610 = { is_fully_controlled_by = MAN }
			328 = { is_fully_controlled_by = MAN }
			946 = { is_fully_controlled_by = MAN }
			715 = { is_fully_controlled_by = MAN }
			716 = { is_fully_controlled_by = MAN }
			745 = { is_fully_controlled_by = JAP }
			OR = {
				609 = { is_fully_controlled_by = JAP }
				609 = { is_fully_controlled_by = RNC }
			}
			OR = {
				950 = { is_fully_controlled_by = JAP }
				950 = { is_fully_controlled_by = RNC }
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			609 = {
				if = {
					limit = {
						free_building_slots = {
							building = air_base
							size > 5
						}
						is_fully_controlled_by = JAP
					}
					add_building_construction = {
						type = air_base
						level = 6
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					945 = {
						is_fully_controlled_by = MAN
						free_building_slots = {
							building = infrastructure
							size > 0
							include_locked = yes
						}
					}
				}
				945 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					set_state_flag = JAP_expand_manchurian_railways_Inf1
				}
			}
			if = {
				limit = {
					610 = {
						is_fully_controlled_by = MAN
						free_building_slots = {
							building = infrastructure
							size > 0
							include_locked = yes
						}
					}
				}
				610 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					set_state_flag = JAP_expand_manchurian_railways_Inf1
				}
			}
			if = {
				limit = {
					NOT = { MAN = { has_completed_focus = MAN_south_manchurian_railway } }
					328 = {
						is_fully_controlled_by = MAN
						free_building_slots = {
							building = infrastructure
							size > 1
							include_locked = yes
						}
					}
				}
				328 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					set_state_flag = JAP_expand_manchurian_railways_Inf2
				}
			}
			if = {
				limit = {
					946 = {
						is_fully_controlled_by = MAN
						free_building_slots = {
							building = infrastructure
							size > 0
							include_locked = yes
						}
					}
				}
				946 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					set_state_flag = JAP_expand_manchurian_railways_Inf2
				}
			}
			if = {
				limit = {
					715 = {
						is_fully_controlled_by = MAN
						free_building_slots = {
							building = infrastructure
							size > 0
							include_locked = yes
						}
					}
				}
				715 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					set_state_flag = JAP_expand_manchurian_railways_Inf2
				}
			}
			if = {
				limit = {
					NOT = { MAN = { has_completed_focus = MAN_south_manchurian_railway } }
					716 = {
						is_fully_controlled_by = MAN
						free_building_slots = {
							building = infrastructure
							size > 1
							include_locked = yes
						}
					}
				}
				716 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					set_state_flag = JAP_expand_manchurian_railways_Inf3
				}
			}
			745 = {
				if = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
						is_fully_controlled_by = JAP
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
			}
			609 = {
				if = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
						is_fully_controlled_by = JAP
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			950 = {
				if = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
						is_fully_controlled_by = JAP
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					716 = {
						has_dynamic_modifier = { modifier = agrarian_state }
					}
				}
				716 = {
					remove_dynamic_modifier = { modifier = agrarian_state }
				}
			}
			if = {
				limit = {
					328 = {
						has_dynamic_modifier = { modifier = agrarian_state }
					}
				}
				328 = {
					remove_dynamic_modifier = { modifier = agrarian_state }
				}
			}
		}
	}

	focus = {
		id = JAP_light_industry_development
		icon = GFX_goal_medium_civilian_economy
		prerequisite = { focus = JAP_expand_manchurian_railways }
		x = -1
		y = 1
		relative_position_id = JAP_expand_manchurian_railways

		cost = 6

		ai_will_do = {
			factor = 2
		}

		available = {
			MAN = {
				is_subject_of = ROOT
				has_full_control_of_state = 946
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			946 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex
					level = 4
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = JAP_heavy_industry_development
		icon = GFX_goal_medium_military_economy
		prerequisite = { focus = JAP_expand_manchurian_railways }
		x = 3
		y = 1
		relative_position_id = JAP_expand_manchurian_railways

		cost = 6

		ai_will_do = {
			factor = 2
		}

		available = {
			MAN = {
				is_subject_of = ROOT
				has_full_control_of_state = 328
			}
			MAN = {
				is_subject_of = ROOT
				has_full_control_of_state = 946				
			}
			MAN = {
				is_subject_of = ROOT
				has_full_control_of_state = 715
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			328 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			946 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			715 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = JAP_japanese_settlement
		icon = GFX_focus_generic_industry_1
		prerequisite = { focus = JAP_expand_manchurian_railways }
		x = 1
		y = 1
		relative_position_id = JAP_expand_manchurian_railways

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
			MAN = {
				is_subject_of = ROOT
				has_full_control_of_state = 715
				has_full_control_of_state = 610
				has_full_control_of_state = 328
				has_full_control_of_state = 946
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			715 = { add_extra_state_shared_building_slots = 2 }
			610 = { add_extra_state_shared_building_slots = 2 }
			328 = { add_extra_state_shared_building_slots = 2 }
			946 = { add_extra_state_shared_building_slots = 2 }
		}
	}

	focus = {
		id = JAP_fortify_the_border
		icon = GFX_goal_generic_construct_military
		prerequisite = { focus = JAP_the_manchurian_project }
		x = 0
		y = 1
		relative_position_id = JAP_the_manchurian_project 

		cost = 6

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				has_completed_focus = JAP_german_technological_exchange
			}
		}

		available = {
			MAN = { is_subject_of = ROOT }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			717 = {
				if = {
					limit = {
						free_building_slots = {
							building = air_base
							size > 3
						}
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
					}
				}
			}
			761 = {
				if = {
					limit = {
						free_building_slots = {
							building = air_base
							size > 3
						}
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
					}
				}
			}
			MAN = {
				every_owned_state = {
					limit = {
						is_fully_controlled_by = PREV
						any_neighbor_state = {
							is_controlled_by = SOV
						}
					}
					set_building_level = {
						type = bunker
						level = 2
						province = {
							all_provinces = yes
							limit_to_border = yes
							level < 2
						}
					}
				}				
			}
		}
	}

	focus = {
		id = JAP_expand_the_showa_steel_works
		icon = GFX_focus_generic_steel
		prerequisite = { focus = JAP_the_manchurian_project }
		x = 2
		y = 1
		relative_position_id = JAP_the_manchurian_project

		cost = 6

		ai_will_do = {
			factor = 2
		}

		available = {
			716 = { is_fully_controlled_by = MAN }
			MAN = { is_subject_of = ROOT }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			716 = {
				add_resource = {
					type = iron
					amount = 6
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = steel_refinery
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = JAP_develop_aluminum_sources
		icon = GFX_focus_generic_aluminum
		prerequisite = { focus = JAP_expand_the_showa_steel_works }
		x = 1
		y = 1
		relative_position_id = JAP_expand_the_showa_steel_works

		cost = 6

		ai_will_do = {
			factor = 2
		}

		available = {
			328 = { is_fully_controlled_by = MAN }
			MAN = { is_subject_of = ROOT }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			328 = {
				add_resource = {
					type = bauxite
					amount = 12
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = aluminium_refinery	
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
### KOREAN PROJECT ###
	focus = {
		id = JAP_the_korean_project
		icon = GFX_goal_korea_project
		x = -3
		y = 1
		relative_position_id = JAP_greater_east_asian_co_prosperity_sphere 
		prerequisite = { focus = JAP_greater_east_asian_co_prosperity_sphere }
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				OR = {
					has_completed_focus = JAP_support_the_kodoha_faction
					has_completed_focus = JAP_purge_the_kodoha_faction
				}
			}
			modifier = {
				factor = 10
				has_completed_focus = JAP_german_technological_exchange
			}
		}

		available = {
			controls_state = 527
			controls_state = 525
			controls_state = 847
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_political_power = 100
			527 = {
				add_building_construction = {
					type = infrastructure
					level = 3
					instant_build = yes
				}
			}
			525 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			847 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			if = {
				limit = {
					527 = {
						has_dynamic_modifier = { modifier = agrarian_state }
					}
				}
				527 = {
					remove_dynamic_modifier = { modifier = agrarian_state }
				}
			}
			if = {
				limit = {
					525 = {
						has_dynamic_modifier = { modifier = agrarian_state }
					}
				}
				525 = {
					remove_dynamic_modifier = { modifier = agrarian_state }
				}
			}
			if = {
				limit = {
					847	 = {
						has_dynamic_modifier = { modifier = agrarian_state }
					}
				}
				847 = {
					remove_dynamic_modifier = { modifier = agrarian_state }
				}
			}
		}
	}

	focus = {
		id = JAP_industrialize_the_north
		icon = GFX_goal_small_military_economy
		prerequisite = { focus = JAP_the_korean_project }
		x = -2
		y = 1
		relative_position_id = JAP_the_korean_project

		cost = 4

		available = {
			is_subject = no
			controls_state = 527
			controls_state = 845
			controls_state = 846
		}

		bypass = {
		}

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				date < 1937.1.1
			}
		}

		completion_reward = {
			527 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			845 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			846 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = JAP_fully_integrate_korea
		icon = GFX_focus_generic_self_management
		prerequisite = { focus = JAP_the_korean_project }
		x = 0	
		y = 1
		relative_position_id = JAP_the_korean_project

		cost = 10

		available = { 
			core_compliance = {
			    occupied_country_tag = KOR
			    value > 90
			}
			controls_state = 846
			controls_state = 845
			controls_state = 527
			controls_state = 525
			controls_state = 848
			controls_state = 847
		}

		bypass = {
		}

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}

		completion_reward = {
			846 = { add_core_of = JAP }
			845 = { add_core_of = JAP }
			527 = { add_core_of = JAP }
			525 = { add_core_of = JAP }
			848 = { add_core_of = JAP }
			847 = { add_core_of = JAP }
		}
	}

	focus = {
		id = JAP_industrialize_the_south
		icon = GFX_goal_small_civilian_economy
		prerequisite = { focus = JAP_the_korean_project }
		x = 2
		y = 1
		relative_position_id = JAP_the_korean_project

		cost = 4

		available = {
			is_subject = no
			controls_state = 525
			controls_state = 847
			controls_state = 848
		}

		bypass = {
		}

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				date < 1937.1.1
			}
		}

		completion_reward = {
			525 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			847 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			848 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
### Mengjian Project ###
focus = {
		id = JAP_the_mengjiang_project
		icon = GFX_goal_mengjiang_project
		x = 6
		y = 1
		relative_position_id = JAP_the_manchurian_project
		prerequisite = { focus = JAP_the_manchurian_project }

		cost = 3

		ai_will_do = {
			factor = 5
		}

		available = {
			OR = { 
				is_in_faction_with = MEN
				MEN = { is_puppet_of = JAP }
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_political_power = 100
			MEN = {				
				add_stability = 0.1
				add_war_support = 0.1
				add_political_power = 150
			}
		}
	}

	focus = {
		id = JAP_build_up_menjiang
		icon = GFX_goal_small_military_economy
		prerequisite = { focus = JAP_the_mengjiang_project }
		x = -1
		y = 1
		relative_position_id = JAP_the_mengjiang_project

		cost = 4

		available = { 
			OR = { 
				is_in_faction_with = MEN
				MEN = { is_puppet_of = JAP }
			}
			612 = {
				CONTROLLER = {
					is_subject_of = JAP
				}
			}
			611 = {
				CONTROLLER = {
					is_subject_of = JAP
				}
			}
		}

		bypass = {
		}

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}

		completion_reward = {
			611 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			612 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = JAP_chahar_railways
		icon = GFX_goal_railroads
		prerequisite = { focus = JAP_the_mengjiang_project }
		x = 1
		y = 1
		relative_position_id = JAP_the_mengjiang_project

		cost = 2

		ai_will_do = {
			factor = 4
		}

		available = {
			OR = { 
				is_in_faction_with = MEN
				MEN = { is_puppet_of = JAP }
			}
			612 = {
				CONTROLLER = {
					is_subject_of = JAP
				}
			}
			611 = {
				CONTROLLER = {
					is_subject_of = JAP
				}
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			612 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			611 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = JAP_modernize_the_mongolian_army
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = JAP_build_up_menjiang }
		prerequisite = { focus = JAP_chahar_railways }
		x = -1
		y = 1
		relative_position_id = JAP_chahar_railways

		cost = 6

		available = {
			OR = { 
				is_in_faction_with = MEN
				MEN = { is_puppet_of = JAP }
			}
		}

		bypass = {
		}

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}

		completion_reward = {
			custom_effect_tooltip = JAP_modernize_the_mongolian_army_tt
			hidden_effect = {
				MEN = {
					division_template = {
						name = "Mongol Infantry Division"
						division_names_group = MEN_INF_01
						regiments = {
							heavy_infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
			
			        		infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
						}
					}
			
					random_owned_controlled_state = {
						prioritize = { 612 }
						create_unit = {
							division = "division_template = \"Mongol Infantry Division\" start_experience_factor = 0.3 start_equipment_factor = 1.0" 
							owner = MEN
							count = 10
						}
					}
					add_tech_bonus = {
						name = JAP_modernize_the_mongolian_army
						bonus = 0.5
						uses = 1
						category = infantry_weapons	
					}
					add_tech_bonus = {
						name = JAP_modernize_the_mongolian_army
						bonus = 0.5
						uses = 1
						category = heavy_infantry_weapons
					}
				}
			}
		}
	}

	focus = {
		id = JAP_mongol_military_investments
		icon = GFX_focus_research
		prerequisite = { focus = JAP_modernize_the_mongolian_army }
		x = 0
		y = 1
		relative_position_id = JAP_modernize_the_mongolian_army

		cost = 6

		available = {
			OR = { 
				is_in_faction_with = MEN
				MEN = { is_puppet_of = JAP }
			}
		}

		bypass = {
		}

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				date < 1937.1.1
			}
		}

		completion_reward = {
			MEN = { 
				add_research_slot = 1
				add_tech_bonus = {
					name = JAP_modernize_the_mongolian_army
					bonus = 0.5
					uses = 3
					category = industry	
				}
			}
		}
	}
