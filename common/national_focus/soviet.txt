focus_tree = {
	id = soviet_focus
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = SOV
		}
	}
	default = no
	continuous_focus_position = {
		x = 55
		y = 1900
	}

	############################################
	############ INDUSTRY BRANCH ###############
	############################################

	focus = {
		id = SOV_start_the_second_five_year_plan
		icon = GFX_goal_SOV_start_the_second_five_year_plan
		x = 0
		y = 0
		cost = 4
		available = {
			NOT = {
				any_enemy_country = {
					is_major = yes
				}
			}
		}
		available_if_capitulated = no
		ai_will_do = {
			factor = 5
		}
		bypass = {
		}
		cancel = {
			has_war = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			custom_effect_tooltip = SOV_start_the_second_five_year_plan_tt
			hidden_effect = {
				add_to_variable = {
					var = SOV_fyp_political_power_cost
					value = 0.3
				}
				add_to_variable = {
					var = SOV_fyp_consumer_goods_factor
					value = -0.08
				}
				add_to_variable = {
					var = SOV_fyp_production_speed_industrial_complex_factor
					value = 0.3
				}
				add_to_variable = {
					var = SOV_fyp_production_speed_infrastructure_factor
					value = 0.3
				}
			}
		}
	}
	focus = {
		id = SOV_the_collectivization_process
		icon = GFX_focus_prc_agrarian_socialism
		prerequisite = { focus = SOV_start_the_second_five_year_plan }
		relative_position_id = SOV_start_the_second_five_year_plan
		x = 1
		y = 1
		cost = 4
		available = {

		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			add_to_variable = {
				SOV_the_politburo_good_consumer_goods_factor = -0.02
			}
			add_to_variable = {
				SOV_the_politburo_global_building_slots_factor = 0.1
			}
			custom_effect_tooltip = SOV_the_collectivization_process_ns_tt
			add_stability = -0.05
			if = {
				#Target a rural state with no civs
				limit = {
					any_owned_state = {
						OR = {
							has_state_category = town							#Developed Rural Region
							has_state_category = rural							#Rural Region
						}
						is_fully_controlled_by = ROOT
						industrial_complex < 1
						arms_factory < 1
						dockyard < 1
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						OR = {
							has_state_category = town							#Developed Rural Region
							has_state_category = rural							#Rural Region
						}
						is_fully_controlled_by = ROOT
						industrial_complex < 1
						arms_factory < 1
						dockyard < 1
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			else_if = {
				#Failsafe 1: Target a random rural state
				limit = {
					any_owned_state = {
						OR = {
							has_state_category = town							#Developed Rural Region
							has_state_category = rural							#Rural Region
						}
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						OR = {
							has_state_category = town							#Developed Rural Region
							has_state_category = rural							#Rural Region
						}
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			else_if = {
				#Failsafe 2: Target a random state
				limit = {
					any_owned_state = {
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_gaz_automobile_plants
		icon = GFX_goal_generic_army_motorized
		prerequisite = { focus = SOV_start_the_second_five_year_plan }
		x = -1
		y = 1
		relative_position_id = SOV_start_the_second_five_year_plan
		cost = 3
		ai_will_do = {
			factor = 5
		}
		available = {
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			hidden_effect = {
				set_country_flag = SOV_gaz_automobile_plants_dd_flag
			}
			add_ideas = gaz_automobile_plants
			219 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = arms_factory
					level = 4
					instant_build = yes
				}
			}
			252 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = arms_factory
					level = 4
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SOV_the_ussr_academy_of_sciences
		icon = GFX_focus_research
		prerequisite = { focus = SOV_gaz_automobile_plants }
		relative_position_id = SOV_gaz_automobile_plants
		x = 2
		y = 1
		cost = 5

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1
			if = {
				limit = {
					any_country = {
						SOV_is_valid_academy_of_sciences_target = yes
					}
				}
				if = {
					#ALT IDEOLOGY
					limit = {
						NOT = {
							has_government = communism
						}
					}
					add_to_tech_sharing_group = SOV_imperial_academies_of_sciences_joint_program
					every_country = {
						limit = {
							SOV_is_valid_academy_of_sciences_target = yes
						}
						add_to_tech_sharing_group = SOV_imperial_academies_of_sciences_joint_program
					}
				}
				else = {
					#DEFAULT COMMUNISM
					add_to_tech_sharing_group = SOV_soviet_academies_of_sciences_joint_program
					every_country = {
						limit = {
							SOV_is_valid_academy_of_sciences_target = yes
						}
						add_to_tech_sharing_group = SOV_soviet_academies_of_sciences_joint_program
					}
				}
			}
			hidden_effect = {
				set_country_flag = SOV_the_ussr_academy_of_sciences_dd_flag
			}
		}
	}

	focus = {
		id = SOV_connection_of_the_interior
		icon = GFX_goal_generic_construction2
		prerequisite = { focus = SOV_gaz_automobile_plants
		}
		x = 0
		y = 1
		relative_position_id = SOV_gaz_automobile_plants
		cost = 4
		ai_will_do = {
			factor = 5
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		available = {
			has_country_flag = {
				flag = SOV_gaz_automobile_plants_dd_flag
				days > 180
			}
			custom_trigger_tooltip = {
				tooltip = SOV_gaz_automobile_plants_dd_tt
				has_country_flag = {
					flag = SOV_gaz_automobile_plants_dd_flag
					days > 180
				}
			}
		}
		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = infrastructure
						size < 5
					}
				}
			}
		}
		completion_reward = {
			economy_fatigue_level_down_2 = yes
			hidden_effect = {
				set_country_flag = SOV_connection_of_the_interior_dd_flag
			}
			custom_effect_tooltip = SOV_connection_of_the_interior_tt
			229 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			219 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			263 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			208 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			195 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			246 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			242 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			205 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			223 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			222 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			240 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			228 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			245 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			217 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			220 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			225 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			193 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			202 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			207 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			206 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			218 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			234 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			192 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			241 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			227 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			221 = {
				hidden_effect = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			# Moscow - Rostov on Don
			build_railway = {
				path = {
					9282
					9395
					6333
					9313
					6279
					6230
					6398
					6341
					413
					3527
					11475
					11412
					6591
					3540
					11476
					11459
					11450
					11434
					9417
				}
			}
			# Moscow - Leningrad
			build_railway = {
				path = {
					6380
					13228
					3259
					3358
					11250
					6245
					333
					3176
					3101
					187
					9111
					6086
					6035
					3072
					79
					13240
					3151
				}
			}
			# Moscow - Donets - Rostov
			build_railway = {
				path = {
					6380
					13236
					9348
					6290
					6396
					6262
					3292
					11242
					11368
					9355
					11310
					11244
					3580
					558
					3492
					9449
					418
					3531
					3508
					11452
					453
					472
					3449
					6776
					6474
					6493
					9430
					9417
				}
			}
			# Kemerovo - Urals
			build_railway = {
				path = {
					4665
					10652
					7274
					7825
					1860
					1733
					12679
					10696
					1709
					7800
					4780
					12521
					1294
					1775
					1292
					1327
					9292
					1233
					12287
					10133
					1821
					9553
					1750
					12696
					4824
					7846
					7774
					3472
					10600
					12652
					1709
				}
			}			
			# Stalingrad-Rostov on Don
			build_railway = {
				path = {
					3529
					13234
					9504
					3505
					3489
					509
					484
					11450
				}
				#(Stalingrad - Conjunction near Millerovo)
			}
			# Stalingrad-Lipetsk
			build_railway = {
				path = {
					9504
					3582
					579
					487
					9502
					11512
					3566
					11436
					9312
					9339
					6369
					6398
				}
				#(Conjunction right next to Stalingrad - Conjunction in Lipetsk)
			}
			# Stalingrad - Astrakhan
			build_railway = {
				path = {
					13232
					3413
					3487
					6516
					9455
					11429
					6620
					9753
				}
			}
			# Stalingrad - Krasnodar
			build_railway = {
				path = {
					13232
					498
					11447
					9459
					11400
					6468
					6796
					3779
					775
					6781
					6768
					3734
				}
				#(Conjunction right next to Stalingrad)
			}
			# Tbilisi - Yerevan
			build_railway = {
				path = {
					1599
					12380
					12441
					3564
					12320
				}
			}
			#Supply Hub in Yerevan
			230 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 12320
					instant_build = yes
				}
			}
			#Supply Hub in Kandalaksha
			213 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 6181
					instant_build = yes
				}
			}
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_soviet_railways
		}
	}
	focus = {
		id = SOV_socialist_science
		icon = GFX_goal_SOV_socialist_science
		prerequisite = { focus = SOV_the_ussr_academy_of_sciences }
		relative_position_id = SOV_connection_of_the_interior
		x = 3
		y = 1
		cost = 3
		available = {
			has_country_flag = {
				flag = SOV_the_ussr_academy_of_sciences_dd_flag
				days > 120
			}
			custom_trigger_tooltip = {
				tooltip = SOV_the_ussr_academy_of_sciences_dd_tt
				has_country_flag = {
					flag = SOV_the_ussr_academy_of_sciences_dd_flag
					days > 120
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		available_if_capitulated = yes
		completion_reward = {
			custom_effect_tooltip = SOV_socialist_science_tt
			hidden_effect = {
				add_to_variable = {
					var = SOV_Workers_factory_output
					value = 4
				}
				SOV_political_instability_update_effect = yes
			}
			if = {
				limit = {
					has_government = communism
				}
				add_popularity = {
					ideology = communism
					popularity = 0.5
				}
			}
		}
	}

	focus = {
		id = SOV_workers_culture
		icon = GFX_goal_generic_construction
		prerequisite = { focus = SOV_connection_of_the_interior focus = SOV_the_ussr_academy_of_sciences }
		x = 1
		y = 1
		relative_position_id = SOV_connection_of_the_interior
		cost = 3
		ai_will_do = {
			factor = 5
		}
		available = {
			has_country_flag = {
				flag = SOV_connection_of_the_interior_dd_flag
				days > 180
			}
			custom_trigger_tooltip = {
				tooltip = SOV_connection_of_the_interior_dd_tt
				has_country_flag = {
					flag = SOV_connection_of_the_interior_dd_flag
					days > 180
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			hidden_effect = {
				set_country_flag = SOV_workers_culture_dd_flag
			}
			add_ideas = workers_culture
			add_tech_bonus = {
				name = industry_effort
				bonus = 0.5
				uses = 1
				category = excavation_tech
			}
		}
	}
	focus = {
		id = SOV_our_mineral_wealth
		icon = GFX_goal_generic_build_steel
		prerequisite = { focus = SOV_workers_culture }
		relative_position_id = SOV_workers_culture
		x = 1
		y = 1
		cost = 5
		available = {
			
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			economy_fatigue_level_up_4 = yes
			custom_effect_tooltip = SOV_our_mineral_wealth_tt
			add_to_variable = {
				SOV_fyp_local_resources_factor = 0.1
			}
			253 = {		#Sverdlovsk
				add_resource = {
					type = iron
					amount = 150
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = steel_refinery
					level = 1
					instant_build = yes
				}
			}
			572 = {		#Chelyabinsk
				add_building_construction = {
					type = steel_refinery
					level = 2
					instant_build = yes
				}
			}
			226 = {		#Dnipropertovsk
				add_building_construction = {
					type = steel_refinery
					level = 2
					instant_build = yes
				}
			}
			200 = {		#Zaporozhe
				add_building_construction = {
					type = steel_refinery
					level = 2
					instant_build = yes
				}
			}
			200 = {		#Caucasus
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_evolve_our_urban_centres
		icon = GFX_goal_generic_civilian_economy_large
		prerequisite = { focus = SOV_workers_culture
		}
		x = -1
		y = 1
		relative_position_id = SOV_workers_culture
		cost = 3
		ai_will_do = {
			factor = 5
		}
		available = {
			NOT = {
				any_enemy_country = {
					is_major = yes
				}
			}
			has_country_flag = {
				flag = SOV_workers_culture_dd_flag
				days > 180
			}
			custom_trigger_tooltip = {
				tooltip = SOV_workers_culture_dd_tt
				has_country_flag = {
					flag = SOV_workers_culture_dd_flag
					days > 180
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		available_if_capitulated = no
		completion_reward = {
			economy_fatigue_level_up_2 = yes
			195 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
			219 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
			206 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
			202 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
			217 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
			249 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
			221 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_progress_cult
		icon = GFX_goal_SOV_progress_cult
		prerequisite = { focus = SOV_connection_of_the_interior }
		relative_position_id = SOV_connection_of_the_interior
		x = -1
		y = 1
		cost = 3
		available = {
			has_country_flag = {
				flag = SOV_the_ussr_academy_of_sciences_dd_flag
				days > 120
			}
			custom_trigger_tooltip = {
				tooltip = SOV_the_ussr_academy_of_sciences_dd_tt
				has_country_flag = {
					flag = SOV_the_ussr_academy_of_sciences_dd_flag
					days > 120
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		completion_reward = {
			custom_effect_tooltip = SOV_progress_cult_tt
			hidden_effect = {
				add_to_variable = {
					var = SOV_Army_research_speed
					value = 4
				}
				SOV_political_instability_update_effect = yes
			}
		}
	}	
	focus = {
		id = SOV_finish_the_second_five_year_plan
		icon = GFX_goal_SOV_second_five_year_plan
		x = 1
		y = 1
		relative_position_id = SOV_evolve_our_urban_centres
		cost = 4
		ai_will_do = {
			factor = 5
		}
		bypass = {
		}
		available = {
			num_of_civilian_factories > 240
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			custom_effect_tooltip = SOV_finish_the_second_five_year_plan_tt
			add_stability = 0.1
			hidden_effect = {
				add_to_variable = {
					var = SOV_fyp_production_speed_buildings_factor
					value = 0.2
				}
				subtract_from_variable = {
					var = SOV_fyp_consumer_goods_factor
					value = -0.08
				}
				subtract_from_variable = {
					var = SOV_fyp_political_power_cost
					value = 0.3
				}
				subtract_from_variable = {
					var = SOV_fyp_production_speed_industrial_complex_factor
					value = 0.25
				}
				subtract_from_variable = {
					var = SOV_fyp_production_speed_infrastructure_factor
					value = 0.25
				}
			}
			add_tech_bonus = {
				name = industry_effort
				bonus = 0.5
				uses = 1
				category = construction_tech
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_lazar_kaganovich
		}
	}
	###
	focus = {
		id = SOV_start_the_third_five_year_plan
		icon = GFX_goal_SOV_start_the_third_five_year_plan
		relative_position_id = SOV_start_the_second_five_year_plan
		x = 5
		y = 0
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available = {
			NOT = {
				any_enemy_country = {
					is_major = yes
				}
			}
			has_completed_focus = SOV_finish_the_second_five_year_plan
		}
		bypass = {
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		cancel = {
			has_war = yes
		}
		completion_reward = {
			custom_effect_tooltip = SOV_start_the_third_five_year_plan_tt
			hidden_effect = {
				add_to_variable = {
					var = SOV_fyp_consumer_goods_factor
					value = -0.08
				}
				add_to_variable = {
					var = SOV_fyp_political_power_cost
					value = 0.3
				}
				add_to_variable = {
					var = SOV_fyp_production_speed_arms_factory_factor
					value = 0.2
				}
			}
		}
	}
	focus = {
		id = SOV_bread_basket_of_the_soviet_union
		icon = GFX_focus_prc_agrarian_socialism
		prerequisite = { focus = SOV_start_the_third_five_year_plan
		}
		x = -1
		y = 1
		relative_position_id = SOV_start_the_third_five_year_plan
		cost = 3
		ai_will_do = {
			factor = 5
		}
		available = {
			controls_state = 202
			NOT = {
				any_enemy_country = {
					is_major = yes
				}
			}
			NOT = {
				has_completed_focus = SOV_finish_the_third_five_year_plan
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			custom_effect_tooltip = SOV_bread_basket_of_the_soviet_union_tt
			hidden_effect = {
				add_to_variable = {
					var = SOV_Peasants_consumer_goods
					value = 4
				}
				SOV_political_instability_update_effect = yes
			}
			202 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = arms_factory
					level = 4
					instant_build = yes
				}
			}
			202 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex
					level = 4
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SOV_national_academies_of_sciences
		icon = GFX_focus_research2
		prerequisite = { focus = SOV_start_the_third_five_year_plan }
		relative_position_id = SOV_start_the_third_five_year_plan
		x = 1
		y = 1
		cost = 6
		available = {
			
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		completion_reward = {
			add_research_slot = 1
			custom_effect_tooltip = SOV_national_academies_of_sciences_tt
		}
	}

	focus = {
		id = SOV_develop_the_heartland
		icon = GFX_goal_generic_construction
		prerequisite = { focus = SOV_bread_basket_of_the_soviet_union }
		relative_position_id = SOV_bread_basket_of_the_soviet_union
		x = 0
		y = 1
		cost = 3
		available = {
			
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			economy_fatigue_level_up_4 = yes
			every_core_state = {
				limit = {
					region = 136
					infrastructure < 5
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			every_core_state = {
				limit = {
					is_on_continent = asia
					OR = {
						has_resources_amount = {
							resource = coal
							amount > 0
						}
						has_resources_amount = {
							resource = bauxite
							amount > 0
						}
						has_resources_amount = {
							resource = chromium
							amount > 0
						}
						has_resources_amount = {
							resource = tungsten
							amount > 0
						}
						has_resources_amount = {
							resource = iron
							amount > 0
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			653 = {
				add_building_construction = {
					type = aluminium_refinery
					level = 2
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SOV_pc_of_mechanical_engineering
		icon = GFX_goal_generic_production2
		prerequisite = { focus = SOV_bread_basket_of_the_soviet_union }
		relative_position_id = SOV_bread_basket_of_the_soviet_union
		x = 2
		y = 1
		cost = 3
		available = {
			
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_to_variable = { SOV_fyp_production_speed_buildings_factor = 0.05 }
			custom_effect_tooltip = SOV_pc_of_mechanical_engineering_ns_tt
			hidden_effect = {
				set_country_flag = SOV_pc_of_mechanical_engineering_dd_flag
			}
			if = {
				#DEFAULT COMMIE
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = SOV_pc_of_mechanical_engineering_name_default
					bonus = 0.5
					uses = 2
					category = construction_tech
					category = electronics
				}
			}
			else = {
				#ALT IDEOLOGY
				add_tech_bonus = {
					name = SOV_pc_of_mechanical_engineering_name_alt
					bonus = 0.5
					uses = 2
					category = construction_tech
					category = electronics
				}
			}
		}
	}

	focus = {
		id = SOV_extend_the_working_week
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = SOV_develop_the_heartland }
		x = 0
		y = 1
		relative_position_id = SOV_develop_the_heartland
		cost = 3
		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			has_idea = war_economy
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			economy_fatigue_level_up_4 = yes
			add_timed_idea = {
				idea = lowered_worker_minimum_wage
				days = 1095
			}
		}
	}
	focus = {
		id = SOV_pc_of_fuel_industry
		icon = GFX_goal_generic_oil_refinery
		prerequisite = { focus = SOV_develop_the_heartland }
		relative_position_id = SOV_develop_the_heartland
		x = 2
		y = 1
		cost = 3
		available = {
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			economy_fatigue_level_up_2 = yes
			add_tech_bonus = {
				name = SOV_pc_of_fuel_industry
				bonus = 0.5
				uses = 1
				category = cat_fuel
			}
			234 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = fuel_silo
					level = 1
					instant_build = yes
				}
			}
			232 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			229 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = fuel_silo
					level = 3
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_a_secure_industrial_base
		icon = GFX_goal_generic_railroads
		prerequisite = { focus = SOV_extend_the_working_week
		}
		x = 0
		y = 1
		relative_position_id = SOV_extend_the_working_week
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available = {
			NOT = {
				any_enemy_country = {
					is_major = yes
				}
			}
			NOT = {
				has_completed_focus = SOV_finish_the_third_five_year_plan
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			economy_fatigue_level_up_4 = yes
			217 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = infrastructure
					level = 3
					instant_build = yes
				}
			}
			398 = {
				add_extra_state_shared_building_slots = 12
				add_building_construction = {
					type = infrastructure
					level = 3
					instant_build = yes
				}
				add_building_construction = {
					type = synthetic_refinery
					level = 3
					instant_build = yes
				}
			}
			651 = {
				add_extra_state_shared_building_slots = 12
				add_building_construction = {
					type = infrastructure
					level = 3
					instant_build = yes
				}
				add_building_construction = {
					type = fuel_silo
					level = 2
					instant_build = yes
				}
			}
			653 = {
				add_extra_state_shared_building_slots = 12
				add_building_construction = {
					type = infrastructure
					level = 3
					instant_build = yes
				}
			}
			572 = {
				add_extra_state_shared_building_slots = 12
				add_building_construction = {
					type = infrastructure
					level = 3
					instant_build = yes
				}
			}
			876 = {
				add_extra_state_shared_building_slots = 12
				add_building_construction = {
					type = infrastructure
					level = 3
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SOV_national_specialists
		icon = GFX_goal_generic_construction
		prerequisite = { focus = SOV_extend_the_working_week }
		relative_position_id = SOV_extend_the_working_week
		x = 2
		y = 1
		cost = 3
		available = {
			
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}
		completion_reward = {
			custom_effect_tooltip = SOV_national_specialists_tt
			SOV_replace_industrial_designer = yes			#"National" Industrial Designers get +5% research bonus
			hidden_effect = {
				add_ideas = SOV_national_specialists_ns
			}
		}
	}

	focus = {
		id = SOV_finish_the_third_five_year_plan
		icon = GFX_goal_SOV_third_five_year_plan
		x = 1
		y = 1
		relative_position_id = SOV_a_secure_industrial_base
		cost = 4
		ai_will_do = {
			factor = 5
		}
		available = {
			num_of_military_factories > 600
			NOT = {
				any_enemy_country = {
					is_major = yes
				}
				surrender_progress > 0.05
			}
		}

		bypass = {
		}
		completion_reward = {
			add_political_power = 200
			add_war_support = 0.1
			custom_effect_tooltip = SOV_finish_the_third_five_year_plan_tt
			hidden_effect = {
				subtract_from_variable = {
					var = SOV_fyp_political_power_cost
					value = 0.3
				}
				subtract_from_variable = {
					var = SOV_fyp_consumer_goods_factor
					value = -0.08
				}
				subtract_from_variable = {
					var = SOV_fyp_production_speed_arms_factory_factor
					value = 0.15
				}
			}
			add_tech_bonus = {
				name = industry_effort_2
				bonus = 0.5
				uses = 1
				category = industry
			}
		}
	}
	###
	focus = {
		id = SOV_start_the_fourth_five_year_plan
		icon = GFX_goal_SOV_start_the_fourth_five_year_plan
		relative_position_id = SOV_finish_the_second_five_year_plan
		x = 0
		y = 2
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available = {
			has_completed_focus = SOV_finish_the_third_five_year_plan
			has_war = no
		}
		available_if_capitulated = no
		cancel = {
			has_war = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		bypass = {
		}
		completion_reward = {
			custom_effect_tooltip = SOV_start_the_fourth_five_year_plan_tt
			hidden_effect = {
				add_to_variable = {
					var = SOV_fyp_political_power_cost
					value = 0.5
				}
				add_to_variable = {
					var = SOV_fyp_industrial_capacity_factory
					value = -0.3
				}
				add_to_variable = {
					var = SOV_fyp_industry_repair_factor
					value = 0.4
				}
			}
		}
	}

	focus = {
		#unlock this focus once the war with a major is over
		id = SOV_restoration_and_development
		icon = GFX_goal_generic_production
		prerequisite = { focus = SOV_start_the_fourth_five_year_plan }
		x = -1
		y = 1
		relative_position_id = SOV_start_the_fourth_five_year_plan
		cost = 3
		cancel_if_invalid = no
		available = {
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			economy_fatigue_level_down_10 = yes
		}
	}
	focus = {
		id = SOV_steel_casting_industry
		icon = GFX_goal_generic_construction
		prerequisite = { focus = SOV_start_the_fourth_five_year_plan }
		relative_position_id = SOV_restoration_and_development
		x = 2
		y = 0
		cost = 3
		available = {
			
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		available_if_capitulated = no
		completion_reward = {

		}
	}

	focus = {
		id = SOV_the_greatest_industrial_power
		icon = GFX_goal_generic_production2
		prerequisite = { focus = SOV_restoration_and_development
		}
		x = 0
		y = 1
		relative_position_id = SOV_restoration_and_development
		cost = 3
		ai_will_do = {
			factor = 5
		}
		available = {
			NOT = {
				any_enemy_country = {
					is_major = yes
				}
			}
			NOT = {
				has_completed_focus = SOV_finish_the_fourth_five_year_plan
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		available_if_capitulated = no
		completion_reward = {
			add_tech_bonus = {
				name = industry_effort_3
				bonus = 0.5
				uses = 4
				category = industry
			}
			add_tech_bonus = {
				name = industry_effort_4
				bonus = 0.5
				uses = 2
				category = construction_tech
			}
		}
	}
	focus = {
		id = SOV_kurnatovs_experiments
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = SOV_restoration_and_development }
		x = 2
		y = 1
		relative_position_id = SOV_restoration_and_development
		cost = 6
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			add_tech_bonus = {
				name = SOV_soviet_atomic_bomb_project_tech_bonus_name
				bonus = 0.5
				uses = 1
				category = nuclear
			}
			add_ideas = SOV_no_time_for_peace_idea
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				create_operative_leader = {
					name = "Ursula Kuczynski"
					GFX = GFX_Portrait_ursula_kuczynski
					female = yes
					traits = {
						operative_safe_cracker
						operative_infiltrator
					}
					bypass_recruitment = no
					available_to_spy_master = yes
					nationalities = {
						SOV
						GER
					}
				}
				add_ideas = SOV_soviet_atomic_bomb_project_ns
			}
			custom_effect_tooltip = SOV_soviet_atomic_bomb_project_unlock_operation_tt
		}
	}

	focus = {
		id = SOV_transformation_of_nature
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_the_greatest_industrial_power
		}
		x = 0
		y = 1
		relative_position_id = SOV_the_greatest_industrial_power
		cost = 3
		ai_will_do = {
			factor = 5
		}
		available = {
			controls_state = 404
			has_tech = synth_oil_experiments
			NOT = {
				any_enemy_country = {
					is_major = yes
				}
			}
			NOT = {
				has_completed_focus = SOV_finish_the_fourth_five_year_plan
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		available_if_capitulated = no
		completion_reward = {
			custom_effect_tooltip = SOV_transformation_of_nature_tt
			add_tech_bonus = {
				name = industry_effort
				bonus = 0.5
				uses = 3
				category = industry
			}
			if = {
				limit = {
					571 = {
						is_controlled_by = SOV
					}
				}
				571 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = synthetic_refinery
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					219 = {
						is_controlled_by = SOV
					}
				}
				219 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = synthetic_refinery
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					195 = {
						is_controlled_by = SOV
					}
				}
				195 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = synthetic_refinery
						level = 2
						instant_build = yes
					}
				}
			}
			add_resource = {
				type = rubber
				amount = 6
				state = 404
			}
		}
	}
	focus = {
		id = SOV_ballistic_missiles
		icon = GFX_focus_research
		prerequisite = { focus = SOV_the_greatest_industrial_power }
		relative_position_id = SOV_transformation_of_nature
		x = 2
		y = 0
		cost = 3
		available = {
			
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
		available_if_capitulated = no
		completion_reward = {

		}
	}

	focus = {
		id = SOV_found_the_comecon
		icon = GFX_focus_SOV_the_comecon
		prerequisite = { focus = SOV_transformation_of_nature
		}
		relative_position_id = SOV_transformation_of_nature
		x = 1
		y = 1
		cost = 3
		#allow_branch = {
		#	has_government = communism
		#}
		available = {
			num_subjects > 0
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}
		completion_reward = {
			if = {
				limit = {
					num_subjects > 0
				}
				add_ideas = SOV_comecon_sov_default
				custom_effect_tooltip = SOV_found_the_comecon_subjects_tt
				every_other_country = {
					limit = {
						is_subject_of = ROOT
					}
					add_ideas = SOV_comecon_puppet_default
				}
				custom_effect_tooltip = SOV_found_the_comecon_program_tt
				hidden_effect = {
					add_to_tech_sharing_group = SOV_comecon
					every_country = {
						limit = {
							is_subject_of = ROOT
						}
						add_to_tech_sharing_group = SOV_comecon
					}
				}
			}
			else = {
				#Early tooltip for when Soviets have no subjects
				effect_tooltip = {
					add_ideas = SOV_comecon_sov_default
				}
				custom_effect_tooltip = SOV_found_the_comecon_subjects_tt
				effect_tooltip = {
					add_ideas = SOV_comecon_puppet_default
				}
				custom_effect_tooltip = SOV_found_the_comecon_program_tt
			}
			unlock_decision_category_tooltip = SOV_comecon_dec_cat
		}
	}

	focus = {
		id = SOV_finish_the_fourth_five_year_plan
		icon = GFX_goal_SOV_fourth_five_year_plan
		x = 0
		y = 1
		relative_position_id = SOV_found_the_comecon
		cost = 4
		ai_will_do = {
			factor = 5
		}
		available = {
			has_completed_focus = SOV_start_the_fourth_five_year_plan
			OR = {
				has_completed_focus = SOV_bread_basket_of_the_soviet_union
				any_enemy_country = {
					is_major = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		available_if_capitulated = no
		bypass = {
		}
		completion_reward = {
			custom_effect_tooltip = SOV_finish_the_fourth_five_year_plan_tt
			hidden_effect = {
				subtract_from_variable = {
					var = SOV_fyp_political_power_cost
					value = 0.5
				}
				subtract_from_variable = {
					var = SOV_fyp_industrial_capacity_factory
					value = -0.3
				}
				subtract_from_variable = {
					var = SOV_fyp_industry_repair_factor
					value = 0.35
				}
			}
			add_tech_bonus = {
				name = SOV_synth_rubber
				bonus = 3
				uses = 1
				category = synth_resources
			}
		}
	}
	###
	focus = {
		id = SOV_start_the_fifth_five_year_plan
		icon = GFX_goal_SOV_start_the_fifth_five_year_plan
		relative_position_id = SOV_finish_the_third_five_year_plan
		x = 0
		y = 2
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available = {
			has_completed_focus = SOV_finish_the_fourth_five_year_plan
			has_war = no
		}
		available_if_capitulated = no
		cancel = {
			has_war = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		bypass = {
		}
		completion_reward = {
			
		}
	}
	focus = {
		id = SOV_expand_the_heavy_industry
		icon = GFX_goal_generic_production
		prerequisite = { focus = SOV_start_the_fifth_five_year_plan }
		x = -1
		y = 1
		relative_position_id = SOV_start_the_fifth_five_year_plan
		cost = 3
		cancel_if_invalid = no
		available = {
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {

		}
	}
	focus = {
		id = SOV_synthetic_rubber_program
		icon = GFX_goal_generic_synthetic_rubber
		prerequisite = { focus = SOV_start_the_fifth_five_year_plan }
		relative_position_id = SOV_expand_the_heavy_industry
		x = 2
		y = 0
		cost = 3
		available = {
			
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		available_if_capitulated = no
		completion_reward = {

		}
	}

	focus = {
		id = SOV_improve_transportation
		icon = GFX_goal_generic_railroads
		prerequisite = { focus = SOV_expand_the_heavy_industry }
		x = 0
		y = 1
		relative_position_id = SOV_expand_the_heavy_industry
		cost = 3
		cancel_if_invalid = no
		available = {
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			
		}
	}
	focus = {
		id = SOV_oil_production
		icon = GFX_goal_generic_oil_contract
		prerequisite = { focus = SOV_expand_the_heavy_industry }
		relative_position_id = SOV_improve_transportation
		x = 2
		y = 0
		cost = 3
		available = {
			
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		available_if_capitulated = no
		completion_reward = {

		}
	}

	focus = {
		id = SOV_arsenal_of_communism
		icon = GFX_goal_generic_construction
		prerequisite = { focus = SOV_improve_transportation }
		x = 0
		y = 1
		relative_position_id = SOV_improve_transportation
		cost = 3
		cancel_if_invalid = no
		available = {
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			
		}
	}
	focus = {
		id = SOV_closed_city_network
		icon = GFX_focus_research
		prerequisite = { focus = SOV_improve_transportation }
		relative_position_id = SOV_arsenal_of_communism
		x = 2
		y = 0
		cost = 3
		available = {
			
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
		available_if_capitulated = no
		completion_reward = {

		}
	}

	focus = {
		id = SOV_revise_the_five_year_plan
		icon = GFX_goal_generic_construction
		prerequisite = { focus = SOV_arsenal_of_communism }
		x = 1
		y = 1
		relative_position_id = SOV_arsenal_of_communism
		cost = 3
		cancel_if_invalid = no
		available = {
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			
		}
	}

	focus = {
		id = SOV_finish_the_fifth_five_year_plan
		icon = GFX_goal_SOV_fourth_five_year_plan
		x = 0
		y = 1
		relative_position_id = SOV_revise_the_five_year_plan
		cost = 4
		ai_will_do = {
			factor = 5
		}
		available = {
			has_completed_focus = SOV_start_the_fourth_five_year_plan
			OR = {
				has_completed_focus = SOV_bread_basket_of_the_soviet_union
				any_enemy_country = {
					is_major = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		available_if_capitulated = no
		bypass = {
		}
		completion_reward = {

		}
	}
	
	####################################################################################################################
	############################################# Emergency War Industry ###############################################
	####################################################################################################################
	focus = {
		id = SOV_split_the_pc_of_defence_industry
		icon = GFX_goal_SOV_peoples_commissariat
		cost = 3
		x = 11
		y = 0
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		available = {
			has_completed_focus = SOV_start_the_third_five_year_plan
			threat > 0.3
		}
		completion_reward = {
			add_timed_idea = {
				idea = disorganised_industry
				days = 730
			}
			remove_ideas = peoples_commissariat_focus
			if = {
				limit = {
					has_idea = partial_economic_mobilisation
				}
				add_political_power = 150
			}
			else = {
				add_ideas = partial_economic_mobilisation
			}
		}
	}
	focus = {
		id = SOV_pc_of_munitions
		icon = GFX_goal_generic_equip_troops
		relative_position_id = SOV_split_the_pc_of_defence_industry
		prerequisite = {
			focus = SOV_split_the_pc_of_defence_industry
		}
		cost = 3
		x = -3
		y = 1
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = { 
			swap_ideas = {
				remove_idea = SOV_centralized_control_rifles
				add_idea = SOV_centralized_control_rifles1
			}
		}
	}
	focus = {
		id = SOV_pc_of_armament
		icon = GFX_focus_generic_combined_arms
		relative_position_id = SOV_split_the_pc_of_defence_industry
		prerequisite = {
			focus = SOV_split_the_pc_of_defence_industry
		}
		cost = 3
		x = -1
		y = 1
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_tula_arms_plant
			if = {
				limit = {
					223 = {
						is_controlled_by = SOV
					}
				}
				223 = {
					add_extra_state_shared_building_slots = 8
					add_building_construction = {
						type = arms_factory
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 4
						instant_build = yes
					}
				}
				40 = {
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = arms_factory
						level = 4
						instant_build = yes
					}
				}
			}
			else = {
				40 = {
					add_extra_state_shared_building_slots = 8
					add_building_construction = {
						type = arms_factory
						level = 8
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = SOV_pc_of_armament_tt
			add_to_variable = {
				SOV_fyp_industrial_capacity_factory = 0.05
			}
		}
	}
	focus = {
		id = SOV_pc_of_aviation_industry
		icon = GFX_focus_generic_aircraft_production
		relative_position_id = SOV_split_the_pc_of_defence_industry
		prerequisite = {
			focus = SOV_split_the_pc_of_defence_industry
		}
		cost = 3
		x = 1
		y = 1
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			hidden_effect = {
				swap_ideas = {
					remove_idea = SOV_expanded_aircraft_industry_bonus
					add_idea = SOV_increased_aircraft_production_ns_bonus
				}
				if = {
					#DEFAULT COMMIE
					limit = {
						NOT = {
							has_government = communism
						}
					}
					remove_dynamic_modifier = {
						modifier = SOV_soviet_airforce_dynamic_modifier_alt
					}
					add_dynamic_modifier = {
						modifier = SOV_soviet_airforce_aircraft_production_focus_dynamic_modifier_alt
					}
				}
			}
			custom_effect_tooltip = SOV_increase_aircraft_production_ns_tt
			219 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
			247 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
			253 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SOV_pc_of_shipbuilding_industry
		icon = GFX_goal_generic_navy_cruiser
		relative_position_id = SOV_split_the_pc_of_defence_industry
		prerequisite = {
			focus = SOV_split_the_pc_of_defence_industry
		}
		cost = 3
		x = 3
		y = 1
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			remove_ideas = SOV_centralized_control_ships
			custom_effect_tooltip = SOV_pc_of_shipbuilding_industry_tt
			add_to_variable = {
				SOV_fyp_industrial_capacity_dockyard = 0.05
			}
		}
	}
	################################# Great Patriotic War ###########################
	focus = {
		id = SOV_great_patriotic_war
		icon = GFX_focus_generic_join_comintern
		prerequisite = {
			focus = SOV_split_the_pc_of_defence_industry
		}
		x = 0
		y = 2
		relative_position_id = SOV_split_the_pc_of_defence_industry
		cost = 3
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				NOT = {
					has_war = yes
				}
			}
			modifier = {
				factor = 10
				has_war = yes
			}
		}
		available = {
			has_idea = SOV_stavka
			OR = {
				AND = {
					casualties > 2000000
					custom_trigger_tooltip = {
						tooltip = SOV_has_not_officers_purged_tt
						NOT = {
							has_idea = officers_purged
						}
						NOT = {
							has_idea = officers_purged_2
						}
						NOT = {
							has_idea = officers_purged_3
						}
						NOT = {
							has_idea = officers_purged_4
						}
						NOT = {
							has_idea = officers_purged_5
						}
						NOT = {
							has_idea = officers_purged_6
						}
						NOT = {
							has_idea = officers_purged_7
						}
						NOT = {
							has_idea = officers_purged_8
						}
						NOT = {
							has_idea = officers_purged_9
						}
						NOT = {
							has_idea = officers_purged_10
						}
					}
				}
				surrender_progress > 0.3
			}
			any_enemy_country = {
				is_major = yes
			}
		}
		search_filters = {
			FOCUS_FILTER_EMERGENCY
		}
		completion_reward = {
			deactivate_advisor = SOV_iosif_stalin
			hidden_effect = {	#Stalin can be replaced in army chief
				SOV_iosif_stalin = {
					remove_advisor_role = {
						slot = army_chief
					}
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = SOV_iosif_stalin
							ledger = army
							traits = {
								supreme_commander
							}
						}
					}
				}
			}
			swap_ideas = {
				remove_idea = great_patriotic_war
				add_idea = great_patriotic_war_2
			}
			add_ideas = extreme_economic_mobilisation
			custom_effect_tooltip = SOV_great_patriotic_war_tt
			hidden_effect = {
				add_to_variable = {
					var = SOV_Army_attitude
					value = 1
				}
				add_to_variable = {
					var = SOV_Army_influence
					value = 1
				}
				SOV_political_instability_update_effect = yes
				set_country_flag = great_patriotic_war_flag
			}
			if = {
				limit = {
					has_idea = women_in_the_frontlines
				}
				add_political_power = 300
			}
			else = {
				add_ideas = women_in_the_frontlines
			}
		}
	}
	focus = {
		id = SOV_glavvoenstroi
		icon = GFX_goal_generic_construction2
		relative_position_id = SOV_great_patriotic_war
		prerequisite = {
			focus = SOV_great_patriotic_war
		}
		cost = 3
		x = 0
		y = 1
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_EMERGENCY
		}

		ai_will_do = {
			factor = 1
		}

		available = {
			OR = {
				any_enemy_country = { is_major = yes }
				NOT = {
					has_idea = cavalry_army_clique
					has_idea = cavalry_army_clique_2
					has_idea = cavalry_army_clique_3
				}
			}
		}

		completion_reward = {
			custom_effect_tooltip = SOV_glavvoenstroi_tt
			add_to_variable = {
				SOV_fyp_consumer_goods_factor = -0.1
			}
			add_to_variable = {
				SOV_fyp_production_speed_buildings_factor = 0.05
			}
		}
	}
	focus = {
		id = SOV_pc_of_mortar_armament
		icon = GFX_goal_generic_occupy_start_war
		relative_position_id = SOV_glavvoenstroi
		prerequisite = {
			focus = SOV_great_patriotic_war
		}
		cost = 3
		x = -2
		y = 0
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_EMERGENCY
		}

		ai_will_do = {
			factor = 1
		}

		available = {
			OR = {
				any_enemy_country = { is_major = yes }
				NOT = {
					has_idea = cavalry_army_clique
					has_idea = cavalry_army_clique_2
					has_idea = cavalry_army_clique_3
				}
			}
		}

		completion_reward = {
			add_ideas = SOV_centralized_control_mg
		}
	}
	focus = {
		id = SOV_pc_of_tank_industry
		icon = GFX_goal_generic_build_tanks
		relative_position_id = SOV_glavvoenstroi
		prerequisite = {
			focus = SOV_great_patriotic_war
		}
		cost = 3
		x = 2
		y = 0
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_EMERGENCY
		}

		available = {
			OR = {
				any_enemy_country = { is_major = yes }
				NOT = {
					has_idea = cavalry_army_clique
					has_idea = cavalry_army_clique_2
					has_idea = cavalry_army_clique_3
				}
			}
		}
		ai_will_do = {
			factor = 100
		}

		completion_reward = {
			set_technology = {
				cutting_corners = 1
			}
		}
	}
	focus = {
		id = SOV_merge_evacuated_plants
		icon = GFX_focus_SOV_merge_plants
		relative_position_id = SOV_glavvoenstroi
		prerequisite = { focus = SOV_glavvoenstroi }
		prerequisite = { focus = SOV_pc_of_tank_industry }
		prerequisite = { focus = SOV_pc_of_mortar_armament }

		cost = 2
		x = 0
		y = 1
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_EMERGENCY
		}
		completion_reward = { 
			custom_effect_tooltip = SOV_merge_evacuated_plants_wa_tt
		}
	}
	focus = {
		id = SOV_tankograd
		icon = GFX_goal_SOV_tankograd
		relative_position_id = SOV_merge_evacuated_plants
		prerequisite = { focus = SOV_merge_evacuated_plants }
		cost = 4
		x = -1
		y = 1
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_EMERGENCY
		}
		available = {
			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
			572 = {
				is_owned_and_controlled_by = SOV
			}
		}
		completion_reward = {
			572 = {
				add_extra_state_shared_building_slots = 25
				add_building_construction = {
					type = arms_factory
					level = 5
					instant_build = yes
				}
				custom_effect_tooltip = SOV_tankograd_tt
			}
			
			hidden_effect = {
				572 = {
					add_building_construction = {
						type = infrastructure
						level = 10
						instant_build = yes
					}
				}
			}
		}
	}	
	focus = {
		id = SOV_ural_tank_factories
		icon = GFX_focus_generic_tank_production
		relative_position_id = SOV_merge_evacuated_plants
		prerequisite = { focus = SOV_merge_evacuated_plants }
		cost = 4
		x = 1
		y = 1
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_EMERGENCY
		}
		completion_reward = { 
			653 = {
				add_extra_state_shared_building_slots = 30
				add_building_construction = {
					type = arms_factory
					level = 5
					instant_build = yes
				}
				custom_effect_tooltip = SOV_tankograd_tt
			}
			hidden_effect = {
				653 = {
					add_building_construction = {
						type = infrastructure
						level = 10
						instant_build = yes
					}
				}
			}
		}
	}

	############################################
	########## ARMED FORCES BRANCH #############
	############################################

	focus = {
		id = SOV_pc_of_defence
		icon = GFX_goal_SOV_central_military_commision
		x = 24
		y = 0

		cost = 3

		ai_will_do = {
			factor = 1
		}

		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_ARMY_XP FOCUS_FILTER_AIR_XP }

		completion_reward = {
			add_political_power = 25
			army_experience = 10
			air_experience = 10
		}
	}

	############## ARMY BRANCH ###############
	
	focus = {
		id = SOV_reinstate_general_staff_academy
		icon = GFX_goal_SOV_new_soviet_society
		prerequisite = { focus = SOV_pc_of_defence }
		relative_position_id = SOV_pc_of_defence
		x = 0
		y = 1

		cost = 3

		ai_will_do = {
			factor = 1
		}

		search_filters = { FOCUS_FILTER_ARMY_XP }

		completion_reward = {
			army_experience = 10
			custom_effect_tooltip = SOV_reinstate_general_staff_academy_tt
			add_to_variable = { SOV_the_red_army_experience_gain_army_unit_factor = 0.1 }
		}
	}
	focus = {
		id = SOV_abolish_the_territorial_organisation 
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = SOV_reinstate_general_staff_academy }
		relative_position_id = SOV_reinstate_general_staff_academy
		x = 0
		y = 1

		cost = 4

		ai_will_do = {
			factor = 1
		}
		
		search_filters = { FOCUS_FILTER_MANPOWER }

		completion_reward = {
			custom_effect_tooltip = SOV_abolish_the_territorial_organisation_tt
			add_to_variable = { SOV_the_red_army_conscription_factor = 0.1 }
			add_to_variable = { SOV_the_red_army_mobilization_laws_cost_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_training_time_factor = -0.1 }

			custom_effect_tooltip = recruiting_reserves_20
			country_event = sov_armor.817
			hidden_effect = {
				if = {
					limit = {
						has_country_flag = reserve_total_1
					}
					clr_country_flag = reserve_total_1
					set_country_flag = reserve_total_3
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_2
					}
					clr_country_flag = reserve_total_2
					set_country_flag = reserve_total_4
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_3
					}
					clr_country_flag = reserve_total_3
					set_country_flag = reserve_total_5
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_4
					}
					clr_country_flag = reserve_total_4
					set_country_flag = reserve_total_6
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_5
					}
					clr_country_flag = reserve_total_5
					set_country_flag = reserve_total_7
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_6
					}
					clr_country_flag = reserve_total_6
					set_country_flag = reserve_total_8
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_7
					}
					clr_country_flag = reserve_total_7
					set_country_flag = reserve_total_9
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_8
					}
					clr_country_flag = reserve_total_8
					set_country_flag = reserve_total_10
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_9
					}
					clr_country_flag = reserve_total_9
					set_country_flag = reserve_total_10
				}
				else = {
					set_country_flag = reserve_total_2
				}
			}
		}
	}
	focus = {
		id = SOV_restore_cossack_units
		icon = GFX_focus_SOV_restore_cossack_units
		prerequisite = { focus = SOV_abolish_the_territorial_organisation }
		x = -1
		y = 1
		relative_position_id = SOV_abolish_the_territorial_organisation
		cost = 3

		search_filters = { FOCUS_FILTER_MANPOWER }

		completion_reward = {
			add_stability = 0.05
			custom_effect_tooltip = SOV_restore_cossack_units_ns_tt
			add_to_variable = { SOV_the_red_army_modifier_army_sub_unit_cavalry_speed_factor = 0.05 }
			add_to_variable = { SOV_the_red_army_cavalry_attack_factor = 0.05 }
			add_to_variable = { SOV_the_red_army_conscription_factor = 0.05 }

			show_unit_leaders_tooltip = SOV_lev_dovator

			#Spawn 3 Cossack divisions
			custom_effect_tooltip = SOV_restore_cossack_units_tt
			hidden_effect = {
				set_technology = {
					cossack_units = 1
				}

				division_template = {
					name = "Kazachya Kavaleryskaya Diviziya"
					division_names_group = SOV_CAV_02
					template_counter = 5
					regiments = {
						cavalry = { x = 0 y = 0 }
						cavalry = { x = 0 y = 1 }
						cavalry = { x = 0 y = 2 }

						cavalry = { x = 1 y = 0 }
						cavalry = { x = 1 y = 1 }
						cavalry = { x = 1 y = 2 }

						motorized_artillery_brigade = { x = 2 y = 0 }
						motorized_artillery_brigade = { x = 2 y = 1 }

						medium_armor = { x = 3 y = 0 }
					}
					support = {
						engineer = {
							x = 0
							y = 0
						}
						armoured_recon = {
							x = 0
							y = 1
						}
					}
				}
				capital_scope = {
					#Cossack Cavalry
					create_unit = {
						division = "name = \"4ya Donskaya Kazachya Kav. Div.\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0"
						owner = ROOT
					}
					create_unit = {
						division = "name = \"6ya Kubansko-Terskaya Kazachya Kav. Div.\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0"
						owner = ROOT
					}
					create_unit = {
						division = "name = \"10ya Tersko-Stavropolskaya Kazachya Kav. Div\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0"
						owner = ROOT
					}
					create_unit = {
						division = "name = \"12ya Kubanskaya Kazachya Kav. Div.\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0"
						owner = ROOT
					}
				}
			}
		}
	}
	focus = {
		id = SOV_instate_political_commissars
		icon = GFX_goal_generic_major_war
		prerequisite = { focus = SOV_abolish_the_territorial_organisation }
		x = 1
		y = 1
		relative_position_id = SOV_abolish_the_territorial_organisation
		cost = 3

		available = {
			has_idea = SOV_politicized_military
		}

		search_filters = {
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = SOV_politicized_military
				add_idea = SOV_politicized_military_keep
			}
		}
	}
	focus = {
		id = SOV_reserve_armies_administration
		icon = GFX_focus_SOV_mobilization_plan
		prerequisite = { focus = SOV_restore_cossack_units }
		prerequisite = { focus = SOV_instate_political_commissars }
		x = 0
		y = 2
		relative_position_id = SOV_abolish_the_territorial_organisation
		cost = 3
		ai_will_do = {
			factor = 1
		}
		search_filters = {
			FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			custom_effect_tooltip = recruiting_reserves_40
			country_event = sov_armor.817
			hidden_effect = {
				if = {
					limit = {
						has_country_flag = reserve_total_1
					}
					clr_country_flag = reserve_total_1
					set_country_flag = reserve_total_5
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_2
					}
					clr_country_flag = reserve_total_2
					set_country_flag = reserve_total_6
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_3
					}
					clr_country_flag = reserve_total_3
					set_country_flag = reserve_total_7
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_4
					}
					clr_country_flag = reserve_total_4
					set_country_flag = reserve_total_8
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_5
					}
					clr_country_flag = reserve_total_5
					set_country_flag = reserve_total_9
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_6
					}
					clr_country_flag = reserve_total_6
					set_country_flag = reserve_total_10
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_7
					}
					clr_country_flag = reserve_total_7
					set_country_flag = reserve_total_10
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_8
					}
					clr_country_flag = reserve_total_8
					set_country_flag = reserve_total_10
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_9
					}
					clr_country_flag = reserve_total_9
					set_country_flag = reserve_total_10
				}
				else = {
					set_country_flag = reserve_total_4
				}
			}
			custom_effect_tooltip = SOV_reserve_armies_administration_tt
			add_to_variable = { SOV_the_red_army_minimum_training_level = -0.1 }
			add_to_variable = { SOV_the_red_army_mobilization_speed = 0.1 }

			if = {
				limit = { has_idea = limited_conscription }
				add_political_power = 100
			}
			else = {
				add_ideas = limited_conscription
			}
		}
	}
	focus = {
		id = SOV_lessons_of_war
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = SOV_reserve_armies_administration }
		relative_position_id = SOV_reserve_armies_administration
		x = 0
		y = 1

		available = {
			has_country_flag = SOV_war_since_start
		}
		cost = 4
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1000
				any_claim = yes
				has_war = yes
			}
		}
		cancel_if_invalid = yes
		available_if_capitulated = yes
		search_filters = {
			FOCUS_FILTER_ARMY_XP
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			#unlocks first army reform
			activate_advisor = semyon_timoshenko

			add_to_variable = { SOV_the_red_army_army_infantry_defence_factor = 0.15 }
			add_to_variable = { SOV_the_red_army_experience_gain_army_unit_factor = 0.1 }
			add_to_variable = { SOV_the_red_army_winter_attrition_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_heat_attrition_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_acclimatization_cold_climate_gain_factor = 0.50 }
			add_to_variable = { SOV_the_red_army_acclimatization_hot_climate_gain_factor = 0.10 }
			add_to_variable = { SOV_the_red_army_terrain_penalty_reduction = 0.05 }
			custom_effect_tooltip = SOV_lessons_of_war_tt

			add_doctrine_cost_reduction = {
				name = SOV_lessons_of_war
				cost_reduction = 0.99
				uses = 1
				category = cat_grand_battle_plan
			}
			add_tech_bonus = {
				name = SOV_lessons_of_war
				bonus = 1
				uses = 1
				technology = sov_heavy_tank_chassis_2
				technology = sov_heavy_tank_chassis_2_2
			}
			#custom_effect_tooltip = SOV_lessons_of_war_cowed_trait_tt
			
			hidden_effect = {
				set_country_flag = SOV_lessons_of_war_flag
			}
		}
	}
	focus = {
		id = SOV_army_reorganization
		icon = GFX_focus_generic_military_mission
		prerequisite = { focus = SOV_lessons_of_war }
		x = 0
		y = 1
		relative_position_id = SOV_lessons_of_war
		cost = 4

		select_effect = {
			add_timed_idea = { idea = SOV_army_reorganization_ns days = 365 }
		}
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}

		completion_reward = {
			#Tooltip purposes (Select Effect)
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				add_timed_idea = { idea = SOV_army_reorganization_ns days = 365 }
			}
			#(Complete Effect)
			custom_effect_tooltip = SOV_focus_complete_effect_tt
			
			if = {
				limit = {
					has_idea = mass_assault_corps_spirit
				}
				remove_ideas = mass_assault_corps_spirit
			}
			if = {
				limit = { has_idea = mass_assault_army_spirit }
				army_experience = 35
			}
			else = {
				add_ideas = mass_assault_army_spirit
			}

			add_to_variable = { SOV_the_red_army_experience_gain_army_unit_factor = 0.1 }
			add_to_variable = { SOV_the_red_army_training_time_factor = -0.3 }
			add_to_variable = { SOV_the_red_army_minimum_training_level = -0.3 }
			custom_effect_tooltip = SOV_army_reorganization_ns_tt
			
			add_doctrine_cost_reduction = {
				name = SOV_army_reorganization
				cost_reduction = 0.99
				uses = 1
				category = land_doctrine
			}
			add_doctrine_cost_reduction = {
				name = SOV_army_reorganization
				cost_reduction = 0.99
				uses = 1
				category = air_doctrine
			}
			add_doctrine_cost_reduction = {
				name = SOV_army_reorganization
				cost_reduction = 0.99
				uses = 1
				category = naval_doctrine
			}

			custom_effect_tooltip = recruiting_reserves_60
			country_event = sov_armor.817
			hidden_effect = {
				if = {
					limit = {
						has_country_flag = reserve_total_1
					}
					clr_country_flag = reserve_total_1
					set_country_flag = reserve_total_7
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_2
					}
					clr_country_flag = reserve_total_2
					set_country_flag = reserve_total_8
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_3
					}
					clr_country_flag = reserve_total_3
					set_country_flag = reserve_total_9
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_4
					}
					clr_country_flag = reserve_total_4
					set_country_flag = reserve_total_10
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_5
					}
					clr_country_flag = reserve_total_5
					set_country_flag = reserve_total_10
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_6
					}
					clr_country_flag = reserve_total_6
					set_country_flag = reserve_total_10
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_7
					}
					clr_country_flag = reserve_total_7
					set_country_flag = reserve_total_10
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_8
					}
					clr_country_flag = reserve_total_8
					set_country_flag = reserve_total_10
				}
				else_if = {
					limit = {
						has_country_flag = reserve_total_9
					}
					clr_country_flag = reserve_total_9
					set_country_flag = reserve_total_10
				}
				else = {
					set_country_flag = reserve_total_6
				}
			}
		}
	}
	focus = {
		id = SOV_war_heroes
		icon = GFX_focus_ETH_callout_to_the_world
		prerequisite = { focus = SOV_army_reorganization}
		x = 0
		y = 1
		relative_position_id = SOV_army_reorganization
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_INTERNAL_AFFAIRS
		}

		completion_reward = {
			add_ideas = SOV_war_heroes_ns
			add_to_variable = {
				var = SOV_Army_influence
				value = 1
			}
			SOV_political_instability_update_effect = yes
			if = {
				limit = {
					SOV_georgy_zhukov = {
						NOT = {
							has_character_flag = SOV_character_purged_flag
						}
						is_corps_commander = yes
					}
				}
				SOV_georgy_zhukov = {
					promote_leader = yes
				}
			}
			else = {
				random_army_leader = {
					limit = {
						NOT = {
							has_character_flag = SOV_potential_target_flag
						}
						is_corps_commander = yes
						NOT = {
							is_character = SOV_grigory_kulik
						}
						NOT = {
							is_character = SOV_semyon_timoshenko
						}
						NOT = {
							is_character = SOV_boris_shaposhnikov
						}
					}
					promote_leader = yes
				}
			}
			if = {
				limit = {
					SOV_grigory_kulik = {
						NOT = {
							has_character_flag = SOV_character_purged_flag
						}
						is_corps_commander = yes
					}
				}
				SOV_grigory_kulik = {
					promote_leader = yes
				}
			}
			else = {
				random_army_leader = {
					limit = {
						NOT = {
							has_character_flag = SOV_potential_target_flag
						}
						is_corps_commander = yes
						NOT = {
							is_character = SOV_georgy_zhukov
						}
						NOT = {
							is_character = SOV_semyon_timoshenko
						}
						NOT = {
							is_character = SOV_boris_shaposhnikov
						}
					}
					promote_leader = yes
				}
			}
			if = {
				limit = {
					SOV_semyon_timoshenko = {
						NOT = {
							has_character_flag = SOV_character_purged_flag
						}
						is_corps_commander = yes
					}
				}
				SOV_semyon_timoshenko = {
					promote_leader = yes
				}
			}
			else = {
				random_army_leader = {
					limit = {
						NOT = {
							has_character_flag = SOV_potential_target_flag
						}
						is_corps_commander = yes
						NOT = {
							is_character = SOV_georgy_zhukov
						}
						NOT = {
							is_character = SOV_grigory_kulik
						}
						NOT = {
							is_character = SOV_boris_shaposhnikov
						}
					}
					promote_leader = yes
				}
			}
			if = {
				limit = {
					SOV_boris_shaposhnikov = {
						NOT = {
							has_character_flag = SOV_character_purged_flag
						}
						is_corps_commander = yes
					}
				}
				SOV_boris_shaposhnikov = {
					promote_leader = yes
				}
			}
			else = {
				random_army_leader = {
					limit = {
						NOT = {
							has_character_flag = SOV_potential_target_flag
						}
						is_corps_commander = yes
						NOT = {
							is_character = SOV_georgy_zhukov
						}
						NOT = {
							is_character = SOV_grigory_kulik
						}
						NOT = {
							is_character = SOV_semyon_timoshenko
						}
					}
					promote_leader = yes
				}
			}
		}
	}

	### STAVKA ###
	focus = {
		id = SOV_form_the_stavka
		icon = GFX_goal_support_communism
		x = 0
		y = 1
		relative_position_id = SOV_war_heroes
		cost = 3
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 100
				has_war = yes
			}
		}
		available = {
			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}
		search_filters = {
			FOCUS_FILTER_EMERGENCY
		}

		select_effect = {
			activate_advisor = SOV_iosif_stalin
			###Industry relocation + scorched earth###
		}

		completion_reward = {
			#Tooltip purposes (Select Effect)
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				activate_advisor = SOV_iosif_stalin
			}
			custom_effect_tooltip = SOV_desperate_measures_decisions_unlocked_tt
			#(Complete Effect)
			custom_effect_tooltip = SOV_focus_complete_effect_tt
			add_ideas = SOV_stavka
			swap_ideas = {
				remove_idea = home_of_revolution
				add_idea = great_patriotic_war
			}
			if = {
				limit = {
					OR = {
						has_idea = disarmed_nation
						has_idea = volunteer_only
						has_idea = limited_conscription
					}
				}
				add_ideas = extensive_conscription
			}
			if = {
				limit = {
					OR = {
						has_idea = free_trade
						has_idea = export_focus
					}
				}
				add_ideas = limited_exports
			}
			if = {
				limit = {
					has_idea = tot_economic_mobilisation
				}
				add_political_power = 100
			}
			else = {
				add_ideas = tot_economic_mobilisation
			}
			hidden_effect = {
				add_to_variable = {
					var = SOV_Army_attitude
					value = 1
				}
				add_to_variable = {
					var = SOV_Army_influence
					value = -1
				}
				add_to_variable = {
					var = SOV_Commissars_influence
					value = 2
				}
				SOV_political_instability_update_effect = yes
			}

			add_tech_bonus = {
				name = SOV_form_the_stavka
				bonus = 1
				uses = 1
				technology = sov_mechanized_td_1
			}
		}
	}
	focus = {
		id = SOV_a_multiethnic_army
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = SOV_form_the_stavka }
		x = -2
		y = 1
		relative_position_id = SOV_form_the_stavka

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
		}

		bypass = {
		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT }
		available_if_capitulated = yes

		completion_reward = {
			add_stability = 0.05
			add_war_support = 0.1
			custom_effect_tooltip = SOV_a_multiethnic_army_tt
			add_to_variable = { SOV_the_red_army_conscription_factor = 0.05 }
		}
	}
	focus = {
		id = SOV_guards_mortars
		icon = GFX_focus_rocketry
		prerequisite = { focus = SOV_a_multiethnic_army }
		x = 1
		y = 1
		relative_position_id = SOV_a_multiethnic_army
		cost = 5
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				name = SOV_guards_mortars
				bonus = 2
				uses = 2
				technology = sov_mechanized_artillery_1
				technology = sov_mechanized_artillery_2
				technology = sov_mechanized_artillery_3
			}
			add_tech_bonus = {
				name = SOV_guards_mortars
				bonus = 0.5
				uses = 2
				category = rocketry
			}
			add_doctrine_cost_reduction = {
				name = SOV_guards_mortars
				cost_reduction = 0.99
				uses = 2
				category = cat_superior_firepower
			}
		}
	}
	focus = {
		id = SOV_guards_units
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = SOV_a_multiethnic_army }
		x = 0
		y = 2
		relative_position_id = SOV_a_multiethnic_army
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		available_if_capitulated = yes
		completion_reward = {
			add_tech_bonus = {
				name = SOV_guards
				bonus = 0.5
				uses = 3
				category = marine_tech
				category = para_tech
				category = mountaineers_tech
			}
			custom_effect_tooltip = SOV_guards_unit
			hidden_effect = {
				division_template = {
					name = "Guards Rifle Division"
					division_names_group = SOV_GRD_01
					regiments = {
						heavy_infantry = { x = 0 y = 0 }
						heavy_infantry = { x = 0 y = 1 }
						heavy_infantry = { x = 0 y = 2 }

						heavy_infantry = { x = 1 y = 0 }
						heavy_infantry = { x = 1 y = 1 }
						heavy_infantry = { x = 1 y = 2 }

						heavy_infantry = { x = 2 y = 0 }
						heavy_infantry = { x = 2 y = 1 }
						heavy_infantry = { x = 2 y = 2 }

						motorized_rocket_brigade = { x = 3 y = 0 }
						motorized_rocket_brigade = { x = 3 y = 1 }
						motorized_rocket_brigade = { x = 3 y = 2 }

						anti_air_brigade = { x = 4 y = 0 }
						anti_tank_brigade = { x = 4 y = 1 }
						anti_tank_brigade = { x = 4 y = 2 }
						anti_tank_brigade = { x = 4 y = 3 }

					}
					support = {
						engineer = { x = 0 y = 0 }
						rocket_artillery = { x = 0 y = 1 }
						horse_logistics_company = { x = 0 y = 2 }
						signal_company = { x = 0 y = 3 }

						recon = { x = 1 y = 0 }
						field_hospital = { x = 1 y = 1 }
						anti_air = { x = 1 y = 2 }
						anti_tank = { x = 1 y = 3 }
					}
				}
			}
		}
	}
	focus = {
		id = SOV_guards_armies
		icon = GFX_focus_generic_combined_arms
		prerequisite = { focus = SOV_guards_units }
		x = 0
		y = 1
		relative_position_id = SOV_guards_units
		cost = 5
		ai_will_do = {
			factor = 1
		}
		available = {
			has_country_flag = SOV_army_reform_3
		}
		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				name = SOV_guards_armies
				bonus = 0.5
				uses = 2
				category = heavy_infantry_weapons
				category = infantry_weapons
				category = cat_mechanized_equipment
			}
			add_doctrine_cost_reduction = {
				name = SOV_guards_armies
				cost_reduction = 0.99
				uses = 1
				category = cat_grand_battle_plan
			}
		}
	}
	focus = {
		id = SOV_positive_heroism
		icon = GFX_goal_generic_cavalry
		prerequisite = { focus = SOV_form_the_stavka }
		x = 2
		y = 1
		relative_position_id = SOV_form_the_stavka
		cost = 4
		available = {
		}
		search_filters = {
			FOCUS_FILTER_PROPAGANDA
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_political_power = 50
			custom_effect_tooltip = available_military_high_command
			show_ideas_tooltip = konstantin_rokossovsky
			custom_effect_tooltip = available_chief_of_army
			show_ideas_tooltip = georgy_zhukov
			custom_effect_tooltip = SOV_positive_heroism_tt
			hidden_effect = {
				add_to_variable = {
					var = SOV_Army_attitude
					value = 1
				}
				add_to_variable = {
					var = SOV_Army_influence
					value = 1
				}
				SOV_political_instability_update_effect = yes
			}
		}
	}

	focus = {
		id = SOV_experts_in_camouflage
		icon = GFX_goal_generic_position_armies
		prerequisite = { focus = SOV_positive_heroism }
		x = -1
		y = 1
		relative_position_id = SOV_positive_heroism
		cost = 3
		available = {
		}
		search_filters = {
		}

		completion_reward = {
			add_to_variable = {
				SOV_the_red_army_cas_damage_reduction = 0.05
			}
			add_to_variable = {
				SOV_the_red_army_enemy_army_bonus_air_superiority_factor = -0.05
			}
			add_to_variable = {
				SOV_the_red_army_dig_in_speed_factor = 0.05
			}
			custom_effect_tooltip = SOV_experts_in_camouflage_tt
		}
	}
	focus = {
		id = SOV_preserve_veteran_units
		icon = GFX_goal_panzerwaffe
		prerequisite = { focus = SOV_positive_heroism }
		x = 0
		y = 2
		relative_position_id = SOV_positive_heroism
		cost = 3

		available = {
		}
		search_filters = {
			FOCUS_FILTER_XP
		}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_army_org_factor = 0.05 }
			add_to_variable = { SOV_the_red_army_experience_gain_army_unit_factor = 0.2 }
			add_to_variable = { SOV_the_red_army_experience_loss_factor = -0.15 }
			custom_effect_tooltip = SOV_cohesion_first_tt
			add_doctrine_cost_reduction = {
				name = SOV_preserve_veteran_units
				cost_reduction = 0.99
				uses = 1
				category = cat_grand_battle_plan
			}
		}
	}
	focus = {
		id = SOV_the_road_of_life
		icon = GFX_focus_SOV_the_road_of_life
		prerequisite = { focus = SOV_preserve_veteran_units }
		x = 0
		y = 1
		relative_position_id = SOV_preserve_veteran_units
		cost = 3
		available = {
		}
		ai_will_do = {
			factor = 100
		}
		search_filters = {
			FOCUS_FILTER_EMERGENCY
		}
		completion_reward = {
			unlock_decision_tooltip = SOV_the_road_of_life
		}
	}

	focus = {
		id = SOV_rebuild_the_army
		icon = GFX_goal_generic_commit_to_the_war
		prerequisite = { focus = SOV_form_the_stavka }
		relative_position_id = SOV_form_the_stavka		
		x = 0
		y = 1

		cost = 2

		ai_will_do = {
			factor = 1
		}

		available = {
			OR = {
				has_country_flag = SOV_army_reform_2
				casualties_k > 1500
			}
		}
		available_if_capitulated = yes

		search_filters = { FOCUS_FILTER_EMERGENCY }

		completion_reward = {
			custom_effect_tooltip = SOV_rebuild_the_army_tt
			add_timed_idea = {
				idea = army_rebuilding
				days = 365
			}
			add_to_variable = { SOV_the_red_army_minimum_training_level = -0.2 }
			hidden_effect = {
				division_template = {
					name = "Prizyvnaya diviziya"
					division_names_group = SOV_INF_01
					obsolete = yes
					division_cap = 240
					regiments = {
						heavy_infantry = { x = 0 y = 0 }
						heavy_infantry = { x = 0 y = 1 }
						heavy_infantry = { x = 0 y = 2 }

						heavy_infantry = { x = 1 y = 0 }
						heavy_infantry = { x = 1 y = 1 }
						heavy_infantry = { x = 1 y = 2 }

						heavy_infantry = { x = 2 y = 0 }
						heavy_infantry = { x = 2 y = 1 }
						heavy_infantry = { x = 2 y = 2 }
					}
					support = {
						normal_engineer = { x = 0 y = 0 }
						horse_logistics_company = { x = 0 y = 1 }
						artillery = { x = 0 y = 2 }

						recon = { x = 1 y = 0 }
						horse_field_hospital = { x = 1 y = 1 }
					}
				}
			}
		}
	}
	focus = {
		id = SOV_disband_the_cavalry_army_clique
		icon = GFX_goal_SOV_cavalry_army_clique
		prerequisite = { focus = SOV_rebuild_the_army }
		x = 0
		y = 2
		relative_position_id = SOV_rebuild_the_army
		cost = 3
		ai_will_do = {
			factor = 1
		}
		bypass = {
			NOT = {
				has_idea = cavalry_army_clique
				has_idea = cavalry_army_clique_2
				has_idea = cavalry_army_clique_3
			}
		}
		available = {
			has_country_flag = SOV_army_reform_2
		}
		available_if_capitulated = yes

		completion_reward = {
			retire_character = SOV_kliment_voroshilov
			retire_character = SOV_grigory_kulik
			if = {
				limit = {
					has_idea = cavalry_army_clique_3
				}
				remove_ideas = cavalry_army_clique_3
			}
			if = {
				limit = {
					has_idea = cavalry_army_clique_2
				}
				remove_ideas = cavalry_army_clique_2
			}
			else_if = {
				limit = {
					has_idea = cavalry_army_clique
				}
				remove_ideas = cavalry_army_clique
			}
		}
	}
	focus = {
		id = SOV_swap_to_political_advisors
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = SOV_disband_the_cavalry_army_clique }
		x = 0
		y = 1
		relative_position_id = SOV_disband_the_cavalry_army_clique
		cost = 4

		available = {
		}
		bypass = {
			has_completed_focus = SOV_depoliticize_the_military
		}
		search_filters = {
			
		}

		completion_reward = {
			if = {
				limit = {
					has_idea = SOV_politicized_military_keep
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military_keep
					add_idea = SOV_politicized_military_swap
				}
			}
			else_if = {
				limit = {
					has_idea = SOV_politicized_military_keep_humanism
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military_keep_humanism
					add_idea = SOV_politicized_military_swap_humanism
				}
			}
			else = {
				#To prevent the ugly "No current effects" tooltip if other focus taken
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SOV_politicized_military
						add_idea = SOV_politicized_military_swap
					}
				}
			}
		}
	}
	######################
	### Army Doctrines ###
	######################
	focus = {
		id = SOV_cult_of_the_offensive
		icon = GFX_goal_tfv_saf_anti_colonialist_crusade
		prerequisite = { focus = SOV_pc_of_defence }
		relative_position_id = SOV_pc_of_defence
		x = -3
		y = 1

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SOV_cult_of_the_offensive_tt
			add_to_variable = { SOV_the_red_army_army_defence_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_army_org_regain = 0.05 }
			add_to_variable = { SOV_the_red_army_land_reinforce_rate = 0.05 }
			add_to_variable = { SOV_the_red_army_army_attack_factor = 0.05 }

			add_doctrine_cost_reduction = {
				cost_reduction = 0.99
				name = SOV_cult_of_the_offensive
				category = cat_grand_battle_plan
			}
		}
	}
	focus = {
		id = SOV_concentrated_artillery
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = SOV_cult_of_the_offensive }
		relative_position_id = SOV_cult_of_the_offensive
		x = 0
		y = 2

		cost = 4

		ai_will_do = {
			factor = 1
		}

		available = { }
		search_filters = { FOCUS_FILTER_ARMY_XP }
		available_if_capitulated = yes

		completion_reward = {
			army_experience = 25
			add_doctrine_cost_reduction = {
				name = SOV_concentrated_artillery
				cost_reduction = 0.99
				uses = 1
				category = cat_superior_firepower
			}
		}
	}
	focus = {
		id = SOV_attempt_combined_arms
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = SOV_concentrated_artillery }
		relative_position_id = SOV_concentrated_artillery
		x = 0
		y = 2

		cost = 4

		ai_will_do = {
			factor = 1
		}

		available = { has_country_flag = SOV_army_reform_1 }
		available_if_capitulated = yes

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = SOV_attempt_combined_arms
				cost_reduction = 0.99
				uses = 1
				category = cat_grand_battle_plan
			}
			add_doctrine_cost_reduction = {
				name = SOV_attempt_combined_arms
				cost_reduction = 0.99
				uses = 1
				category = cat_superior_firepower
			}
		}
	}
	focus = {
		id = SOV_Shock_armies
		icon = GFX_focus_generic_combined_arms
		prerequisite = { focus = SOV_attempt_combined_arms
		}
		x = 0
		y = 2
		relative_position_id = SOV_attempt_combined_arms
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes

		completion_reward = {
			set_technology = {
				shock_armies = 1
			}
			add_doctrine_cost_reduction = {
				name = SOV_Shock_armies
				cost_reduction = 0.99
				uses = 1
				category = cat_superior_firepower
			}
			add_doctrine_cost_reduction = {
				name = SOV_Shock_armies
				cost_reduction = 0.99
				uses = 1
				category = cat_grand_battle_plan
			}
		}
	}
	focus = {
		id = SOV_adapt_to_enemy_tactics
		icon = GFX_goal_generic_position_armies
		prerequisite = { focus = SOV_Shock_armies }
		prerequisite = { focus = SOV_form_the_stavka }
		x = -4
		y = 1
		relative_position_id = SOV_form_the_stavka
		cost = 3
		ai_will_do = {
			factor = 1
		}

		available = {
			has_country_flag = SOV_army_reform_2
		}
		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SOV_adapt_to_enemy_tactics_tt
			add_to_variable = { SOV_the_red_army_army_defence_factor = 0.1 }
			add_to_variable = { SOV_the_red_army_training_time_factor = -0.1 }
		}
	}

	focus = {
		id = SOV_tank_armies
		icon = GFX_goal_SOV_perfecting_of_the_armour_core
		prerequisite = { focus = SOV_adapt_to_enemy_tactics }
		x = 0
		y = 1
		relative_position_id = SOV_adapt_to_enemy_tactics
		cost = 3
		ai_will_do = {
			factor = 1
		}

		available = {
		}
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}

		completion_reward = {
			army_experience = 25
			if = {
				limit = {
					is_ai = no
				}
				custom_effect_tooltip = SOV_tank_armies_tt
				hidden_effect = {
					division_template = {
						name = "Tankovaya Korpus"
						division_names_group = SOV_ARM_02
						priority = 1
						regiments = {
							medium_armor = { x = 0 y = 0 }
							medium_armor = { x = 0 y = 1 }
							medium_armor = { x = 0 y = 2 }
							medium_armor = { x = 0 y = 3 }

							medium_armor = { x = 1 y = 0 }
							medium_armor = { x = 1 y = 1 }
							medium_armor = { x = 1 y = 2 }
							medium_armor = { x = 1 y = 3 }

							light_assault_brigade = { x = 2 y = 0 }
							light_assault_brigade = { x = 2 y = 1 }

							motorized = { x = 3 y = 0 }
							motorized = { x = 3 y = 1 }
							motorized = { x = 3 y = 2 }

							motorized = { x = 4 y = 0 }
							motorized = { x = 4 y = 1 }
							motorized_rocket_brigade = { x = 4 y = 2 }
							motorized_rocket_brigade = { x = 4 y = 3 }
						}
						support = {
							engineer = { x = 0 y = 0 }
							motorized_logistics_company = { x = 0 y = 1 }
							mot_maintenance_company = { x = 0 y = 2 }
							signal_company = { x = 0 y = 3 }

							armoured_recon = { x = 1 y = 0 }
						}
					}
					division_template = {
						name = "Gvds. Tankovaya Korpus"
						division_names_group = SOV_GTC_01
						priority = 1
						regiments = {
							heavy_armor = { x = 0 y = 0 }
							heavy_armor = { x = 0 y = 1 }
							heavy_armor = { x = 0 y = 2 }

							heavy_armor = { x = 1 y = 0 }
							heavy_armor = { x = 1 y = 1 }
							heavy_armor = { x = 1 y = 2 }

							light_assault_brigade = { x = 2 y = 0 }
							light_assault_brigade = { x = 2 y = 1 }

							motorized = { x = 3 y = 0 }
							motorized = { x = 3 y = 1 }
							motorized = { x = 3 y = 2 }

							motorized = { x = 4 y = 0 }
							motorized = { x = 4 y = 1 }
							motorized_rocket_brigade = { x = 4 y = 2 }
							motorized_rocket_brigade = { x = 4 y = 3 }
						}
						support = {
							engineer = { x = 0 y = 0 }
							motorized_logistics_company = { x = 0 y = 1 }
							mot_maintenance_company = { x = 0 y = 2 }
							signal_company = { x = 0 y = 3 }

							armoured_recon = { x = 1 y = 0 }
						}
					}
				}
			}
			add_doctrine_cost_reduction = {
				name = SOV_tank_armies
				cost_reduction = 0.99
				uses = 1
				category = cat_mobile_warfare
			}
			add_to_variable = { SOV_the_red_army_army_armor_attack_factor = 0.1 }
			add_to_variable = { SOV_the_red_army_army_armor_defence_factor = 0.1 }
		}
	}
	focus = {
		id = SOV_deep_battle
		icon = GFX_focus_generic_support_the_left_right
		prerequisite = { focus = SOV_tank_armies }
		x = 0
		y = 1
		relative_position_id = SOV_tank_armies
		cost = 5
		ai_will_do = {
			factor = 1
		}
		available = {
			has_country_flag = SOV_army_reform_3
		}
		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SOV_deep_battle_tt
			add_to_variable = { SOV_the_red_army_breakthrough_factor = 0.1 }
			add_to_variable = { SOV_the_red_army_army_armor_speed_factor = 0.15 }
			set_technology = {
				deep_battle = 1
			}
			add_doctrine_cost_reduction = {
				name = SOV_deep_battle
				cost_reduction = 0.99
				uses = 2
				category = cat_mobile_warfare
			}
		}
	}
	focus = {
		id = SOV_offensive_juggernaut
		icon = GFX_goal_SOV_perfecting_of_the_infantry_core
		prerequisite = { focus = SOV_deep_battle }
		x = 0
		y = 1
		relative_position_id = SOV_deep_battle
		cost = 5
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = SOV_offensive_juggernaut
				cost_reduction = 0.99
				uses = 2
				category = cat_mobile_warfare
				category = cat_superior_firepower
			}
		}
	}
	###
	focus = {
		id = SOV_modernization_of_the_rifle_corps
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = SOV_pc_of_defence }
		x = 3
		y = 1
		relative_position_id = SOV_pc_of_defence
		cost = 4
		ai_will_do = {
			factor = 1
		}

		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_modernization_of_the_rifle_corps
				bonus = 0.5
				uses = 1
				category = infantry_weapons
			}
			add_tech_bonus = {
				name = SOV_modernization_of_the_rifle_corps
				bonus = 0.5
				uses = 3
				category = support_tech
			}
		}
	}
	focus = {
		id = SOV_mechanization_of_the_red_army
		icon = GFX_goal_generic_research_tanks
		prerequisite = { focus = SOV_modernization_of_the_rifle_corps }
		x = 0
		y = 2
		relative_position_id = SOV_modernization_of_the_rifle_corps
		cost = 3
		ai_will_do = {
			factor = 1
		}

		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_modernization_of_the_rifle_corps
				bonus = 0.5
				uses = 1
				category = cat_medium_armor
			}
			add_tech_bonus = {
				name = SOV_modernization_of_the_rifle_corps
				bonus = 0.5
				uses = 2
				category = cat_light_armor
			}
		}
	}
	focus = {
		id = SOV_god_of_war
		icon = GFX_goal_generic_research_artillery
		prerequisite = { focus = SOV_mechanization_of_the_red_army }
		x = 0
		y = 2
		relative_position_id = SOV_mechanization_of_the_red_army
		cost = 3
		ai_will_do = {
			factor = 1
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			custom_effect_tooltip = SOV_god_of_war_tt
			add_to_variable = { SOV_the_red_army_army_artillery_attack_factor = 0.15 }
			add_tech_bonus = {
				name = SOV_modernization_of_the_rifle_corps
				bonus = 0.5
				uses = 2
				category = artillery
			}
		}
	}

	focus = {
		id = SOV_heavy_weapons_modernization
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = SOV_god_of_war }
		x = 0
		y = 2
		relative_position_id = SOV_god_of_war
		cost = 3
		ai_will_do = {
			factor = 1
		}

		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_modernization_of_the_rifle_corps
				bonus = 0.5
				uses = 2
				category = heavy_infantry_weapons
			}
			add_tech_bonus = {
				name = SOV_modernization_of_the_rifle_corps
				bonus = 0.5
				uses = 2
				category = cat_anti_air
			}
			add_tech_bonus = {
				name = SOV_modernization_of_the_rifle_corps
				bonus = 0.5
				uses = 1
				category = cat_anti_tank
			}
		}
	}

	focus = {
		id = SOV_zis
		icon = GFX_goal_generic_artillery
		prerequisite = { focus = SOV_heavy_weapons_modernization focus = SOV_form_the_stavka }
		x = 4
		y = 1
		relative_position_id = SOV_form_the_stavka
		cost = 4
		ai_will_do = {
			factor = 1
		}

		available = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = SOV_has_not_officers_purged_tt
					NOT = {
						has_idea = officers_purged
					}
					NOT = {
						has_idea = officers_purged_2
					}
					NOT = {
						has_idea = officers_purged_3
					}
					NOT = {
						has_idea = officers_purged_4
					}
					NOT = {
						has_idea = officers_purged_5
					}
					NOT = {
						has_idea = officers_purged_6
					}
					NOT = {
						has_idea = officers_purged_7
					}
					NOT = {
						has_idea = officers_purged_8
					}
					NOT = {
						has_idea = officers_purged_9
					}
					NOT = {
						has_idea = officers_purged_10
					}
				}
				has_idea = SOV_stavka
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			set_technology = {
				sov_anti_tank_3 = 1
				sov_artillery_3 = 1
			}
			252 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = arms_factory
					level = 5
					instant_build = yes
				}
			}

			add_equipment_production = {
				equipment = {
					type = sov_at_3
					creator = "SOV"
				}
				requested_factories = 15
				progress = 0
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = sov_art_3
					creator = "SOV"
				}
				requested_factories = 15
				progress = 0
				efficiency = 100
			}
		}
	}
	focus = {
		id = SOV_assault_guns
		icon = GFX_goal_SOV_assault
		mutually_exclusive = { focus = SOV_self_propelled_artillery }
		prerequisite = { focus = SOV_zis }
		x = -1
		y = 1
		relative_position_id = SOV_zis
		cost = 5
		ai_will_do = {
			factor = 1
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		
		completion_reward = {
			add_tech_bonus = {
				name = SOV_assault_guns
				bonus = 0.5
				uses = 2
				technology = sov_heavy_spg_2
				technology = sov_light_spg_5
				technology = sov_medium_spg_3
				technology = sov_heavy_spg_6
				technology = sov_heavy_spg_7
			}
		}
	}
	focus = {
		id = SOV_self_propelled_artillery
		icon = GFX_goal_SOV_spg
		mutually_exclusive = { focus = SOV_assault_guns }
		prerequisite = { focus = SOV_zis }
		x = 1
		y = 1
		relative_position_id = SOV_zis
		cost = 5
		ai_will_do = {
			factor = 1
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_self_propelled_artillery
				bonus = 0.5
				uses = 2
				technology = sov_heavy_spg_3
				technology = sov_heavy_spg_4
			}
		}
	}
	focus = {
		id = SOV_breakthrough_tanks
		icon = GFX_goal_SOV_perfecting_of_the_armour_core
		prerequisite = { focus = SOV_assault_guns focus = SOV_self_propelled_artillery }
		x = 1
		y = 1
		relative_position_id = SOV_assault_guns
		cost = 5
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		
		completion_reward = {
			add_tech_bonus = {
				name = SOV_breakthrough_tanks
				bonus = 0.5
				uses = 2
				category = cat_heavy_armor
			}
		}
	}
	focus = {
		id = SOV_ultimate_tank_evolution
		icon = GFX_goal_generic_research_tanks
		prerequisite = { focus = SOV_breakthrough_tanks }
		x = 0
		y = 1
		relative_position_id = SOV_breakthrough_tanks
		cost = 8
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		
		completion_reward = {
			add_tech_bonus = {
				name = SOV_ultimate_tank_evolution
				bonus = 0.5
				uses = 2
				technology = sov_modern_tank_chassis_1_2
				technology = sov_modern_tank_chassis_2
				technology = sov_modern_tank_chassis_2_2
			}
		}
	}

	############## AIR BRANCH ###############

	focus = {
		id = SOV_establish_air_armies
		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = SOV_pc_of_defence }
		relative_position_id = SOV_pc_of_defence
		x = -6
		y = 1

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
		}

		bypass = {
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
		available_if_capitulated = no

		completion_reward = {
			add_tech_bonus = {
				name = SOV_establish_air_armies
				bonus = 0.5
				uses = 1
				category = cat_strategic_bomber
			}
			add_tech_bonus = {
				name = SOV_establish_air_armies
				bonus = 0.5
				uses = 1
				category = tactical_bomber
			}
			195 = {
				add_building_construction = {
					type = air_base
					level = 7
					instant_build = yes
				}
			}
			217 = {
				add_building_construction = {
					type = air_base
					level = 4
					instant_build = yes
				}
			}
			254 = {
				add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
			198 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			206 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			192 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SOV_transpolar_flights
		icon = GFX_goal_generic_heavy_bomber
		prerequisite = { focus = SOV_establish_air_armies }
		x = -2
		y = 1
		relative_position_id = SOV_establish_air_armies
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
			FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			add_stability = 0.1
			air_experience = 25

			custom_effect_tooltip = SOV_transpolar_flights_tt
			add_to_variable = {
				SOV_soviet_airforce_air_weather_penalty = -0.1
			}
			add_tech_bonus = {
				name = SOV_transpolar_flights
				bonus = 0.5
				uses = 1
				category = tactical_bomber
			}
			add_tech_bonus = {
				name = SOV_transpolar_flights
				bonus = 0.5
				uses = 1
				category = patrol_bomber
			}
		}
	}
	focus = {
		id = SOV_foster_flying_clubs
		icon = GFX_focus_SOV_flying_clubs
		prerequisite = { focus = SOV_transpolar_flights }
		x = 0
		y = 2
		relative_position_id = SOV_transpolar_flights
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
		}
		completion_reward = {
			air_experience = 25

			add_to_variable = {
				SOV_soviet_airforce_air_accidents_factor = -0.25
			}
			add_to_variable = {
				SOV_soviet_airforce_air_ace_generation_chance_factor = 0.25
			}
			add_to_variable = {
				SOV_soviet_airforce_air_training_xp_gain_factor = 0.05
			}
			custom_effect_tooltip = SOV_foster_flying_clubs_tt
		}
	}
	focus = {
		id = SOV_vdv
		icon = GFX_focus_generic_paratrooper
		prerequisite = { focus = SOV_reform_the_airforce }
		prerequisite = { focus = SOV_foster_flying_clubs }
		x = 0
		y = 3
		relative_position_id = SOV_foster_flying_clubs
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		completion_reward = {
			add_tech_bonus = {
				name = SOV_vdv
				bonus = 0.5
				uses = 1
				category = para_tech
			}
			custom_effect_tooltip = SOV_create_unit_vdv_tt
			hidden_effect = {
				division_template = {
					name = "Vozdushno-Desantnaya Diviziya"				#3x Airborne Brigades
					division_names_group = SOV_PAR_01
					regiments = {
						paratrooper = { x = 0 y = 0 }
						paratrooper = { x = 0 y = 1 }
						paratrooper = { x = 0 y = 2 }

						paratrooper = { x = 1 y = 0 }
						paratrooper = { x = 1 y = 1 }
						paratrooper = { x = 1 y = 2 }

						paratrooper = { x = 2 y = 0 }
						paratrooper = { x = 2 y = 1 }
						paratrooper = { x = 2 y = 2 }
					}
					support = {
						recon = { x = 0 y = 0 }
						signal_company = { x = 0 y = 1 }
						field_hospital = { x = 0 y = 2 }
						normal_engineer = { x = 0 y = 3 }
					}
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"1ya Vozdushno-Desantnaya Korpus\" division_template = \"Vozdushno-Desantnaya Diviziya\" start_experience_factor = 0.7 start_equipment_factor = 0.1"
					owner = ROOT
					count = 5
				}
			}
		}
	}
	focus = {
		id = SOV_expand_the_aircraft_industry
		icon = GFX_goal_generic_license_planes
		prerequisite = { focus = SOV_establish_air_armies }
		x = 0
		y = 1
		relative_position_id = SOV_establish_air_armies
		cost = 3
		available = {
			any_owned_state = {
				is_fully_controlled_by = ROOT
				free_building_slots = {
					building = arms_factory
					size > 1
					include_locked = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			add_to_variable = {
				SOV_soviet_airforce_aircraft_manufacturer_cost_factor = -0.20
			}
			#This handles the equipment bonus that's not supported by dynamic modifiers
			add_ideas = SOV_expanded_aircraft_industry_bonus
			custom_effect_tooltip = SOV_expand_the_aircraft_industry_ns_tt
			random_owned_controlled_state = {
				limit = {
					region = 271
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				if = {
					limit = {
						air_base < 5
					}
					add_building_construction = {
						type = air_base
						level = 1
						instant_build = yes
					}
				}
				else = {
					ROOT = {
						random_owned_controlled_state = {
							limit = {
								air_base < 5
							}
							add_building_construction = {
								type = air_base
								level = 1
								instant_build = yes
							}
						}
					}
				}
			}
		}
	}
	focus = {
		id = SOV_innovative_fighters
		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = SOV_expand_the_aircraft_industry }
		relative_position_id = SOV_expand_the_aircraft_industry
		x = 0
		y = 2
		cost = 4
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_innovative_fighters
				bonus = 0.5
				uses = 2
				technology = sov_fighter_multirole_2
				technology = sov_fighter_multirole_3
				technology = sov_fighter_multirole_4
			}
		}
	}
	focus = {
		id = SOV_reform_the_airforce
		icon = GFX_goal_generic_air_doctrine
		prerequisite = { focus = SOV_innovative_fighters }
		prerequisite = { focus = SOV_lessons_of_war }
		x = 0
		y = 4
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
		}
		completion_reward = {
			#unlocks first reform
			custom_effect_tooltip = SOV_reform_the_airforce_tt
			custom_effect_tooltip = SOV_airforce_xp_tt
			add_to_variable = { SOV_soviet_airforce_air_training_xp_gain_factor = 0.05 }
			add_to_variable = { SOV_soviet_airforce_experience_gain_air_factor = 0.1 }
			add_to_variable = { SOV_soviet_airforce_air_attack_factor = 0.1 }
			add_to_variable = { SOV_soviet_airforce_air_agility_factor = 0.05 }
		}
	}
	focus = {
		id = SOV_long_range_bomber_aviation
		icon = GFX_goal_generic_heavy_bomber
		prerequisite = { focus = SOV_reform_the_airforce }
		x = 0
		y = 2
		relative_position_id = SOV_reform_the_airforce
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_long_range_bomber_aviation
				bonus = 0.5
				uses = 1
				category = tactical_bomber
				category = cat_strategic_bomber
			}
			add_doctrine_cost_reduction = {
				name = SOV_long_range_bomber_aviation
				cost_reduction = 0.99
				uses = 1
				category = cat_strategic_destruction
			}
			custom_effect_tooltip = SOV_long_range_bomber_aviation_tt
			add_to_variable = { SOV_soviet_airforce_air_cas_present_factor = 0.1 }
		}
	}

	focus = {
		id = SOV_utilise_the_civil_air_fleet
		icon = GFX_focus_SOV_flying_clubs
		prerequisite = { focus = SOV_long_range_bomber_aviation }
		prerequisite = { focus = SOV_form_the_stavka }
		x = -7
		y = 1
		relative_position_id = SOV_form_the_stavka
		cost = 2

		available = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = SOV_has_not_officers_purged_tt
					NOT = {
						has_idea = officers_purged
					}
					NOT = {
						has_idea = officers_purged_2
					}
					NOT = {
						has_idea = officers_purged_3
					}
					NOT = {
						has_idea = officers_purged_4
					}
					NOT = {
						has_idea = officers_purged_5
					}
					NOT = {
						has_idea = officers_purged_6
					}
					NOT = {
						has_idea = officers_purged_7
					}
					NOT = {
						has_idea = officers_purged_8
					}
					NOT = {
						has_idea = officers_purged_9
					}
					NOT = {
						has_idea = officers_purged_10
					}
				}
				has_idea = SOV_stavka
			}
		}
		search_filters = {
			FOCUS_FILTER_EMERGENCY
			FOCUS_FILTER_AIR_XP
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_long_range_bomber_aviation
				bonus = 0.5
				uses = 1
				category = cat_transport
			}
			add_equipment_to_stockpile = {
				type = sov_transport_plane_equipment_1
				amount = 100
			}
			custom_effect_tooltip = SOV_airforce_xp_tt
			add_to_variable = { SOV_soviet_airforce_air_training_xp_gain_factor = 0.05 }
			add_to_variable = { SOV_soviet_airforce_experience_gain_air_factor = 0.1 }
			add_to_variable = { SOV_soviet_airforce_air_agility_factor = 0.05 }
		}
	}

	focus = {
		id = SOV_intensify_pilot_training_program
		icon = GFX_goal_generic_air_doctrine
		prerequisite = { focus = SOV_utilise_the_civil_air_fleet }
		x = -3
		y = 1
		relative_position_id = SOV_utilise_the_civil_air_fleet
		cost = 5
		available = {
			
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
		}
		completion_reward = {
			add_to_variable = {
				SOV_soviet_airforce_air_accidents_factor = -0.25
			}
			add_to_variable = {
				SOV_soviet_airforce_air_wing_xp_loss_when_killed_factor = -0.1
			}
			add_to_variable = {
				SOV_soviet_airforce_air_training_xp_gain_factor = 0.05
			}
			custom_effect_tooltip = SOV_intensify_pilot_training_program_tt
		}
	}
	focus = {
		id = SOV_women_in_aviation
		icon = GFX_focus_SOV_women_in_aviation
		prerequisite = { focus = SOV_intensify_pilot_training_program }
		x = 0
		y = 1
		relative_position_id = SOV_intensify_pilot_training_program
		cost = 4
		available = {
			
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
		}
		completion_reward = {
			add_to_variable = {
				SOV_soviet_airforce_air_mission_xp_gain_factor = 0.05
			}
			add_to_variable = {
				SOV_soviet_airforce_air_training_xp_gain_factor = 0.05
			}
			custom_effect_tooltip = SOV_women_in_aviation_tt
			air_experience = 25
			set_rule = {
				can_generate_female_aces = yes
			}
		}
	}
	focus = {
		id = SOV_raskovas_aviation_group
		icon = GFX_goal_generic_CAS
		prerequisite = { focus = SOV_women_in_aviation
		}
		x = 0
		y = 1
		relative_position_id = SOV_women_in_aviation
		cost = 3
		available = {
			any_enemy_country = {
				SOV_is_major_not_original_sov = yes
			}
			has_full_control_of_state = 252
			has_tech = sov_cas_1
			has_tech = sov_strike_bomber_3
			has_tech = sov_fighter_3
		}
		completion_reward = {
			#custom_effect_tooltip = SOV_raskovas_aviation_group_tt
			custom_effect_tooltip = SOV_night_witches_nsb_tt
			hidden_effect = {
				if = {
					#ALT IDEOLOGY
					limit = {
						NOT = {
							has_government = communism
						}
					}
					load_oob = "SOV_night_witches_alt"
				}
				else = {
					#DEFAULT COMMUNISM
					load_oob = "SOV_night_witches"
				}
			}
		}
	}
	focus = {
		id = SOV_ground_support
		icon = GFX_goal_generic_CAS
		prerequisite = { focus = SOV_utilise_the_civil_air_fleet }
		x = -1
		y = 1
		relative_position_id = SOV_utilise_the_civil_air_fleet
		cost = 4
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_ground_support
				bonus = 0.5
				uses = 2
				technology = sov_cas_3
				technology = sov_cas_4
				technology = sov_cas_5
			}
			add_doctrine_cost_reduction = {
				name = SOV_ground_support
				cost_reduction = 0.99
				uses = 2
				category = cat_battlefield_support
			}
		}
	}
	focus = {
		id = SOV_modern_fighter_designs
		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = SOV_utilise_the_civil_air_fleet }
		x = 1
		y = 1
		relative_position_id = SOV_utilise_the_civil_air_fleet
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		search_filters = {
			FOCUS_FILTER_AIR_XP
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_modern_fighter_designs
				bonus = 0.5
				uses = 2
				category = light_fighter
			}
			air_experience = 25
		}
	}
	focus = {
		id = SOV_long_range_aviation
		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = SOV_modern_fighter_designs focus = SOV_ground_support }
		x = -1
		y = 1
		relative_position_id = SOV_modern_fighter_designs
		cost = 4
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_long_range_aviation
				bonus = 0.5
				uses = 2
				category = cat_heavy_fighter
				category = tactical_bomber
				category = cat_strategic_bomber
			}
			add_doctrine_cost_reduction = {
				name = SOV_long_range_aviation
				cost_reduction = 0.99
				uses = 2
				category = cat_strategic_destruction
			}
		}
	}
	focus = {
		id = SOV_leaders_of_aviation
		icon = GFX_goal_SOV_mig_15
		prerequisite = { focus = SOV_long_range_aviation }
		relative_position_id = SOV_long_range_aviation
		x = 0
		y = 1

		cost = 8

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				name = SOV_leaders_of_aviation
				bonus = 0.5
				uses = 2
				technology = sov_jet_fighter_1
				technology = sov_jet_fighter_2
				technology = sov_jet_fighter_3
			}
		}
	}

	############## NAVY BRANCH ###############

	focus = {
		id = SOV_pc_of_the_ussr_navy
		icon = GFX_goal_generic_navy_cruiser
		prerequisite = { focus = SOV_pc_of_defence }
		x = 7
		y = 1
		relative_position_id = SOV_pc_of_defence
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_NAVY_XP
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			navy_experience = 10
			if = {
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = SOV_pc_of_the_ussr_navy
					bonus = 0.5
					uses = 2
					category = ship_modules_tech
				}
			}
			else = {
				add_tech_bonus = {
					name = SOV_pc_of_the_ussr_navy
					bonus = 0.5
					uses = 2
					category = ship_modules_tech
				}
			}
		}
	}
	## Bases ##
	focus = {
		id = SOV_establish_the_northern_fleet
		icon = GFX_focus_SOV_reinforce_northern_naval_bases
		prerequisite = { focus = SOV_pc_of_the_ussr_navy }
		x = 0
		y = 1
		relative_position_id = SOV_pc_of_the_ussr_navy
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available = {
			OR = {
				213 = {
					#MURMANSK
					is_owned_and_controlled_by = ROOT
				}
				214 = {
					#ARKHANGELSK
					is_owned_and_controlled_by = ROOT
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			if = {
				#MURMANSK
				limit = {
					has_full_control_of_state = 213
				}
				213 = {
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 3134
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 3134
					}
					add_building_construction = {
						type = bunker
						level = 2
						instant_build = yes
						province = 3134
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = {
				#ARKHANGELSK
				limit = {
					has_full_control_of_state = 214
				}
				214 = {
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 3338
					}
					add_building_construction = {
						type = naval_base
						level = 1
						instant_build = yes
						province = 312
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 3338
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 312
					}
					add_building_construction = {
						type = bunker
						level = 2
						instant_build = yes
						province = 3338
					}
					add_building_construction = {
						type = supply_node
						level = 1
						instant_build = yes
						province = 3338
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
		}
	}
	focus = {
		id = SOV_reinforce_southern_naval_bases
		icon = GFX_focus_SOV_reinforce_southern_naval_bases
		prerequisite = { focus = SOV_establish_the_northern_fleet }
		x = 0
		y = 2
		relative_position_id = SOV_establish_the_northern_fleet
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available = {
			OR = {
				192 = {
					#ODESSA
					is_owned_and_controlled_by = ROOT
				}
				137 = {
					#CRIMEA
					is_owned_and_controlled_by = ROOT
				}
				218 = {
					#ROSTOV
					is_owned_and_controlled_by = ROOT
				}
				234 = {
					#KRASNODAR
					is_owned_and_controlled_by = ROOT
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			if = {
				#ODESSA - Improved naval base + AA + coastal and land fort
				limit = {
					has_full_control_of_state = 192
				}
				192 = {
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 11670
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 11670
					}
					add_building_construction = {
						type = bunker
						level = 4
						instant_build = yes
						province = 11670
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = {
				#SEVASTOPOL (CRIMEA) - Extra AA + coastal fort
				limit = {
					has_full_control_of_state = 137
				}
				137 = {
					add_building_construction = {
						type = naval_base
						level = 3
						instant_build = yes
						province = 3686
					}
					add_building_construction = {
						type = anti_air_building
						level = 7
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 6
						instant_build = yes
						province = 3686
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						instant_build = yes
						province = 3686
					}
					add_building_construction = {
						type = air_base
						level = 3
						instant_build = yes
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
					add_dynamic_modifier = {
						modifier = SOV_armored_battery_35
						scope = SOV
					}
				}
			}
			if = {
				#ROSTOV - Improved naval base + AA 
				limit = {
					has_full_control_of_state = 218
				}
				218 = {
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 9417
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = {
				#KRASNODAR - Improved naval base + AA + coastal fort
				limit = {
					has_full_control_of_state = 234
				}
				234 = {
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 3
						instant_build = yes
						province = 719
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 719
					}
					add_building_construction = {
						type = bunker
						level = 2
						instant_build = yes
						province = 719
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
		}
	}
	focus = {
		id = SOV_reinforce_western_naval_bases
		icon = GFX_focus_SOV_reinforce_western_naval_bases
		prerequisite = { focus = SOV_reinforce_southern_naval_bases }
		x = 0
		y = 2
		relative_position_id = SOV_reinforce_southern_naval_bases
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available = {
			195 = {
				#LENINGRAD
				is_owned_and_controlled_by = ROOT
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			195 = {
				#LENINGRAD
				add_building_construction = {
					type = anti_air_building
					level = 6
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker
					level = 2
					instant_build = yes
					province = {
						id = 3151
						id = 13240
					}
				}
				add_building_construction = {
					type = coastal_bunker
					level = 5
					instant_build = yes
					province = 13291
				}
				add_building_construction = {
					type = bunker
					level = 3
					province = {
						id = 3151
						id = 6174
						id = 13240
						id = 13243
						id = 149
					}
					instant_build = yes
				}
				add_dynamic_modifier = {
					modifier = SOV_krasnaya_gorka_battery
					scope = SOV
				}
				if = {
					limit = {
						ROOT = {
							has_tech = radio_detection
						}
						radar_station < 1
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
				}
				else = {
					custom_effect_tooltip = SOV_reinforce_western_naval_bases_radar_tt
				}
				set_state_flag = SOV_naval_bases_reinforced_flag
			}
			if = {
				limit = {
					has_full_control_of_state = 208					#LUGA
				}
				208 = {
					#LUGA
					add_building_construction = {
						type = bunker
						level = 3
						province = 9097
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 11186
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 9097
						instant_build = yes
					}
					add_dynamic_modifier = {
						modifier = SOV_seraya_loshad_battery
						scope = SOV
					}
				}
			}
			custom_effect_tooltip = SOV_reinforce_western_naval_bases_other_states_tt
			if = {
				#HELSINKI (UUSIMAA)
				limit = {
					has_full_control_of_state = 111
				}
				111 = {
					add_building_construction = {
						type = anti_air_building
						level = 5
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 11105
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = {
				#TALLIN (HARNU)
				limit = {
					has_full_control_of_state = 13
				}
				13 = {
					add_building_construction = {
						type = naval_base
						level = 7
						instant_build = yes
						province = 3152
					}
					add_building_construction = {
						type = anti_air_building
						level = 6
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 3152
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = {
				#RIGA
				limit = {
					has_full_control_of_state = 966
				}
				966 = {
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 9340
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = {
				#PALANGA (ŽEMAITIJA)
				limit = {
					has_full_control_of_state = 189
				}
				189 = {
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 6314
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
		}
	}
	focus = {
		id = SOV_reinforce_eastern_naval_bases
		icon = GFX_focus_SOV_reinforce_eastern_naval_bases
		prerequisite = { focus = SOV_reinforce_western_naval_bases }
		x = 0
		y = 2
		relative_position_id = SOV_reinforce_western_naval_bases
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available = {
			OR = {
				408 = {
					#VLADIVOSTOK
					is_owned_and_controlled_by = ROOT
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			408 = {	#VLADIVOSTOK - Improved naval base + AA + coastal fort
				add_building_construction = {
					type = anti_air_building
					level = 6
					instant_build = yes
				}
				add_building_construction = {
					type = air_base
					level = 4
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 4
					instant_build = yes
					province = 957
				}
				add_building_construction = {
					type = coastal_bunker
					level = 2
					instant_build = yes
					province = 957
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 11879
						id = 3977
						id = 6838
						id = 957
						id = 3787
						id = 12965
						id = 6684
					}	
				}
				set_state_flag = SOV_naval_bases_reinforced_flag
			}
		}
	}
	## Misc ##
	focus = {
		id = SOV_expand_the_morskaya_aviatsiya
		icon = GFX_goal_generic_air_naval_bomber
		prerequisite = { focus = SOV_pc_of_the_ussr_navy }
		x = -2
		y = 1
		relative_position_id = SOV_pc_of_the_ussr_navy
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_AIR_XP
			FOCUS_FILTER_NAVY_XP
		}
		completion_reward = {
			navy_experience = 15
			air_experience = 25
			add_tech_bonus = {
				name = SOV_expand_the_morskaya_aviatsiya
				bonus = 0.5
				uses = 2
				category = patrol_bomber
				category = naval_air
			}
		}
	}
	focus = {
		id = SOV_submarine_warfare
		icon = GFX_goal_generic_navy_submarine
		prerequisite = { focus = SOV_expand_the_morskaya_aviatsiya }
		x = 0
		y = 2
		relative_position_id = SOV_expand_the_morskaya_aviatsiya
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_NAVY_XP
		}
		completion_reward = {
			hidden_effect = {
				if = {
					#DEFAULT COMMIE
					limit = {
						has_government = communism
					}
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = {
						modifier = SOV_the_red_fleet_dynamic_modifier
					}
					add_dynamic_modifier = {
						modifier = SOV_the_red_fleet_submarine_1_dynamic_modifier
					}
				}
				else = {
					#ALT IDEOLOGY
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = {
						modifier = SOV_the_red_fleet_dynamic_modifier_alt
					}
					add_dynamic_modifier = {
						modifier = SOV_the_red_fleet_submarine_1_dynamic_modifier_alt
					}
				}
				#This handles the equipment bonus that's not supported by dynamic modifiers
				add_ideas = SOV_red_fleet_submarine_bonus_1
			}
			custom_effect_tooltip = SOV_submarine_warfare_ns_tt
			navy_experience = 25
			add_tech_bonus = {
				name = SOV_submarine_warfare
				bonus = 0.5
				uses = 2
				category = ss_tech
			}
		}
	}
	focus = {
		id = SOV_long_range_raiders
		icon = GFX_goal_generic_navy_anti_submarine
		prerequisite = { focus = SOV_submarine_warfare }
		x = 0
		y = 2
		relative_position_id = SOV_submarine_warfare
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_NAVY_XP
		}
		completion_reward = {
			hidden_effect = {
				if = {
					#DEFAULT COMMIE
					limit = {
						has_government = communism
					}
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = {
						modifier = SOV_the_red_fleet_submarine_1_dynamic_modifier
					}
					add_dynamic_modifier = {
						modifier = SOV_the_red_fleet_submarine_2_dynamic_modifier
					}
				}
				else = {
					#ALT IDEOLOGY
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = {
						modifier = SOV_the_red_fleet_submarine_1_dynamic_modifier_alt
					}
					add_dynamic_modifier = {
						modifier = SOV_the_red_fleet_submarine_2_dynamic_modifier_alt
					}
				}
				#Hidden National Spirits handle the equipment bonus that's not supported by dynamic modifiers
				swap_ideas = {
					remove_idea = SOV_red_fleet_submarine_bonus_1
					add_idea = SOV_red_fleet_submarine_bonus_2
				}
			}
			custom_effect_tooltip = SOV_submarine_warfare_ns_tt
			navy_experience = 25
			add_tech_bonus = {
				name = SOV_long_range_raiders
				ahead_reduction = 2
				uses = 1
				category = ss_tech
			}
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				#Line Production
				add_equipment_production = {
					equipment = {
						type = sov_cruiser_submarine_hull_4
						creator = "SOV"
					}
					name = "K-1"
					requested_factories = 1
					progress = 0.35
					amount = 1
				}
				add_equipment_production = {
					equipment = {
						type = sov_cruiser_submarine_hull_4
						creator = "SOV"
					}
					name = "K-2"
					requested_factories = 1
					progress = 0.35
					amount = 1
				}
			}
			else = {
				if = {
					#Submarine 3 if available
					limit = {
						has_tech = improved_submarine
					}
					add_equipment_production = {
						equipment = {
							type = submarine_3
							creator = "SOV"
							version_name = "K Class"
						}
						requested_factories = 1
						progress = 0.35
						amount = 1
					}
					add_equipment_production = {
						equipment = {
							type = submarine_3
							creator = "SOV"
							version_name = "K Class"
						}
						requested_factories = 1
						progress = 0.35
						amount = 1
					}
				}
				else = {
					#Submarine 2 as default
					add_equipment_production = {
						equipment = {
							type = submarine_2
							creator = "SOV"
							version_name = "K Class"
						}
						requested_factories = 1
						progress = 0.35
						amount = 1
					}
					add_equipment_production = {
						equipment = {
							type = submarine_2
							creator = "SOV"
							version_name = "K Class"
						}
						requested_factories = 1
						progress = 0.35
						amount = 1
					}
				}
			}
		}
	}
	## Big Fleet ##
	focus = {
		id = SOV_purchase_foreign_expertise
		icon = GFX_goal_generic_license_ships
		prerequisite = { focus = SOV_pc_of_the_ussr_navy }
		relative_position_id = SOV_pc_of_the_ussr_navy
		x = 2
		y = 1

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
		}

		bypass = {
		}
		search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_RESEARCH }

		completion_reward = {
			navy_experience = 25
			add_tech_bonus = {
				name = SOV_purchase_foreign_expertise
				bonus = 0.5
				category = naval_equipment
			}
		}
	}
	focus = {
		id = SOV_big_fleet_program
		icon = GFX_goal_generic_build_navy
		prerequisite = { focus = SOV_purchase_foreign_expertise }
		relative_position_id = SOV_purchase_foreign_expertise
		x = 0
		y = 1

		cost = 3

		ai_will_do = {
			factor = 1
		}

		search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_RESEARCH }

		completion_reward = {
			navy_experience = 25
			#Start Greatest Navy Mission
			activate_mission = SOV_the_greatest_navy
			custom_effect_tooltip = GER_plan_z_tt
		}
	}
	focus = {
		id = SOV_new_shipyards
		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = SOV_big_fleet_program }
		relative_position_id = SOV_big_fleet_program
		x = 0
		y = 1
		cost = 4
		available = {
			has_completed_focus = SOV_start_the_third_five_year_plan
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = SOV_new_shipyards_tt
			every_owned_state = {
				limit = {
					has_state_flag = SOV_naval_bases_reinforced_flag
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				if = {
					limit = {
						state = 195						#LENINGRAD - Gets 2 dockyards instead of 1
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = {
						state = 214						#Arkhangelsk - Gets 4 dockyards instead of 1
					}
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = dockyard
						level = 4
						instant_build = yes
					}
				}
				if = {
					limit = {
						state = 197						#Mykolayiv - Gets 4 dockyards instead of 1
					}
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = dockyard
						level = 4
						instant_build = yes
					}
				}
				if = {
					limit = {
						state = 408						#Vladivostok - Gets 4 dockyards instead of 1
					}
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = dockyard
						level = 4
						instant_build = yes
					}
				}
				else = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	focus = {
		id = SOV_modern_battleships
		icon = GFX_goal_generic_ships_super_battleships
		prerequisite = { focus = SOV_new_shipyards }
		relative_position_id = SOV_new_shipyards
		x = -1
		y = 1

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
		}

		bypass = {
		}
		search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = SOV_red_fleet_surface_bonus_3
			navy_experience = 25
			add_tech_bonus = {
				name = SOV_modern_battleships
				bonus = 1
				uses = 1
				category = bb_tech
			}
			#Sovietsky Soyuz Super-Heavy Battleship
		}
	}
	focus = {
		id = SOV_modern_battlecruisers
		icon = GFX_goal_generic_ships_battleships
		prerequisite = { focus = SOV_modern_battleships }
		prerequisite = { focus = SOV_modern_escorts }
		x = 0
		y = 2
		relative_position_id = SOV_new_shipyards

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
		}

		bypass = {
		}
		search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = SOV_red_fleet_surface_bonus_2
			navy_experience = 25
			#Kronshtadt Class Battlecruiser
			add_tech_bonus = {
				name = SOV_modern_battlecruisers
				bonus = 1
				uses = 1
				category = bc_tech
			}
		}
	}
	focus = {
		id = SOV_modern_escorts
		icon = GFX_goal_generic_ships_destroyer
		prerequisite = { focus = SOV_new_shipyards }
		x = 1
		y = 1
		relative_position_id = SOV_new_shipyards

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
		}

		bypass = {
		}
		search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = SOV_red_fleet_surface_bonus_1
			navy_experience = 25
			add_tech_bonus = {
				name = SOV_modern_escorts
				bonus = 1
				uses = 3
				category = dd_tech
				category = cl_tech
			}
		}
	}
	focus = {
		id = SOV_an_oceangoing_navy
		icon = GFX_goal_generic_fleet_escorts
		prerequisite = { focus = SOV_modern_battlecruisers }
		x = 0
		y = 1
		relative_position_id = SOV_modern_battlecruisers
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_NAVY_XP
		}
		completion_reward = {
			navy_experience = 25
			add_doctrine_cost_reduction = {
				cost_reduction = 0.99
				name = SOV_an_oceangoing_navy
				uses = 3
				category = cat_fleet_in_being
			}
		}
	}
	
	focus = {
		id = SOV_raise_naval_infantry
		icon = GFX_goal_generic_amphibious_assault
		mutually_exclusive = { focus = SOV_assert_soviet_naval_presence }
		mutually_exclusive = { focus = SOV_mine_warfare }
		prerequisite = { focus = SOV_form_the_stavka }
		x = 6
		y = 1
		relative_position_id = SOV_form_the_stavka

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			
		}

		search_filters = { FOCUS_FILTER_EMERGENCY }

		completion_reward = {
			custom_effect_tooltip = SOV_raise_naval_infantry_tt
			hidden_effect = {
				add_to_variable = { SOV_fyp_industrial_capacity_dockyard = -0.5 }
				add_to_variable = { SOV_red_fleet_navy_refit_ic_cost = 0.1 }
				add_to_variable = { SOV_red_fleet_repair_speed_factor = -0.1 }
				add_to_variable = { SOV_red_fleet_naval_coordination = -0.5 }
				division_template = {
					name = "Diviziya Morskoi Pekhoty"
					division_names_group = SOV_MAR_01
					regiments = {
						marine = { x = 0 y = 0 }
						marine = { x = 0 y = 1 }
						marine = { x = 0 y = 2 }

						marine = { x = 1 y = 0 }
						marine = { x = 1 y = 1 }
						marine = { x = 1 y = 2 }

						marine = { x = 2 y = 0 }
						marine = { x = 2 y = 1 }
						marine = { x = 2 y = 2 }

						artillery_brigade = { x = 3 y = 0 }
						artillery_brigade = { x = 3 y = 1 }
						artillery_brigade = { x = 3 y = 2 }
					}
					support = {
						normal_engineer = { x = 0 y = 0 }
						horse_logistics_company = { x = 0 y = 1 }

						recon = { x = 1 y = 0 }
						horse_field_hospital = { x = 1 y = 1 }
					}
				}
			}
			random_state = {	#Sevastopol: 3
				prioritize = { 137 234 }
				create_unit = {
					division = "division_template = \"Diviziya Morskoi Pekhoty\" start_experience_factor = 0.3 start_equipment_factor = 0.2"
					owner = ROOT
					count = 3
				}
			}
			random_state = {	#Novorossiysk: 3
				prioritize = { 234 }
				create_unit = {
					division = "division_template = \"Diviziya Morskoi Pekhoty\" start_experience_factor = 0.3 start_equipment_factor = 0.2"
					owner = ROOT
					count = 3
				}
			}
			random_state = {	#Vladivostok: 2
				prioritize = { 408 }
				create_unit = {
					division = "division_template = \"Diviziya Morskoi Pekhoty\" start_experience_factor = 0.3 start_equipment_factor = 0.2"
					owner = ROOT
					count = 2
				}
			}
			random_state = {	#Leningrad: 7
				prioritize = { 195 264 214 }
				create_unit = {
					division = "division_template = \"Diviziya Morskoi Pekhoty\" start_experience_factor = 0.3 start_equipment_factor = 0.2"
					owner = ROOT
					count = 7
				}
			}
		}
	}
	focus = {
		id = SOV_assert_soviet_naval_presence
		icon = GFX_goal_generic_construct_naval_dockyard_large
		mutually_exclusive = { focus = SOV_raise_naval_infantry }
		prerequisite = { focus = SOV_form_the_stavka }
		x = 8
		y = 1
		relative_position_id = SOV_form_the_stavka
		available = {
			has_offensive_war = no
		}
		cost = 3
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}
		ai_will_do = {
			factor = 1
		}
		available = {
			OR = {
				137 = {
					is_controlled_by = SOV
				}
				195 = {
					is_controlled_by = SOV
				}
				408 = {
					is_controlled_by = SOV
				}
			}
		}
		available_if_capitulated = no
		completion_reward = {
			add_tech_bonus = {
				name = SOV_assert_soviet_naval_presence
				bonus = 0.5
				uses = 3
				category = naval_equipment
			}
			if = {
				limit = {
					195 = {
						is_controlled_by = SOV
					}
				}
				195 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					137 = {
						is_controlled_by = SOV
					}
				}
				137 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					408 = {
						is_controlled_by = SOV
					}
				}
				408 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_wartime_lessons
		icon = GFX_goal_generic_navy_submarine
		prerequisite = { focus = SOV_raise_naval_infantry focus = SOV_assert_soviet_naval_presence }
		x = 1
		y = 1
		relative_position_id = SOV_raise_naval_infantry
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		completion_reward = {
			add_doctrine_cost_reduction = {
				cost_reduction = 0.99
				name = SOV_wartime_lessons
				uses = 3
				category = submarine_doctrine
			}
		}
	}

	focus = {
		id = SOV_mine_warfare
		icon = GFX_focus_generic_mine_warfare
		prerequisite = { focus = SOV_raise_naval_infantry }
		x = -1
		y = 1
		relative_position_id = SOV_wartime_lessons
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		completion_reward = {
			add_ideas = SOV_mine_warfare_ns
			add_tech_bonus = {
				name = SOV_mine_warfare
				bonus = 0.5
				uses = 2
				category = naval_mines
			}
		}
	}
	
	focus = {
		id = SOV_offensive_maritime_strategy
		icon = GFX_goal_generic_ships_heavy_cruiser
		prerequisite = { focus = SOV_assert_soviet_naval_presence }
		x = 1
		y = 1
		relative_position_id = SOV_wartime_lessons

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			
		}

		search_filters = { FOCUS_FILTER_NAVY_XP }

		completion_reward = {
			#Reduce Naval Reform Cost
			navy_experience = 25
			add_tech_bonus = {
				name = SOV_offensive_maritime_strategy
				bonus = 0.5
				uses = 3
				category = marine_tech
			}
			add_doctrine_cost_reduction = {
				cost_reduction = 0.99
				name = SOV_an_oceangoing_navy
				uses = 3
				category = naval_doctrine
			}
		}
	}

	focus = {
		id = SOV_reorganize_the_navy
		icon = GFX_goal_HUN_the_hungarian_naval_forces
		prerequisite = { focus = SOV_offensive_maritime_strategy focus = SOV_mine_warfare }
		x = 0
		y = 2
		relative_position_id = SOV_wartime_lessons

		cost = 8

		ai_will_do = {
			factor = 1
		}

		available = {
			has_war = no
		}

		search_filters = { FOCUS_FILTER_NAVY_XP }

		completion_reward = {
			navy_experience = 25
			remove_ideas = SOV_red_fleet_surface_bonus_4
			if = {	#fix negatives from naval infantry
				limit = { has_completed_focus = SOV_raise_naval_infantry }	
				custom_effect_tooltip = SOV_reorganize_the_navy_tt
				add_to_variable = { SOV_fyp_industrial_capacity_dockyard = 0.5 }
				add_to_variable = { SOV_red_fleet_navy_refit_ic_cost = -0.1 }
				add_to_variable = { SOV_red_fleet_repair_speed_factor = 0.1 }
				add_to_variable = { SOV_red_fleet_naval_coordination = 0.5 }
			}
		}
	}
	
	focus = {
		id = SOV_impregnable_forts
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_raise_naval_infantry focus = SOV_assert_soviet_naval_presence }
		x = 4
		y = 1
		relative_position_id = SOV_raise_naval_infantry
		cost = 5
		available = {
		}
		search_filters = {
		}
		completion_reward = {
			if = {
				limit = {
					has_full_control_of_state = 195					#LENINGRAD
				}
				195 = {
					#LENINGRAD
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = {
							id = 3151
							id = 6174
						}
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = {
							id = 3151
							id = 6174
						}
						instant_build = yes
					}
					add_dynamic_modifier = {
						modifier = SOV_krasnaya_gorka_battery
						scope = SOV
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 208					#LUGA
				}
				208 = {
					#LUGA
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9097
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 9097
						instant_build = yes
					}
					add_dynamic_modifier = {
						modifier = SOV_seraya_loshad_battery
						scope = SOV
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 137					#CRIMEA
				}
				137 = {
					#CRIMEA
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 3686
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 3686
						instant_build = yes
					}
					add_dynamic_modifier = {
						modifier = SOV_armored_battery_35
						scope = SOV
					}
				}
			}
		}
	}

	focus = {
		id = SOV_protect_the_white_sea_baltic_canal
		icon = GFX_focus_generic_provoke_border_clashes
		prerequisite = { focus = SOV_impregnable_forts }
		x = 0
		y = 1
		relative_position_id = SOV_impregnable_forts
		cost = 3
		search_filters = {
		}
		completion_reward = {
			if = {
				limit = {
					has_full_control_of_state = 215					#ONEGA
				}
				215 = {
					#ONEGA
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 9045
							id = 3078
							id = 11212
						}
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 9045
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 216					#OLONETS
				}
				216 = {
					#OLONETS
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 92
							id = 11092
						}
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 264					#TIKHVIN
				}
				264 = {
					#TIKHVIN
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 9082
							id = 9190
							id = 11059
						}
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 195					#LENINGRAD
				}
				195 = {
					#LENINGRAD
					add_building_construction = {
						type = anti_air_building
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 149
							id = 11068
							id = 79
						}
						instant_build = yes
					}
				}
			}
		}
	}

	############################################
	############# POLITICAL BRANCH #############
	############################################

	focus = {
		id = SOV_policy_of_collective_security
		icon = GFX_goal_anschluss
		x = 15
		y = 0
		relative_position_id = SOV_pc_of_defence
		cost = 2
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_political_power = 25
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_maksim_litvinov
			activate_advisor = SOV_maksim_litvinov
		}
	}
	### Alt-History ###
	focus = {
		id = SOV_anti_capitalist_policies
		icon = GFX_focus_spr_class_war
		prerequisite = { focus = SOV_policy_of_collective_security }
		mutually_exclusive = { focus = SOV_anti_fascist_policies }
		x = 2
		y = 1
		relative_position_id = SOV_policy_of_collective_security
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			NOT = {
				has_government = democratic
			}
		}
		search_filters = {
			FOCUS_FILTER_PROPAGANDA
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			every_other_country = {
				limit = {
					is_major = yes
					OR = {
						has_government = fascism
						has_government = communism
					}
					NOT = {
						has_war_with = ROOT
					}
				}
				add_opinion_modifier = {
					target = SOV
					modifier = SOV_anti_capitalist_policies_good
				}
			}
			every_other_country = {
				limit = {
					is_major = yes
					has_government = democratic
				}
				add_opinion_modifier = {
					target = SOV
					modifier = SOV_anti_capitalist_policies_bad
				}
			}
			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				#unlock_decision_tooltip = SOV_propaganda_anti_capitalism
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
	}
	focus = {
		id = SOV_liberation_of_the_european_proletariat
		icon = GFX_focus_spr_torchbearers_of_tomorrow
		prerequisite = { focus = SOV_anti_capitalist_policies
		}
		x = 0
		y = 1
		relative_position_id = SOV_anti_capitalist_policies
		cost = 10
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
			NOT = {
				has_country_flag = SOV_paranoia_system_active_flag
			}
			any_country = {
				OR = {
					tag = ENG
					tag = FRA
					tag = GER
					tag = ITA
					tag = USA
				}
				has_government = democratic
				is_major = yes
				is_subject = no
			}
		}
		search_filters = {
			
		}
		completion_reward = {
			add_timed_idea = {
				idea = SOV_liberation_of_the_european_proletariat_ns
				days = 365
			}
			if = {
				limit = {
					ENG = {
						has_government = democratic
					}
				}
				hidden_effect = {
					add_ideas = SOV_targeted_bonus_against_ENG
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ENG
				}
			}
			if = {
				limit = {
					FRA = {
						has_government = democratic
					}
				}
				hidden_effect = {
					add_ideas = SOV_targeted_bonus_against_FRA
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = FRA
				}
			}
			if = {
				limit = {
					GER = {
						has_government = democratic
					}
				}
				hidden_effect = {
					add_ideas = SOV_targeted_bonus_against_GER
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = GER
				}
			}
			if = {
				limit = {
					ITA = {
						has_government = democratic
					}
				}
				hidden_effect = {
					add_ideas = SOV_targeted_bonus_against_ITA
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ITA
				}
			}
		}
	}
	### Western Diplo ###
	focus = {
		id = SOV_anti_fascist_policies
		icon = GFX_focus_generic_anti_fascist_diplomacy
		prerequisite = { focus = SOV_policy_of_collective_security }
		mutually_exclusive = { focus = SOV_anti_capitalist_policies }
		x = -2
		y = 1
		relative_position_id = SOV_policy_of_collective_security
		cost = 3
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			every_other_country = {
				limit = {
					is_major = yes
					OR = {
						has_government = democratic
						has_government = communism
					}
					NOT = {
						has_war_with = ROOT
					}
				}
				add_opinion_modifier = {
					target = SOV
					modifier = SOV_anti_fascist_policies_good
				}
			}
			every_other_country = {
				limit = {
					is_major = yes
					has_government = fascism
				}
				add_opinion_modifier = {
					target = SOV
					modifier = SOV_anti_fascist_policies_bad
				}
			}
			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				#unlock_decision_tooltip = SOV_propaganda_anti_fascism
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
	}
	focus = {
		id = SOV_seek_a_defense_pact_with_the_allies
		icon = GFX_goal_generic_major_alliance
		prerequisite = { focus = SOV_anti_fascist_policies
		}
		x = 0
		y = 1
		relative_position_id = SOV_anti_fascist_policies
		cost = 3
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		bypass = {
			OR = {
				NOT = {
					country_exists = FRA
				}
				FRA = {
					has_capitulated = yes
				}
			}
			NOT = {
				any_other_country = {
					is_faction_leader = yes
					SOV_is_valid_collective_security_target = yes
				}
			}
		}
		available = {
			NOT = {
				has_country_flag = SOV_paranoia_system_active_flag
			}
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			if = {
				#FRA is default target
				limit = {
					country_exists = FRA
					FRA = {
						SOV_is_valid_collective_security_target = yes
					}
				}
				set_variable = {
					SOV_collective_security_target = FRA
				}
				FRA = {
					country_event = {
						id = NSB_soviet_policies_of_collective_security.1
						hours = 8
						random_hours = 4
					}
				}
			}
			else_if = {
				#ENG is first fallback target
				limit = {
					country_exists = ENG
					is_faction_leader = yes
					ENG = {
						SOV_is_valid_collective_security_target = yes
					}
				}
				set_variable = {
					SOV_collective_security_target = FRA
				}
				ENG = {
					country_event = {
						id = NSB_soviet_policies_of_collective_security.1
						hours = 8
						random_hours = 4
					}
				}
			}
			else_if = {
				#Non-Fascist European faction leader is next
				limit = {
					any_country = {
						is_faction_leader = yes
						capital_scope = {
							is_on_continent = europe
						}
						SOV_is_valid_collective_security_target = yes
					}
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						capital_scope = {
							is_on_continent = europe
						}
						SOV_is_valid_collective_security_target = yes
					}
					ROOT = {
						set_variable = {
							SOV_collective_security_target = PREV
						}
					}
					country_event = {
						id = NSB_soviet_policies_of_collective_security.1
						hours = 8
						random_hours = 4
					}
				}
			}
			else_if = {
				#Alright I dont really care anymore, pick whoever is left alive
				limit = {
					any_other_country = {
						is_faction_leader = yes
						SOV_is_valid_collective_security_target = yes
					}
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						SOV_is_valid_collective_security_target = yes
					}
					ROOT = {
						set_variable = {
							SOV_collective_security_target = PREV
						}
					}
					country_event = {
						id = NSB_soviet_policies_of_collective_security.1
						hours = 8
						random_hours = 4
					}
				}
			}
			custom_effect_tooltip = SOV_seek_a_defense_pact_with_the_allies_event_effects_tt
			if = {
				limit = {
					country_exists = POL
					POL = {
						SOV_is_valid_collective_security_target = yes
					}
					var:SOV_collective_security_target = {
						capital_scope = {
							is_on_continent = europe
						}
					}
				}
				custom_effect_tooltip = SOV_seek_a_defense_pact_with_the_allies_poland_tt
			}
		}
	}

	focus = {
		id = SOV_send_military_advisors_to_spain
		icon = GFX_focus_intervention_spain_republic
		prerequisite = { focus = SOV_anti_fascist_policies focus = SOV_anti_capitalist_policies }
		x = 2
		y = 1
		relative_position_id = SOV_anti_fascist_policies
		cost = 2
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			has_civil_war = no
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				SPR_scw_in_progress = yes
				if = {
					limit = {
						NOT = {
							has_global_flag = spanish_civil_war
						}
					}
					custom_trigger_tooltip = {
						tooltip = POR_spr_tooltip_country_exist_tt
						country_exists = SPR
					}
					custom_trigger_tooltip = {
						tooltip = POR_spr_tooltip_at_peace_tt
						NOT = {
							has_war_with = SPR
						}
					}
				}
				else = {
					if = {
						limit = {
							has_completed_focus = SOV_covert_support_for_spanish_poum
						}
						country_exists = SPC
						NOT = {
							has_war_with = SPC
						}
					}
					else = {
						country_exists = SPD
						NOT = {
							has_war_with = SPD
						}
					}
				}
			}
			else = {
				any_other_country = {
					original_tag = SPR
					has_civil_war = yes
					NOT = {
						has_war_with = ROOT
					}
					OR = {
						has_government = democratic
						has_government = communism
					}
				}
			}
			has_government = communism
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			unlock_decision_tooltip = SOV_equipment_shipments_air
			unlock_decision_tooltip = SOV_equipment_shipments_tank
			unlock_decision_tooltip = SOV_equipment_shipments_inf
			#add_timed_idea = {
			#	idea = SOV_military_advisors_in_spain
			#	days = 1095
			#}
			if = {
				limit = {
					has_dlc = "La Resistance"
					has_completed_focus = SOV_covert_support_for_spanish_poum
					has_completed_focus = SOV_coup_detat
					has_global_flag = SPR_anarchist_uprising_flag
					country_exists = SPC
					SPC = {
						has_completed_focus = SPR_the_anti_fascist_workers_revolution
					}
				}
				SPC = {
					add_opinion_modifier = { target = SOV modifier = SPA_spanish_civil_war_commitments }
					hidden_effect = {
						country_event = {
							id = NSB_soviet_foreign_politics_events.20
							hours = 2
							random_hours = 1
						}
					}
					effect_tooltip = {
						add_timed_idea = {
							idea = SOV_soviet_advisors_spr
							days = 1095
						}
					}
				}
			}
			else_if = {
				limit = {
					has_dlc = "La Resistance"
					country_exists = SPD
				}
				SPD = {
					add_opinion_modifier = { target = SOV modifier = SPA_spanish_civil_war_commitments }
					hidden_effect = {
						country_event = {
							id = NSB_soviet_foreign_politics_events.20
							hours = 2
							random_hours = 1
						}
					}
					effect_tooltip = {
						add_timed_idea = {
							idea = SOV_soviet_advisors_spr
							days = 1095
						}
					}
				}
			}
			else_if = {
				limit = {
					has_dlc = "La Resistance"
					NOT = {
						country_exists = SPD
					}
				}
				SPR = {
					add_opinion_modifier = { target = SOV modifier = SPA_spanish_civil_war_commitments }
				}
				custom_effect_tooltip = SOV_aid_republican_spain_tt
				effect_tooltip = {
					add_timed_idea = {
						idea = SOV_soviet_advisors_spr
						days = 1095
					}
				}
			}
			else = {
				random_country = {
					limit = {
						original_tag = SPR
						has_civil_war = yes
						OR = {
							has_government = communism
							has_government = democratic
						}
					}
					SPR = {
						add_opinion_modifier = { target = SOV modifier = SPA_spanish_civil_war_commitments }
					}
					hidden_effect = {
						country_event = {
							id = NSB_soviet_foreign_politics_events.20
							hours = 2
							random_hours = 1
						}
					}
					effect_tooltip = {
						add_timed_idea = {
							idea = SOV_soviet_advisors_spr
							days = 1095
						}
					}
				}
			}
			# A Spanish General will join the USSR if his side loses the SCW
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				custom_effect_tooltip = SOV_send_military_advisors_to_spain_generals_tt
				set_country_flag = SOV_spanish_refugee_generals_welcome_flag
			}
		}
	}

	focus = {
		id = SOV_improve_the_stalin_line
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = SOV_send_military_advisors_to_spain }
		x = 0
		y = 1
		relative_position_id = SOV_send_military_advisors_to_spain
		cost = 4
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_has_civil_war_no_tt
				has_civil_war = no
				NOT = {
					has_war_with = STA
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_STABILITY
		}
		completion_reward = {
			add_stability = 0.05
			209 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11202
							id = 6324
							id = 11392
						}
						instant_build = yes
					}
				}
			}
			210 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 6242
							id = 9353
							id = 9386
						} 
						instant_build = yes
					}
				}
			}
			207 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = { 
							id = 6249
							id = 6371
							id = 6220
						}	
						instant_build = yes
					}
				}
			}
			206 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
				}
			}
			204 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 360
							id = 3759
							id = 11313
						}
						instant_build = yes
					}
				}
			}
			201 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 9493
							id = 3470
						}
						instant_build = yes
					}
				}
			}
			199 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 3511
							id = 3457
							id = 6429
							id = 3430
						}
						instant_build = yes
					}
				}
			}
			198 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 6455
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 476
							id = 9623
							id = 9576
						}
						instant_build = yes
					}
				}
			}
			192 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 754
							id = 741
						}
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 11670
						instant_build = yes
					}
				}
			}
			202 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = {
							id = 13302
							id = 13296
							id = 3543
							id = 504
							id = 3494
						}
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_policy_of_individual_security
		icon = GFX_goal_generic_defence
		prerequisite = { focus = SOV_improve_the_stalin_line }
		x = 0
		y = 1
		relative_position_id = SOV_improve_the_stalin_line
		cost = 3
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			OR = {
				has_completed_focus = SOV_anti_capitalist_policies
				AND = {
					has_completed_focus = SOV_anti_fascist_policies
					GER = {
						has_country_flag = sudetenland_acquired
					}
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			add_political_power = 35
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_vyacheslav_molotov
			activate_advisor = SOV_vyacheslav_molotov
			if = {
				limit = { has_completed_focus = SOV_anti_fascist_policies }
				every_other_country = {
					limit = {
						is_major = yes
						OR = {
							has_government = democratic
							has_government = communism
						}
						NOT = {
							has_war_with = ROOT
						}
					}
					remove_opinion_modifier = {
						target = SOV
						modifier = SOV_anti_fascist_policies_good
					}
				}
				every_other_country = {
					limit = {
						is_major = yes
						has_government = fascism
					}
					remove_opinion_modifier = {
						target = SOV
						modifier = SOV_anti_fascist_policies_bad
					}
				}
			}
		}
	}
	focus = {
		id = SOV_mol_rib_pact
		icon = GFX_goal_molotov_ribbentrop_pact
		prerequisite = { focus = SOV_policy_of_individual_security }
		x = 0
		y = 1
		relative_position_id = SOV_policy_of_individual_security
		cost = 1
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			NOT = {
				has_country_flag = SOV_paranoia_system_active_flag
			}
			OR = {
				AND = {
					GER = {
						exists = yes
						SOV_is_valid_subject = yes
					}
					NOT = {
						has_war_with = GER
					}
					is_subject = no
					POL = {
						has_capitulated = yes
					}
				}
				AND = {
					NOT = { country_exists = GER }
					FRA = {
						exists = yes
						SOV_is_valid_subject = yes
					}
					NOT = {
						has_war_with = FRA
					}
					is_subject = no
				}
			}
		}
		bypass = {
			OR = {
				NOT = {
					country_exists = GER
				}
				NOT = {
					country_exists = FRA
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
			FOCUS_FILTER_RESEARCH
		}
		completion_reward = {
			if = {
				limit = {
					GER = {
						exists = yes
						SOV_is_valid_subject = yes
					}
					NOT = {
						has_war_with = GER
					}
					is_subject = no
					POL = {
						has_capitulated = yes
					}
				}
				GER = {
					country_event = {
						id = NSB_soviet_soviet_german_trade_agreement.1
						hours = 1
					}
				}
				custom_effect_tooltip = if_they_accept			#This will also make GER more likely to take Molotov-Ribbentrop pact and less to take Anti-Soviet Pact
				effect_tooltip = {
					if = {
						limit = {
							has_dlc = "Man the Guns"
						}
						set_technology = {
							ger_heavy_cruiser_2 = 1
						}
						# CA: Lützow -> Petropavlovsk
						add_equipment_production = {
							equipment = {
								type = ger_heavy_cruiser_hull_2
								creator = "SOV"
							}
							name = "Petropavlovsk"
							requested_factories = 1
							progress = 0.7
							amount = 1
						}
						if = {
							#Default name
							limit = {
								has_government = communism
							}
							add_tech_bonus = {
								name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
								bonus = 0.5
								uses = 3
								category = ship_modules_tech
								category = bb_tech
								category = dd_tech
							}
						}
						else = {
							#Alt name
							add_tech_bonus = {
								name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
								bonus = 0.5
								uses = 2
								category = ship_modules_tech
								category = bb_tech
								category = dd_tech
							}
						}
					}
					else = {
						#No MTG
						if = {
							limit = {
								NOT = {
									has_tech = basic_heavy_cruiser
								}
							}
							set_technology = {
								basic_heavy_cruiser = 1
							}
						}
						create_equipment_variant = {
							name = "Hipper Class"
							type = heavy_cruiser_2
							parent_version = 0
							upgrades = {
								ship_reliability_upgrade = 1
								ship_engine_upgrade = 1
								ship_armor_upgrade = 2
								ship_gun_upgrade = 2
							}
						}
						add_equipment_production = {
							equipment = {
								type = heavy_cruiser_2
								creator = "SOV"
							}
							requested_factories = 1
							progress = 0.95
							amount = 1
						}
						if = {
							#Default name
							limit = {
								has_government = communism
							}
							add_tech_bonus = {
								name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
								bonus = 0.5
								uses = 2
								category = ca_tech
								category = bb_tech
								category = dd_tech
							}
						}
						else = {
							#Alt name
							add_tech_bonus = {
								name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
								bonus = 0.5
								uses = 2
								category = ca_tech
								category = bb_tech
								category = dd_tech
							}
						}
					}
					if = {
						#Default name
						limit = {
							has_government = communism
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
							bonus = 0.5
							uses = 1
							category = air_equipment
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
							bonus = 0.5
							uses = 2
							category = industry
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
							bonus = 0.5
							uses = 1
							category = synth_resources
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
							bonus = 0.5
							uses = 1
							category = armor
						}
					}
					else = {
						#Alt name
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
							bonus = 0.5
							uses = 2
							category = air_equipment
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
							bonus = 0.5
							uses = 2
							category = industry
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
							bonus = 0.5
							uses = 1
							category = artillery
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
							bonus = 0.5
							uses = 1
							category = armor
						}
					}
					SOV = {
						add_timed_idea = {
							idea = GER_soviet_german_trade_agreement
							days = 845
						}
						#Should actually last til end of 41
						economy_fatigue_level_down_4 = yes
					}
					#Effects to Germans
					GER = {
						add_timed_idea = {
							idea = SOV_soviet_german_trade_agreement
							days = 845
						}
						#Should actually last til end of 41
						capital_scope = {
							add_dynamic_modifier = {
								modifier = SOV_soviet_imports
							}
						}
						economy_fatigue_level_down_2 = yes
					}
				}
			}
			else = {
				add_tech_bonus = {
					name = SOV_mol_rib_pact
					bonus = 0.5
					uses = 3
					category = ship_modules_tech
					category = bb_tech
					category = dd_tech
				}
				add_tech_bonus = {
					name = SOV_mol_rib_pact
					bonus = 0.5
					uses = 1
					category = air_equipment
				}
				add_tech_bonus = {
					name = SOV_mol_rib_pact
					bonus = 0.5
					uses = 2
					category = industry
				}
				add_tech_bonus = {
					name = SOV_mol_rib_pact
					bonus = 0.5
					uses = 1
					category = armor
				}
				SOV = {
					add_timed_idea = {
						idea = GER_soviet_german_trade_agreement
						days = 845
					}
					#Should actually last til end of 41
				}
				#Effects to FRA
				FRA = {
					add_timed_idea = {
						idea = SOV_soviet_german_trade_agreement
						days = 845
					}
					#Should actually last til end of 41
					capital_scope = {
						add_dynamic_modifier = {
							modifier = SOV_soviet_imports
						}
					}
				}				
			}
		}
	}
	focus = {
		id = SOV_claims_on_poland
		icon = GFX_goal_generic_attack_allies
		prerequisite = { focus = SOV_mol_rib_pact }
		x = 0
		y = 1
		relative_position_id = SOV_mol_rib_pact
		cost = 2
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					has_civil_war = yes
					date < 1939.7.1
				}
			}
			modifier = {
				factor = 200
				GER = {
					has_government = democratic
				}
			}
		}
		available = {
			NOT = {
				has_country_flag = SOV_paranoia_system_active_flag
			}
			is_subject = no
		}
		bypass = {
			OR = {
				has_idea = SOV_molotov_ribbentrop_pact
				NOT = {
					country_exists = POL
				}
				has_non_aggression_pact_with = POL
				has_guaranteed = POL
				AND = {
					OR = {
						owns_state = 91
						91 = {
							is_claimed_by = ROOT
						}
					}
					OR = {
						owns_state = 93
						93 = {
							is_claimed_by = ROOT
						}
					}
					OR = {
						owns_state = 94
						94 = {
							is_claimed_by = ROOT
						}
					}
					OR = {
						owns_state = 95
						95 = {
							is_claimed_by = ROOT
						}
					}
					OR = {
						owns_state = 96
						96 = {
							is_claimed_by = ROOT
						}
					}
					OR = {
						owns_state = 89
						89 = {
							is_claimed_by = ROOT
						}
					}
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
		completion_reward = {
			# REVISIT Covers Polish border, may want to add/remove some states
			add_state_claim = 96
			add_state_claim = 95
			add_state_claim = 94
			add_state_claim = 93
			add_state_claim = 91
			add_state_claim = 89
			add_state_claim = 784
			add_named_threat = {
				threat = 3
				name = SOV_claims_on_poland
			}
			every_other_country = {
				limit = {
					OR = {
						owns_state = 96
						owns_state = 95
						owns_state = 94
						owns_state = 93
						owns_state = 91
						owns_state = 89
						owns_state = 784
					}
				}
				add_opinion_modifier = {
					target = SOV
					modifier = claimed_eastern_poland
				}
			}
			if = {
				limit = {
					POL = {
						96 = {
							is_owned_and_controlled_by = POL
						}
						95 = {
							is_owned_and_controlled_by = POL
						}
						94 = {
							is_owned_and_controlled_by = POL
						}
						93 = {
							is_owned_and_controlled_by = POL
						}
						91 = {
							is_owned_and_controlled_by = POL
						}
						89 = {
							is_owned_and_controlled_by = POL
						}
						784 = {
							is_owned_and_controlled_by = POL
						}
					}
				}
				POL = {
					country_event = {
						id = poland.2
					}
					custom_effect_tooltip = needs_approval
				}
			}
			else_if = {
				limit = {
					GER = {
						96 = {
							is_controlled_by = GER
						}
						95 = {
							is_controlled_by = GER
						}
						94 = {
							is_controlled_by = GER
						}
						93 = {
							is_controlled_by = GER
						}
						91 = {
							is_controlled_by = GER
						}
						89 = {
							is_controlled_by = GER
						}
						784 = {
							is_controlled_by = GER
						}
					}
				}
				GER = {
					country_event = {
						id = ger_armor.853
					}
					custom_effect_tooltip = needs_approval
				}
			}
			effect_tooltip = {
				SOV = {
					if = {
						limit = {
							POL = {
								controls_state = 96
							}
						}
						transfer_state = 96
					}
					if = {
						limit = {
							POL = {
								controls_state = 95
							}
						}
						transfer_state = 95
					}
					if = {
						limit = {
							POL = {
								controls_state = 94
							}
						}
						transfer_state = 94
					}
					if = {
						limit = {
							POL = {
								controls_state = 93
							}
						}
						transfer_state = 93
					}
					if = {
						limit = {
							POL = {
								controls_state = 91
							}
						}
						transfer_state = 91
					}
					if = {
						limit = {
							POL = {
								controls_state = 89
							}
						}
						transfer_state = 89
					}
					if = {
						limit = {
							POL = {
								controls_state = 89
							}
						}
						transfer_state = 784
					}
					if = {
						limit = {
							GER = {
								controls_state = 96
							}
						}
						transfer_state = 96
					}
					if = {
						limit = {
							GER = {
								controls_state = 95
							}
						}
						transfer_state = 95
					}
					if = {
						limit = {
							GER = {
								controls_state = 94
							}
						}
						transfer_state = 94
					}
					if = {
						limit = {
							GER = {
								controls_state = 93
							}
						}
						transfer_state = 93
					}
					if = {
						limit = {
							GER = {
								controls_state = 91
							}
						}
						transfer_state = 91
					}
					if = {
						limit = {
							GER = {
								controls_state = 89
							}
						}
						transfer_state = 89
					}
					if = {
						limit = {
							GER = {
								controls_state = 784
							}
						}
						transfer_state = 784
					}
				}
			}
		}
	}
	focus = {
		id = SOV_claim_on_bessarabia
		icon = GFX_focus_generic_attack_romania
		prerequisite = { focus = SOV_claims_on_poland }
		x = 0
		y = 1
		relative_position_id = SOV_claims_on_poland
		cost = 2
		ai_will_do = {
			factor = 2.5
			modifier = {
				factor = 0
				OR = {
					date < 1939.1.1
					has_civil_war = yes
				}
			}
			modifier = {
				factor = 200
				GER = {
					has_government = democratic
				}
			}
		}
		available = {
			NOT = {
				has_country_flag = SOV_paranoia_system_active_flag
			}
			is_subject = no
		}
		bypass = {
			has_idea = SOV_molotov_ribbentrop_pact
			OR = {
				owns_state = 78				#Bessarabia
				78 = {
					is_claimed_by = ROOT
				}
				78 = {
					owner = {
						is_in_faction_with = ROOT
					}
				}
			}
			OR = {
				owns_state = 80				#Bucovina
				80 = {
					is_claimed_by = ROOT
				}
				80 = {
					owner = {
						is_in_faction_with = ROOT
					}
				}
			}
			OR = {
				owns_state = 766				#Southern Bessarabia
				766 = {
					is_claimed_by = ROOT
				}
				766 = {
					owner = {
						is_in_faction_with = ROOT
					}
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
		completion_reward = {
			#This is now generic and will target any potential (multiple) controllers for these states.
			if = {
				limit = {
					78 = {
						OWNER = {
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				add_state_claim = 78
			}
			if = {
				limit = {
					766 = {
						OWNER = {
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				add_state_claim = 766
			}
			if = {
				limit = {
					80 = {
						OWNER = {
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				add_state_claim = 80
			}
			unlock_decision_tooltip = SOV_demand_bessarabia
			add_named_threat = {
				threat = 1
				name = SOV_claim_on_bessarabia
			}
			random_other_country = {
				limit = {
					owns_state = 78
				}
				add_opinion_modifier = {
					target = SOV
					modifier = claimed_bessarabia
				}
				set_country_flag = SOV_added_claimed_bessarabia
			}
			unlock_decision_tooltip = SOV_demand_bessarabia
		}
	}

	focus = {
		id = SOV_the_molotov_line
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = SOV_claim_on_bessarabia }
		x = 0
		y = 1
		relative_position_id = SOV_claim_on_bessarabia
		cost = 4
		available = {
			OR = {
				has_full_control_of_state = 188
				has_full_control_of_state = 189
				has_full_control_of_state = 968
				has_full_control_of_state = 97
				has_full_control_of_state = 94
				has_full_control_of_state = 93
				has_full_control_of_state = 91
				has_full_control_of_state = 89
				has_full_control_of_state = 80
				has_full_control_of_state = 78
				has_full_control_of_state = 766
			}
		}
		search_filters = {
			FOCUS_FILTER_STABILITY
		}
		completion_reward = {
			add_political_power = 100
			add_stability = 0.05
			custom_effect_tooltip = SOV_the_molotov_line_tt
			### LITHUANIA ###
			if = {
				#If Memel is controlled, then add forts in Memel, if not, then go to Zemaitija
				limit = {
					188 = {
						is_fully_controlled_by = ROOT
					}
				}
				#custom_effect_tooltip = SOV_molotov_line_forts_3			
				188 = {
					add_building_construction = {
						type = bunker
						level = 3
						province = {
							id = 3288
						}
						instant_build = yes
					}
				}
				189 = {
					add_building_construction = {
						type = bunker
						level = 3
						province = {
							id = 3337
						}
						instant_build = yes
					}
					hidden_effect = {
						add_building_construction = {
							type = air_base
							level = 2
							instant_build = yes
						}
					}
				}
				
			}
			else = {
				189 = {
					#ZEMAITIJA
					if = {
						limit = {
							is_fully_controlled_by = ROOT
						}
						#custom_effect_tooltip = SOV_molotov_line_forts_3
						
						add_building_construction = {
							type = bunker
							level = 3
							province = {
								id = 6314
								id = 9499
								id = 3337
							}
							instant_build = yes
						}
						hidden_effect = {
							add_building_construction = {
								type = air_base
								level = 2
								instant_build = yes
							}
						}
					}
				}
			}
			968 = {
				#Suduva
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					#custom_effect_tooltip = SOV_molotov_line_forts_2
					add_building_construction = {
						type = bunker
						level = 3
						province = {
							id = 6407
							id = 11312
							id = 6281
						}
						instant_build = yes
					}
				}
			}
			### POLAND ###
			97 = {
				#Bialystok
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					#custom_effect_tooltip = SOV_molotov_line_forts_6
					add_building_construction = {
						type = bunker
						level = 3
						province = {
							id = 347
							id = 11357
							id = 11329
							id = 11274
							id = 290
						}
						instant_build = yes
					}
					hidden_effect = {
						add_building_construction = {
							type = air_base
							level = 2
							instant_build = yes
						}
					}
				}
			}
			94 = {
				#Polesie
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					#custom_effect_tooltip = SOV_molotov_line_forts_2
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 3392
							id = 6546
						}
						instant_build = yes
					}
					hidden_effect = {
						add_building_construction = {
							type = air_base
							level = 2
							instant_build = yes
						}
					}
				}
			}
			93 = {
				#Wolyn
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					#custom_effect_tooltip = SOV_molotov_line_forts_2
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11441
							id = 422
						}
						instant_build = yes
					}
					hidden_effect = {
						add_building_construction = {
							type = air_base
							level = 2
							instant_build = yes
						}
					}
				}
			}
			91 = {
				#Lwow
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					#custom_effect_tooltip = SOV_molotov_line_forts_2
					add_building_construction = {
						type = bunker
						level = 4
						province = {
							id = 536
							id = 9468
							id = 11479
						}
						instant_build = yes
					}
					hidden_effect = {
						add_building_construction = {
							type = air_base
							level = 2
							instant_build = yes
						}
					}
				}
			}
			89 = {
				#Stanislawow
				if = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					#custom_effect_tooltip = SOV_molotov_line_forts_4
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 6431
						}
						instant_build = yes
					}
				}
			}
		}
	}
	focus = {
		id = SOV_claims_in_baltic
		icon = GFX_goal_generic_more_territorial_claims
		prerequisite = { focus = SOV_mol_rib_pact
		}
		x = -2
		y = 1
		relative_position_id = SOV_mol_rib_pact
		cost = 2
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_civil_war = yes
					date < 1939.1.1
				}
			}
		}
		available = {
			NOT = {
				has_country_flag = SOV_paranoia_system_active_flag
			}
			is_subject = no
		}
		bypass = {
			OR = {
				all_state = {
					OR = {
						is_core_of = EST
						is_core_of = LAT
						is_core_of = LIT
					}
					NOT = {
						state = 188
					}
					is_claimed_by = ROOT
				}
				all_state = {
					OR = {
						is_core_of = EST
						is_core_of = LAT
						is_core_of = LIT
					}
					NOT = {
						state = 188
					}
					is_controlled_by = ROOT
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			add_war_support = 0.05
			# Estonia
			custom_effect_tooltip = SOV_estonian_claimed_states_tt
			hidden_effect = {
				EST = {
					every_owned_state = {
						limit = {
							is_core_of = PREV
						}
						ROOT = {
							add_state_claim = PREV
						}
					}
				}
			}
			if = {
				limit = {
					EST = {
						NOT = {has_war_with = SOV}
						is_in_faction = no
					}
				}
				diplomatic_relation = {
					country = EST
					relation = non_aggression_pact
					active = yes
				}
				diplomatic_relation = {
					country = EST
					relation = military_access
					active = yes
				}
			}
			# Latvia
			custom_effect_tooltip = SOV_latvian_claimed_states_tt
			hidden_effect = {
				LAT = {
					every_owned_state = {
						limit = {
							is_core_of = PREV
						}
						ROOT = {
							add_state_claim = PREV
						}
					}
				}
			}
			if = {
				limit = {
					LAT = {
						NOT = {has_war_with = SOV}
						is_in_faction = no
					}
				}
				diplomatic_relation = {
					country = LAT
					relation = non_aggression_pact
					active = yes
				}
				diplomatic_relation = {
					country = LAT
					relation = military_access
					active = yes
				}
			}
			# Lithuania
			custom_effect_tooltip = SOV_lithuanian_claimed_states_tt
			hidden_effect = {
				LIT = {
					every_owned_state = {
						limit = {
							is_core_of = PREV
						}
						ROOT = {
							add_state_claim = PREV
						}
					}
				}
			}
			if = {
				limit = {
					LIT = {
						NOT = {has_war_with = SOV}
						is_in_faction = no
					}
				}
				diplomatic_relation = {
					country = LIT
					relation = non_aggression_pact
					active = yes
				}
				diplomatic_relation = {
					country = LIT
					relation = military_access
					active = yes
				}
			}
			unlock_decision_tooltip = SOV_estonian_ultimatum
			unlock_decision_tooltip = SOV_latvian_ultimatum
			unlock_decision_tooltip = SOV_lithuanian_ultimatum
			add_named_threat = {
				threat = 1
				name = SOV_claims_in_baltic
			}
		}
	}

	focus = {
		id = SOV_secure_leningrad
		icon = GFX_focus_generic_attack_finland
		prerequisite = { focus = SOV_mol_rib_pact }
		x = 2
		y = 1
		relative_position_id = SOV_mol_rib_pact
		cost = 2
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		dynamic = yes
		available = {
			NOT = {
				has_country_flag = SOV_paranoia_system_active_flag
			}
			is_subject = no
		}
		bypass = {
			OR = {
				owns_state = 146
				146 = {
					is_claimed_by = ROOT
				}
				has_full_control_of_state = 146
			}
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {
			add_state_claim = 146			# Karjala
			unlock_decision_tooltip = SOV_demand_karjala
		}
	}

	focus = {
		id = SOV_demand_balkan_submission
		icon = GFX_goal_generic_focus_on_balkans
		prerequisite = { focus = SOV_the_molotov_line }
		x = -1
		y = 1
		relative_position_id = SOV_the_molotov_line
		cost = 10
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		mutually_exclusive = {
			focus = SOV_seek_balkan_cooperation
		}
		available = {
			NOT = {
				has_country_flag = SOV_paranoia_system_active_flag
			}
			any_other_country = {
				BUL_is_balkan_nation = yes
			}
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			every_other_country = {
				limit = {
					BUL_is_balkan_nation = yes
				}
				add_timed_idea = {
					idea = communist_pressure
					days = 365
				}
				hidden_effect = {
					country_event = {
						id = generic.1
					}
				}
			}
			custom_effect_tooltip = SOV_demand_balkan_submission_decisions_tt
			hidden_effect = {
				activate_targeted_decision = {
					target = ROM
					decision = SOV_send_ultimatum_to_country_balkan
				}
				activate_targeted_decision = {
					target = BUL
					decision = SOV_send_ultimatum_to_country_balkan
				}
				activate_targeted_decision = {
					target = GRE
					decision = SOV_send_ultimatum_to_country_balkan
				}
				activate_targeted_decision = {
					target = YUG
					decision = SOV_send_ultimatum_to_country_balkan
				}
				activate_targeted_decision = {
					target = TUR
					decision = SOV_send_ultimatum_to_country_balkan
				}
			}
		}
	}
	focus = {
		id = SOV_seek_balkan_cooperation
		icon = GFX_focus_BUL_free_balkan_states
		prerequisite = { focus = SOV_the_molotov_line }
		x = 1
		y = 1
		relative_position_id = SOV_the_molotov_line
		cost = 10
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		mutually_exclusive = {
			focus = SOV_demand_balkan_submission
		}
		available = {
			NOT = {
				has_country_flag = SOV_paranoia_system_active_flag
			}
			any_other_country = {
				BUL_is_balkan_nation = yes
			}
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			every_other_country = {
				limit = {
					BUL_is_balkan_nation = yes
				}
				add_timed_idea = {
					idea = communist_pressure
					days = 365
				}
				hidden_effect = {
					country_event = {
						id = generic.1
					}
				}
			}
			custom_effect_tooltip = SOV_seek_balkan_cooperation_decisions_tt
			hidden_effect = {
				activate_targeted_decision = {
					target = ROM
					decision = SOV_pressure_country_government_balkan
				}
				activate_targeted_decision = {
					target = BUL
					decision = SOV_pressure_country_government_balkan
				}
				activate_targeted_decision = {
					target = GRE
					decision = SOV_pressure_country_government_balkan
				}
				activate_targeted_decision = {
					target = YUG
					decision = SOV_pressure_country_government_balkan
				}
				activate_targeted_decision = {
					target = TUR
					decision = SOV_pressure_country_government_balkan
				}
				activate_targeted_decision = {
					target = ROM
					decision = SOV_promote_ideology_rallies_balkan
				}
				activate_targeted_decision = {
					target = BUL
					decision = SOV_promote_ideology_rallies_balkan
				}
				activate_targeted_decision = {
					target = GRE
					decision = SOV_promote_ideology_rallies_balkan
				}
				activate_targeted_decision = {
					target = YUG
					decision = SOV_promote_ideology_rallies_balkan
				}
				activate_targeted_decision = {
					target = TUR
					decision = SOV_promote_ideology_rallies_balkan
				}
			}
		}
	}
	focus = {
		id = SOV_future_of_germany
		icon = GFX_goal_generic_german_question
		prerequisite = { focus = SOV_demand_balkan_submission focus = SOV_seek_balkan_cooperation }
		x = -1
		y = 1
		relative_position_id = SOV_demand_balkan_submission
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available = {
			NOT = {
				has_War_with = GER
			}
			GER = {
				exists = no
			}
			any_state = {
				is_core_of = GER
				is_controlled_by = SOV
			}
		}
		bypass = {
		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		completion_reward = {
			DDR = {
				add_state_core = 42
				add_state_core = 50
				add_state_core = 51
				add_state_core = 52
				add_state_core = 53
				add_state_core = 54
				add_state_core = 55
				add_state_core = 56
				add_state_core = 57
				add_state_core = 58
				add_state_core = 59
				add_state_core = 60
				add_state_core = 61
				add_state_core = 62
				add_state_core = 64
				add_state_core = 65
				add_state_core = 66
				add_state_core = 67
				add_state_core = 803
				add_state_core = 799
				add_state_core = 800
				add_state_core = 801
				add_state_core = 802
				add_state_core = 804
				add_state_core = 810
			}
			hidden_effect = {
				USA = {
					transfer_state = 526
				}
				USA = {
					transfer_state = 645
				}
				USA = {
					transfer_state = 863
				}
				USA = {
					transfer_state = 646
				}
				USA = {
					transfer_state = 648
				}
				SOV = {
					set_faction_name = COMINFORM
				}
			}
			release = DDR
			every_state = {
				limit = {
					is_core_of = DDR
					OR = {
						is_controlled_by = SOV
					}
				}
				DDR = {
					transfer_state = PREV
				}
			}
			SOV = {
				puppet = DDR
			}
			DDR = {
				set_popularities = {
					communism = 55
					democratic = 12
					fascism = 33
				}
				set_country_flag = soviet_technologies_tree_flag
			}
		}
	}
	focus = {
		id = SOV_european_buffer_zone
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = SOV_demand_balkan_submission focus = SOV_seek_balkan_cooperation }
		x = 1
		y = 1
		relative_position_id = SOV_demand_balkan_submission

		available = {
			NOT = {
				has_War_with = GER
				has_global_flag = soviet_union_defeated
			}
			has_global_flag = ww2_has_ended
		}

		cost = 20
		ai_will_do = {
			factor = 1
		}
		completion_reward = {
			if = {
				limit = {
					country_exists = ROM
					NOT = {
						ROM = {
							is_in_faction_with = SOV
						}
					}
					NOT = {
						ROM = {
							is_puppet_of = SOV
						}
					}
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ROM
				}
			}
			if = {
				limit = {
					NOT = {
						country_exists = ROM
					}
				}
				unlock_decision_tooltip = SOV_puppet_ROM
			}
			if = {
				limit = {
					country_exists = HUN
					NOT = {
						HUN = {
							is_in_faction_with = SOV
						}
					}
					NOT = {
						HUN = {
							is_puppet_of = SOV
						}
					}
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = HUN
				}
			}
			if = {
				limit = {
					NOT = {
						country_exists = HUN
					}
				}
				unlock_decision_tooltip = SOV_puppet_HUN
			}
			if = {
				limit = {
					country_exists = YUG
					NOT = {
						YUG = {
							is_in_faction_with = SOV
						}
					}
					NOT = {
						YUG = {
							is_puppet_of = SOV
						}
					}
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = YUG
				}
			}
			if = {
				limit = {
					NOT = {
						country_exists = YUG
					}
				}
				unlock_decision_tooltip = SOV_puppet_YUG
			}
			if = {
				limit = {
					country_exists = CZE
					NOT = {
						CZE = {
							is_in_faction_with = SOV
						}
					}
					NOT = {
						CZE = {
							is_puppet_of = SOV
						}
					}
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = CZE
				}
			}
			if = {
				limit = {
					NOT = {
						country_exists = CZE
					}
				}
				unlock_decision_tooltip = SOV_puppet_CZE
			}
			if = {
				limit = {
					country_exists = BUL
					NOT = {
						BUL = {
							is_in_faction_with = SOV
						}
					}
					NOT = {
						BUL = {
							is_puppet_of = SOV
						}
					}
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = BUL
				}
			}
			if = {
				limit = {
					NOT = {
						country_exists = BUL
					}
				}
				unlock_decision_tooltip = SOV_puppet_BUL
			}
			POL = {
				set_cosmetic_tag = POL_commie
			}
			CZE = {
				set_cosmetic_tag = CZE_commie
			}
			HUN = {
				set_cosmetic_tag = HUN_commie
			}
			ROM = {
				set_cosmetic_tag = ROM_commie
			}
			BUL = {
				set_cosmetic_tag = BUL_commie
			}
			YUG = {
				set_cosmetic_tag = YUG_commie
			}
		}
	}
	focus = {
		id = SOV_formation_ssr
		icon = GFX_goal_SOV_formation_ssr
		prerequisite = { focus = SOV_european_buffer_zone
		}
		available = {
			has_government = communism
		}
		x = 0
		y = 1
		relative_position_id = SOV_european_buffer_zone
		cost = 3
		ai_will_do = {
			factor = 1
		}
		completion_reward = {
			#unlock_decision_tooltip = SOV_ssr_denmark
			#unlock_decision_tooltip = SOV_ssr_finland
			#unlock_decision_tooltip = SOV_ssr_sweden
			#unlock_decision_tooltip = SOV_ssr_norway
			#unlock_decision_tooltip = SOV_ssr_belgium
			#unlock_decision_tooltip = SOV_ssr_netherlands
			#unlock_decision_tooltip = SOV_ssr_france
			#unlock_decision_tooltip = SOV_ssr_england
			#unlock_decision_tooltip = SOV_ssr_italy
			#unlock_decision_tooltip = SOV_ssr_turkey
			#unlock_decision_tooltip = SOV_ssr_spain
			#unlock_decision_tooltip = SOV_ssr_portugal
			#unlock_decision_tooltip = SOV_ssr_switzerland
		}
	}
	focus = {
		id = SOV_future_of_austria
		icon = GFX_goal_generic_austrian_question
		prerequisite = { focus = SOV_demand_balkan_submission focus = SOV_seek_balkan_cooperation }
		x = 3
		y = 1
		relative_position_id = SOV_demand_balkan_submission

		cost = 10
		ai_will_do = {
			factor = 1
		}
		available = {
		}
		bypass = {
		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		completion_reward = {
		}
	}
	### Eastern Diplo ###
	focus = {
		id = SOV_far_east_fortification
		icon = GFX_goal_fortify_the_westwall
		x = 7
		y = 0
		relative_position_id = SOV_policy_of_collective_security
		cost = 3
		available = {
		}
		search_filters = {

		}
		completion_reward = {
			563 = {
				#CHITA
				if = {
					limit = {
						is_controlled_by = ROOT
					}
					custom_effect_tooltip = SOV_far_east_fortification_forts_4
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 4719
								id = 12622
							}
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = {
								id = 10559
							}
							instant_build = yes
						}
					}
				}
			}
			561 = {
				#AMUR
				if = {
					limit = {
						is_controlled_by = ROOT
					}
					custom_effect_tooltip = SOV_far_east_fortification_forts_4
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 12543
								id = 7851
								id = 10678
							}
							instant_build = yes
						}
						add_building_construction = {
							#Set like this for stupid tooltip purposes
							type = bunker
							level = 1
							province = {
								id = 12657
							}
							instant_build = yes
						}
					}
				}
			}
			657 = {
				#BIROBIDZHAN
				if = {
					limit = {
						is_controlled_by = ROOT
					}
					custom_effect_tooltip = SOV_far_east_fortification_forts_10
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 10655
								id = 7801
								id = 10722
								id = 7672
							}
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = {
								id = 7763
								id = 4725
								id = 4805
							}
							instant_build = yes
						}
					}
				}
			}
			409 = {
				#KHABAROVSK
				if = {
					limit = {
						is_controlled_by = ROOT
					}
					custom_effect_tooltip = SOV_far_east_fortification_forts_4
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = {
								id = 12189
							}
							instant_build = yes
						}
						add_building_construction = {
							#Set like this for stupid tooltip purposes
							type = bunker
							level = 2
							province = {
								id = 10466
							}
							instant_build = yes
						}
					}
				}
			}
			408 = {
				#VLADIVOSTOK
				if = {
					limit = {
						is_controlled_by = ROOT
					}
					custom_effect_tooltip = SOV_far_east_fortification_forts_10
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 11643
								id = 6686
								id = 664
								id = 6684
								id = 3787
								id = 6838
							}
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = {
								id = 3977
								id = 957
							}
							instant_build = yes
						}
					}
				}
			}
			# Other possible Provinces
			#11879 (Border Conflict with Japan) 1755 (North Sakhalin)
		}
	}

	focus = {
		id = SOV_the_threat_from_the_land_of_the_rising_sun
		icon = GFX_focus_attack_japan
		prerequisite = { focus = SOV_far_east_fortification }
		x = 1
		y = 1
		relative_position_id = SOV_far_east_fortification
		cost = 1
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			any_country = {
				SOV_is_free_chinese_tag = yes
				has_war_with = JAP
			}
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			add_political_power = 25
			JAP = {
				add_opinion_modifier = {
					target = SOV
					modifier = SOV_supported_china_bad
				}
			}
			every_other_country = {
				limit = {
					SOV_is_free_chinese_tag = yes
				}
				if = {
					limit = {
						ROOT = {
							has_government = communism
						}
					}
					add_ideas = SOV_support_in_china_communism
				}
				else_if = {
					limit = {
						ROOT = {
							has_government = democratic
						}
					}
					add_ideas = SOV_support_in_china_democratic
				}
				else_if = {
					limit = {
						ROOT = {
							has_government = fascism
						}
					}
					add_ideas = SOV_support_in_china_fascism
				}
				else_if = {
					limit = {
						ROOT = {
							has_government = neutrality
						}
					}
					add_ideas = SOV_support_in_china_neutrality
				}
				add_opinion_modifier = {
					target = SOV
					modifier = SOV_supported_china_good
				}
			}
		}
	}
	focus = {
		id = SOV_the_gobi_gambit
		icon = GFX_focus_generic_befriend_sinkiang
		prerequisite = { focus = SOV_far_east_fortification }
		x = -1
		y = 1
		relative_position_id = SOV_far_east_fortification
		cost = 3
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			#SOV controls the states in which railway lines will be built
			controls_state = 405			#TASHKENT
			controls_state = 404			#KYZYL ORDA
			controls_state = 732			#PAMIR
			controls_state = 586			#ALMA-ATA
			OR = {
				AND = {
					#Relevant states under Soviet control
					controls_state = 617					#URUMQI
					controls_state = 618					#DZUNGARIA
				}
				SIK = {
					#Relevant states under Sinkiang control
					NOT = {
						has_war_with = ROOT
					}
					controls_state = 617					#URUMQI
					controls_state = 618					#DZUNGARIA
				}
			}
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			add_resource = {
				type = oil
				amount = 10
				state = 617
			}
			SIK = {
				add_popularity = {
					ideology = communism
					popularity = 1
				}
				give_resource_rights = {
					receiver = SOV
					state = 619
				}
				give_resource_rights = {
					receiver = SOV
					state = 617
				}
			}
			if = {
				#If SOV controls the relevant states (for whatever weird reason -.-), then insta-build
				limit = {
					controls_state = 617					#URUMQI
					controls_state = 618					#DZUNGARIA
				}
				# Tashkent - Frunze - Alma-Ata - Urumqi
				build_railway = {
					path = {
						1459
						10148
						4686
						12397
						12340
						12640
						7706
						12583
						4224
						1591
						4845
						12601
						7850
						4709
					}
				}
				#Supply Hub in Alma-Ata
				586 = {
					add_building_construction = {
						type = supply_node
						level = 1
						province = 1591
						instant_build = yes
					}
				}
				custom_effect_tooltip = SOV_sinkiang_decisions_available_tt
			}
			else = {
				#If SIK in control of them
				SIK = {
					country_event = {
						id = NSB_soviet_foreign_politics_events.270
						hours = 6
						random_hours = 6
					}
				}
				# IF THEY ACCEPT
				custom_effect_tooltip = if_they_accept_tt
				effect_tooltip = {
					add_opinion_modifier = {
						target = SIK
						modifier = SOV_complied_with_our_demands
					}
					# Tashkent - Frunze - Alma-Ata - Urumqi
					build_railway = {
						path = {
							1459
							10148
							4686
							12397
							12340
							12640
							7706
							12583
							4224
							1591
							4845
							12601
							7850
							4709
						}
					}
					#Supply Hub in Alma-Ata
					586 = {
						add_building_construction = {
							type = supply_node
							level = 1
							province = 1591
							instant_build = yes
						}
					}
					custom_effect_tooltip = SOV_sinkiang_decisions_available_tt
				}
				# IF THEY REFUSE
				custom_effect_tooltip = if_they_refuse_tt
				effect_tooltip = {
					add_opinion_modifier = {
						target = SIK
						modifier = SOV_rejected_our_demands
					}
					# Tashkent - Frunze - Alma-Ata
					build_railway = {
						path = {
							1459
							10148
							4686
							12397
							12340
							12640
							7706
							12583
							4224
							1591
						}
					}
					#Supply Hub in Alma-Ata
					586 = {
						add_building_construction = {
							type = supply_node
							level = 1
							province = 1591
							instant_build = yes
						}
					}
					custom_effect_tooltip = SOV_sinikiang_influence_refuse_tt
				}
			}
			#custom_effect_tooltip = SOV_volunteers_allowed_sinkiang_tt
		}
	}
	focus = {
		id = SOV_operation_zet
		icon = GFX_focus_chi_cooperation_with_the_nationalists
		mutually_exclusive = { focus = SOV_propose_a_soviet_republic focus = SOV_two_red_flags }
		prerequisite = { focus = SOV_the_threat_from_the_land_of_the_rising_sun }
		x = 0
		y = 1
		relative_position_id = SOV_the_threat_from_the_land_of_the_rising_sun
		cost = 2
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		bypass = {
			NOT = {
				country_exists = CHI
			}
		}
		available = {
			NOT = {
				has_completed_focus = SOV_the_left_opposition
			}
			CHI = {
				has_completed_focus = CHI_mission_to_the_soviet_union
			}
			NOT = {
				has_war_with = CHI
			}
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			custom_effect_tooltip = SOV_operation_zet_tt
			588 = {
				if = {
					limit = {
						CONTROLLER = {
							OR = {
								tag = SOV
								is_subject_of = SOV
							}
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			40 = {
				if = {
					limit = {
						CONTROLLER = {
							OR = {
								tag = SOV
								is_subject_of = SOV
							}
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
			}
			570 = {
				if = {
					limit = {
						CONTROLLER = {
							OR = {
								tag = SOV
								is_subject_of = SOV
							}
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
			}
			618 = {
				if = {
					limit = {
						OR = {
							CHI = { controls_state = 601 }
							any_other_country = {
								is_in_faction_with = CHI
								controls_state = 601
							}
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			760 = {
				if = {
					limit = {
						OR = {
							CHI = { controls_state = 601 }
							any_other_country = {
								is_in_faction_with = CHI
								controls_state = 601
							}
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			939 = {
				if = {
					limit = {
						OR = {
							CHI = { controls_state = 601 }
							any_other_country = {
								is_in_faction_with = CHI
								controls_state = 601
							}
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			283 = {
				if = {
					limit = {
						OR = {
							CHI = { controls_state = 601 }
							any_other_country = {
								is_in_faction_with = CHI
								controls_state = 601
							}
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			add_political_power = 25
			diplomatic_relation = {
				country = CHI
				relation = non_aggression_pact
				active = yes
			}
			set_rule = {
				can_send_volunteers = yes
			}
			CHI = {
				add_opinion_modifier = { target = SOV modifier = operation_zet_chi }
				country_event = chi_armor.855
			}
			JAP = {
				add_opinion_modifier = { target = SOV modifier = operation_zet_jap }
			}
		}
	}
	focus = {
		id = SOV_two_red_flags
		icon = GFX_focus_chi_cooperation_with_the_communists
		mutually_exclusive = { focus = SOV_propose_a_soviet_republic focus = SOV_operation_zet }
		prerequisite = { focus = SOV_the_threat_from_the_land_of_the_rising_sun }
		x = 2
		y = 1
		relative_position_id = SOV_the_threat_from_the_land_of_the_rising_sun
		cost = 8
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		bypass = {
			OR = {
				NOT = {
					country_exists = PRC
				}
				owns_state = 622
			}
		}
		available = {
			has_government = communism
			NOT = {
				has_war_with = PRC
			}
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			PRC = {
				add_opinion_modifier = {
					#Good relations with Mao
					target = ROOT
					modifier = SOV_cooperating_with_us
				}
				add_relation_modifier = {
					target = ROOT
					modifier = SOV_soviet_chinese_relations
				}
				every_other_country = {
					limit = {
						SOV_is_free_chinese_tag = yes
					}
					add_opinion_modifier = {
						#Bad Relations with other Chinese tags
						target = ROOT
						modifier = SOV_cooperating_with_other
					}
				}
			}
			activate_targeted_decision = {
				target = PRC
				decision = SOV_send_infantry_equipment_asia
			}
			custom_effect_tooltip = SOV_volunteers_allowed_mao_tt
		}
	}
	focus = {
		id = SOV_propose_a_soviet_republic
		icon = GFX_goal_SOV_formation_ssr
		prerequisite = { focus = SOV_the_threat_from_the_land_of_the_rising_sun }
		prerequisite = { focus = SOV_the_gobi_gambit }
		relative_position_id = SOV_the_threat_from_the_land_of_the_rising_sun
		mutually_exclusive = { focus = SOV_two_red_flags focus = SOV_operation_zet }
		x = -2
		y = 1

		cost = 10

		available = {
			OR = {
				AND = {
					#Relevant states under Soviet control
					controls_state = 617					#URUMQI
					controls_state = 618					#DZUNGARIA
				}
				SIK = {
					#Relevant states under Sinkiang control
					NOT = {
						has_war_with = ROOT
					}
					controls_state = 617					#URUMQI
					controls_state = 618					#DZUNGARIA
				}
			}
			is_subject = no
		}

		bypass = {
		}
		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_DIPLOMACY }

		completion_reward = {
			hidden_effect = {
				#Decrease SIK's desire to join Chinese faction (and other AI strategies)
				SOV_approach_sinkiang_diplomacy_effect = yes
				SIK = {
					add_ai_strategy = {
						#This is added in Proposing a repiblic + all 3 investment decisions
						type = alliance
						id = SOV
						value = 4
					}
				}
			}
			country_event = {
				id = soviet.82
			}
		}
	}
	focus = {
		id = SOV_development_aid_for_eastern_allies
		icon = GFX_goal_generic_construct_civilian
		prerequisite = { focus = SOV_the_gobi_gambit }
		x = -2
		y = 1
		relative_position_id = SOV_the_gobi_gambit
		cost = 4
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			any_allied_country = {
				capital_scope = {
					is_on_continent = asia
				}
				is_major = no
			}
			num_of_civilian_factories_available_for_projects > 2
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		select_effect = {
			add_ideas = SOV_development_of_eastern_allies
		}
		completion_reward = {
			#Tooltip purposes (Select Effect)
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				add_ideas = SOV_development_of_eastern_allies
			}
			#(Complete Effect)
			custom_effect_tooltip = SOV_focus_complete_effect_tt
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
					capital_scope = {
						is_on_continent = asia
					}
					is_major = no
				}
				country_event = {
					id = NSB_soviet_foreign_politics_events.10
					hours = 2
					random_hours = 1
				}
				custom_effect_tooltip = if_they_accept
				custom_effect_tooltip = SOV_development_aid_for_eastern_allies_tt
			}
			hidden_effect = {
				remove_ideas = SOV_development_of_eastern_allies
			}
		}
	}

	focus = {
		id = SOV_war_measures_in_the_east
		icon = GFX_focus_generic_little_entente
		prerequisite = { focus = SOV_development_aid_for_eastern_allies }
		x = 0
		y = 1
		relative_position_id = SOV_development_aid_for_eastern_allies
		cost = 4
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			custom_effect_tooltip = SOV_war_measures_scope_tt
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
					capital_scope = {
						is_on_continent = asia
					}
					is_major = no
				}
				country_event = {
					id = NSB_soviet_foreign_politics_events.11
					hours = 2
					random_hours = 1
				}
				custom_effect_tooltip = if_they_accept
				effect_tooltip = {
					add_timed_idea = {
						idea = SOV_war_measures_allies
						days = 1095
					}
				}
			}
		}
	}

	focus = {
		id = SOV_fortify_mongolian_border
		icon = GFX_goal_generic_construct_military
		prerequisite = { focus = SOV_war_measures_in_the_east }
		x = 2
		y = 1
		relative_position_id = SOV_war_measures_in_the_east
		cost = 3
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			MON = {
				is_in_faction_with = ROOT
				has_full_control_of_state = 330
				has_full_control_of_state = 954
				has_full_control_of_state = 789
			}
			is_subject = no
		}
		search_filters = {
		}
		completion_reward = {
			MON = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.12
					hours = 2
					random_hours = 1
				}
			}
			custom_effect_tooltip = if_they_accept
			custom_effect_tooltip = SOV_fortify_mongolian_border_forts_tt
		}
	}

	focus = {
		id = SOV_annex_tannu_tuva
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = SOV_war_measures_in_the_east
		}
		x = 0
		y = 1
		relative_position_id = SOV_war_measures_in_the_east
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
		completion_reward = {
			TAN = {
				country_event = {
					id = soviet.14
				}
			}
		}
	}
	focus = {
		id = SOV_secure_the_far_east
		icon = GFX_focus_usa_focus_on_asia
		prerequisite = { focus = SOV_two_red_flags focus = SOV_operation_zet focus = SOV_propose_a_soviet_republic }
		relative_position_id = SOV_operation_zet
		x = 0
		y = 1

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			has_global_flag = JAP_khalkhin_gol
			if = {
				limit = { is_ai = no }
				army_manpower_in_state = {
					state = 408
					amount > 104000
				}
				army_manpower_in_state = {
					state = 409
					amount > 26000
				}
				army_manpower_in_state = {
					state = 657
					amount > 91000
				}
				army_manpower_in_state = {
					state = 561
					amount > 52000
				}
				army_manpower_in_state = {
					state = 563
					amount > 65000
				}
			}
		}

		bypass = {
			NOT = {
				country_exists = JAP
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT }

		completion_reward = {
			add_war_support = 0.1
			add_stability = 0.1
			set_global_flag = siberia_secured
		}
	}
	focus = {
		id = SOV_prepare_a_war_with_japan
		icon = GFX_focus_AST_war_japan
		prerequisite = { focus = SOV_secure_the_far_east }
		x = 0
		y = 1
		relative_position_id = SOV_secure_the_far_east
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		bypass = {
			has_war_with = JAP
		}
		available = {
			surrender_progress < 0.01
			country_exists = JAP
			NOT = {
				JAP = {
					is_in_faction_with = ROOT
				}
			}
			is_subject = no
		}
		search_filters = {
		}
		completion_reward = {
			add_timed_idea = {
				idea = SOV_preparations_for_soviet_japanese_war
				days = 365
			}
			every_country = {
				limit = {
					is_in_faction_with = ROOT
					SOV_is_chinese_tag = yes
					is_in_faction_with = ROOT
				}
				hidden_effect = {
					country_event = NSB_soviet_foreign_politics_events.251
				}
				effect_tooltip = {
					add_timed_idea = {
						idea = SOV_preparations_for_soviet_japanese_war_china
						days = 365
					}
				}
			}
			#allows SOV_seize_manchuria decision
		}
	}
	focus = {
		id = SOV_end_the_khalkhin_gol_conflict
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = SOV_prepare_a_war_with_japan
		}
		x = 1
		y = 1
		relative_position_id = SOV_prepare_a_war_with_japan
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		mutually_exclusive = {
			focus = SOV_recover_the_kuril_islands
		}
		available = {
			surrender_progress < 0.01
			country_exists = JAP
			NOT = {
				is_in_faction_with = JAP
			}
			NOT = {
				has_war_together_with = JAP
			}
			761 = {
				#Hulunbuir
				controller = {
					NOT = {
						is_in_faction_with = ROOT
					}
				}
			}
			is_subject = no
		}
		search_filters = {
		}
		completion_reward = {
			custom_effect_tooltip = SOV_end_the_khalkhin_gol_conflict_wargoal_tt
			hidden_effect = {
				every_country = {
					limit = {
						OR = {
							tag = JAP
							AND = {
								SOV_is_chinese_tag = yes
								is_in_faction_with = JAP
							}
						}
					}
					ROOT = {
						create_wargoal = {
							type = puppet_wargoal_focus
							target = PREV
						}
					}
				}
			}
			add_state_claim = 761			#Hulunbuir
			if = {
				limit = {
					has_idea = SOV_preparations_for_soviet_japanese_war
				}
				remove_ideas = SOV_preparations_for_soviet_japanese_war
				every_country = {
					limit = {
						is_in_faction_with = ROOT
						has_idea = SOV_preparations_for_soviet_japanese_war_china
					}
					remove_ideas = SOV_preparations_for_soviet_japanese_war_china
				}
			}
			add_timed_idea = {
				idea = SOV_soviet_japanese_reckoning
				days = 180
			}
			every_country = {
				limit = {
					is_in_faction_with = ROOT
					OR = {
						SOV_is_chinese_tag = yes
						capital_scope = {
							is_on_continent = asia
						}
					}
				}
				hidden_effect = {
					country_event = NSB_soviet_foreign_politics_events.252
				}
				effect_tooltip = {
					add_timed_idea = {
						idea = SOV_soviet_japanese_reckoning_china
						days = 180
					}
				}
			}
			if = {
				limit = {
					is_in_faction_with = MON
					612 = {
						controller = {
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				MON = {
					add_state_claim = 612					#Chahar
					add_state_claim = 611					#South Chahar
				}
			}
		}
	}
	focus = {
		id = SOV_recover_the_kuril_islands
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = SOV_prepare_a_war_with_japan }
		x = -1
		y = 1
		relative_position_id = SOV_prepare_a_war_with_japan
		cost = 5
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		mutually_exclusive = {
			focus = SOV_end_the_khalkhin_gol_conflict
		}
		available = {
			surrender_progress < 0.01
			country_exists = JAP
			NOT = {
				JAP = {
					is_in_faction_with = ROOT
				}
			}
			JAP = {
				controls_state = 555
			}
			NOT = {
				has_war_with = JAP
			}
			is_subject = no
		}
		search_filters = {
		}
		completion_reward = {
			create_wargoal = {
				type = take_state_focus
				target = JAP
				expire = 0
				generator = {
					537
					555
				}
			}
			if = {
				limit = {
					has_idea = SOV_preparations_for_soviet_japanese_war
				}
				remove_ideas = SOV_preparations_for_soviet_japanese_war
				every_country = {
					limit = {
						is_in_faction_with = ROOT
						has_idea = SOV_preparations_for_soviet_japanese_war_china
					}
					remove_ideas = SOV_preparations_for_soviet_japanese_war_china
				}
			}
			add_timed_idea = {
				idea = SOV_soviet_japanese_reckoning
				days = 180
			}
			every_country = {
				limit = {
					is_in_faction_with = ROOT
					SOV_is_chinese_tag = yes
					is_in_faction_with = ROOT
				}
				hidden_effect = {
					country_event = NSB_soviet_foreign_politics_events.252
				}
				effect_tooltip = {
					add_timed_idea = {
						idea = SOV_soviet_japanese_reckoning_china
						days = 180
					}
				}
			}
			custom_effect_tooltip = SOV_recover_the_kuril_islands_decisions_tt
		}
	}
	focus = {
		id = SOV_middle_east_diplomacy
		icon = GFX_focus_TUR_treaty_of_saadabad
		prerequisite = { focus = SOV_policy_of_individual_security }
		x = 5
		y = 1
		relative_position_id = SOV_policy_of_individual_security
		cost = 4
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		bypass = {
			NOT = {
				country_exists = IRQ
				country_exists = PER
				country_exists = AFG
				country_exists = SAU
			}
		}
		available = {
			is_subject = no
		}
		search_filters = {
			FOCUS_FILTER_DIPLOMACY
		}
		completion_reward = {
			if = {
				limit = {
					country_exists = IRQ
				}
				IRQ = {
					if = {
						limit = {
							ROOT = {
								has_government = fascism
							}
						}
						add_timed_idea = {
							idea = fascist_influence_weak
							days = 1095
						}
					}
					if = {
						limit = {
							ROOT = {
								has_government = democratic
							}
						}
						add_timed_idea = {
							idea = democratic_influence_weak
							days = 1095
						}
					}
					if = {
						limit = {
							ROOT = {
								has_government = communism
							}
						}
						add_timed_idea = {
							idea = communist_influence_weak
							days = 1095
						}
					}
					hidden_effect = {
						country_event = {
							id = generic.1
						}
					}
				}
			}
			if = {
				limit = {
					country_exists = PER
				}
				PER = {
					if = {
						limit = {
							ROOT = {
								has_government = fascism
							}
						}
						add_timed_idea = {
							idea = fascist_influence_weak
							days = 1095
						}
					}
					if = {
						limit = {
							ROOT = {
								has_government = democratic
							}
						}
						add_timed_idea = {
							idea = democratic_influence_weak
							days = 1095
						}
					}
					if = {
						limit = {
							ROOT = {
								has_government = communism
							}
						}
						add_timed_idea = {
							idea = communist_influence_weak
							days = 1095
						}
					}
					hidden_effect = {
						country_event = {
							id = generic.1
						}
					}
				}
			}
			if = {
				limit = {
					country_exists = AFG
				}
				AFG = {
					if = {
						limit = {
							ROOT = {
								has_government = fascism
							}
						}
						add_timed_idea = {
							idea = fascist_influence_weak
							days = 1095
						}
					}
					if = {
						limit = {
							ROOT = {
								has_government = democratic
							}
						}
						add_timed_idea = {
							idea = democratic_influence_weak
							days = 1095
						}
					}
					if = {
						limit = {
							ROOT = {
								has_government = communism
							}
						}
						add_timed_idea = {
							idea = communist_influence_weak
							days = 1095
						}
					}
					hidden_effect = {
						country_event = {
							id = generic.1
						}
					}
				}
			}
			if = {
				limit = {
					country_exists = SAU
				}
				SAU = {
					if = {
						limit = {
							ROOT = {
								has_government = fascism
							}
						}
						add_timed_idea = {
							idea = fascist_influence_weak
							days = 1095
						}
					}
					if = {
						limit = {
							ROOT = {
								has_government = democratic
							}
						}
						add_timed_idea = {
							idea = democratic_influence_weak
							days = 1095
						}
					}
					if = {
						limit = {
							ROOT = {
								has_government = communism
							}
						}
						add_timed_idea = {
							idea = communist_influence_weak
							days = 1095
						}
					}
					hidden_effect = {
						country_event = {
							id = generic.1
						}
					}
				}
			}
		}
	}
	focus = {
		id = SOV_the_southern_thrust
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = SOV_middle_east_diplomacy
		}
		x = -1
		y = 1
		relative_position_id = SOV_middle_east_diplomacy
		cost = 10
		ai_will_do = {
			factor = 1
			modifier = {
				has_war_with = GER
				factor = 0
			}
			modifier = {
				factor = 0
				has_civil_war = yes
			}
			modifier = {
				AND = {
					has_war_with = ENG
					surrender_progress > 0.3
				}
				factor = 0
			}
			modifier = {
				has_war_with = RAJ
				factor = 5
			}
		}
		bypass = {
			PER = {
				NOT = {
					owns_state = 419
				}
				NOT = {
					owns_state = 420
				}
				NOT = {
					owns_state = 266
				}
				NOT = {
					owns_state = 416
				}
			}
			IRQ = {
				NOT = {
					owns_state = 676
				}
				NOT = {
					owns_state = 291
				}
			}
			AFG = {
				NOT = {
					owns_state = 267
				}
				NOT = {
					owns_state = 415
				}
			}
		}
		available = {
			OR = {
				country_exists = IRQ
				country_exists = PER
				country_exists = AFG
				country_exists = SAU
			}
			is_subject = no
		}
		mutually_exclusive = {
			focus = SOV_support_afghan_ideology
		}
		will_lead_to_war_with = PER
		will_lead_to_war_with = IRQ
		will_lead_to_war_with = AFG
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
		completion_reward = {
			if = {
				limit = {
					PER = {
						OR = {
							owns_state = 419
							owns_state = 420
							owns_state = 266
							owns_state = 416
						}
					}
				}
				create_wargoal = {
					type = take_state_focus
					target = PER
					expire = 0
					generator = {
						419
						420
						266
						416
					}
				}
			}
			if = {
				limit = {
					IRQ = {
						OR = {
							owns_state = 676
							owns_state = 291
						}
					}
				}
				create_wargoal = {
					type = take_state_focus
					target = IRQ
					expire = 0
					generator = {
						676
						291
					}
				}
			}
			if = {
				limit = {
					AFG = {
						OR = {
							owns_state = 267
							owns_state = 415
						}
					}
				}
				create_wargoal = {
					type = take_state_focus
					target = AFG
					expire = 0
					generator = {
						267
						415
					}
				}
			}
			ENG = {
				add_opinion_modifier = {
					target = SOV
					modifier = middle_east_expansionism
				}
			}
			FRA = {
				add_opinion_modifier = {
					target = SOV
					modifier = middle_east_expansionism
				}
			}
			USA = {
				add_opinion_modifier = {
					target = SOV
					modifier = middle_east_expansionism
				}
			}
		}
	}
	focus = {
		id = SOV_the_khakimov_proposal
		icon = GFX_focus_generic_befriend_saudi_arabia
		prerequisite = { focus = SOV_the_southern_thrust
		}
		x = 0
		y = 1
		relative_position_id = SOV_the_southern_thrust
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			is_subject = no
			country_exists = SAU
			NOT = {
				has_war_with = SAU
			}
		}
		search_filters = {
		}
		completion_reward = {
			SAU = {
				add_ideas = SOV_ambassador_karim_khakimov				#adds +35 communism acceptance and -50 for other ideologies
				add_opinion_modifier = {
					target = SOV
					modifier = SOV_cordial_relations_developed_by_soviet_diplomat
				}
				hidden_effect = {
					country_event = {
						id = NSB_soviet_foreign_politics_events.211
						hours = 8
						random_hours = 4
					}
				}
			}
			activate_targeted_decision = {
				target = SAU
				decision = SOV_pressure_country_government_middle_east
			}
			activate_targeted_decision = {
				target = SAU
				decision = SOV_promote_ideology_rallies_middle_east
			}
		}
	}
	focus = {
		id = SOV_support_afghan_ideology
		icon = GFX_focus_generic_befriend_afghanistan
		prerequisite = { focus = SOV_middle_east_diplomacy
		}
		x = 1
		y = 1
		relative_position_id = SOV_middle_east_diplomacy
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		mutually_exclusive = {
			focus = SOV_the_southern_thrust
		}
		bypass = {
			NOT = {
				country_exists = AFG
			}
		}
		available = {
			NOT = {
				has_war_with = AFG
			}
			is_subject = no
		}
		search_filters = {
		}
		completion_reward = {
			activate_targeted_decision = {
				target = AFG
				decision = SOV_pressure_country_government_middle_east
			}
			activate_targeted_decision = {
				target = AFG
				decision = SOV_promote_ideology_rallies_middle_east
			}
		}
	}
	focus = {
		id = SOV_preemptive_invasion_of_iran
		icon = GFX_focus_generic_attack_iran
		prerequisite = { focus = SOV_support_afghan_ideology
		}
		x = 0
		y = 1
		relative_position_id = SOV_support_afghan_ideology
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
		}
		available = {
			NOT = { has_country_flag = soviet_union_defeated }
			country_exists = PER
			NOT = {
				has_war_with = PER
			}
			is_subject = no
			any_enemy_country = {
				is_major = yes
			}
		}
		search_filters = {
		}
		completion_reward = {
			PER = {
				set_country_flag = SOV_ultimatum_sent_flag
				country_event = {
					id = NSB_soviet_foreign_politics_events.210
					hours = 16
					random_hours = 8
				}
			}
			effect_tooltip = {
				custom_effect_tooltip = if_they_accept_tt
				ROOT = {
					puppet = PER
				}
				custom_effect_tooltip = if_they_refuse_tt
				effect_tooltip = {
					activate_mission = SOV_preparations_for_operation_countenance
					custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt
				}
				custom_effect_tooltip = SOV_preemptive_invasion_of_iran_tt
			}
		}
	}
	focus = {
		id = SOV_claims_against_turkey
		icon = GFX_focus_generic_attack_turkey
		prerequisite = { focus = SOV_preemptive_invasion_of_iran focus = SOV_the_khakimov_proposal }
		relative_position_id = SOV_preemptive_invasion_of_iran
		x = -1
		y = 1

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			has_defensive_war = no
			TUR = {
				exists = yes
				NOT = { has_war_with = SOV }
			}
		}

		bypass = {
			OR = {
				TUR = {
					exists = no
					has_war_with = SOV
				}
				AND = {
					owns_state = 354
					owns_state = 352
				}
			}
			
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }

		completion_reward = {
			hidden_effect = {
				TUR = {
					354 = {
						ROOT = {
							add_state_claim = PREV
						}
					}
					352 = {
						ROOT = {
							add_state_claim = PREV
						}
					}
				}
			}
			add_named_threat = {
				threat = 1
				name = SOV_claims_against_turkey
			}
			country_event = {
				id = soviet.78
			}
		}
	}
	
	############## INTERNAL BRANCH ###############

	focus = {
		id = SOV_new_soviet_person
		icon = GFX_goal_SOV_new_soviet_society
		prerequisite = { 	focus = SOV_socialism_in_one_country }
		relative_position_id = SOV_socialism_in_one_country
		x = 4
		y = 1
		cost = 4
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			add_stability = 0.05
			add_political_power = 50
			add_ideas = mandatory_army_service
			add_ideas = women_in_the_workforce

			custom_effect_tooltip = SOV_new_soviet_person_tt
			hidden_effect = {
				subtract_from_variable = {
					SOV_Peasants_influence = 1
				}
				SOV_political_instability_update_effect = yes
			}
		}
	}
	focus = {
		id = SOV_socialist_realism
		icon = GFX_goal_support_communism
		prerequisite = { focus = SOV_new_soviet_person }
		x = -2
		y = 1
		relative_position_id = SOV_new_soviet_person
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			country_event = {
				id = sov_armor.804
			}
		}
	}
	focus = {
		id = SOV_militarized_schools
		icon = GFX_goal_generic_military_academy
		prerequisite = { focus = SOV_new_soviet_person }
		x = 2
		y = 1
		relative_position_id = SOV_new_soviet_person
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			add_ideas = militarized_schools
		}
	}
	focus = {
		id = SOV_social_militarism
		icon = GFX_goal_GER_prussia_militarism
		prerequisite = { focus = SOV_militarized_schools }
		x = 0
		y = 1
		relative_position_id = SOV_militarized_schools
		cost = 3
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			swap_ideas = {
				remove_idea = militarized_schools
				add_idea = militarized_schools_2
			}
		}
	}
	focus = {
		id = SOV_expand_the_agitprop
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = SOV_new_soviet_person }
		x = 0
		y = 1
		relative_position_id = SOV_new_soviet_person
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_PROPAGANDA
		}
		completion_reward = {
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
			#	hidden_effect = {
			#		SOV_unlock_propaganda_campaign_slot_effect = yes
			#	}
			custom_effect_tooltip = unlock_propaganda_campaign_tt
		}
	}

	focus = {
		id = SOV_revive_the_stakhanovite_movement
		icon = GFX_goal_generic_construction2
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = 0
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			add_ideas = SOV_stakhanovite_movement
		}
	}

	focus = {
		id = SOV_expand_komsomol_memebership
		icon = GFX_focus_generic_join_comintern
		prerequisite = { focus = SOV_revive_the_stakhanovite_movement }
		x = 0
		y = 1
		relative_position_id = SOV_revive_the_stakhanovite_movement
		cost = 4
		available = {
			OR = {
				owns_state = 91
				owns_state = 93
				owns_state = 94
				owns_state = 95
				owns_state = 96
				owns_state = 89
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_PROPAGANDA
		}
		completion_reward = {
			add_political_power = 100
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
			custom_effect_tooltip = SOV_expand_komsomol_memebership_tt
			hidden_effect = {
				add_to_variable = {
					SOV_Workers_influence = 2
				}
				add_to_variable = {
					SOV_Workers_attitude = 1
				}
				SOV_political_instability_update_effect = yes
			}
			economy_fatigue_level_down_3 = yes
			#	custom_effect_tooltip = unlock_propaganda_campaign_tt
			#	unlock_decision_tooltip = SOV_propaganda_knowledge
			#	unlock_decision_tooltip = SOV_propaganda_builders_of_communism
			#	unlock_decision_tooltip = SOV_propaganda_sweep_scum_out
			#	custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			#	SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	focus = {
		id = SOV_defense_of_the_motherland
		icon = GFX_focus_SOV_the_defense_of_moscow
		prerequisite = { focus = SOV_expand_komsomol_memebership }
		x = -1
		y = 1
		relative_position_id = SOV_expand_komsomol_memebership
		available = {
			surrender_progress > 0.3
			OR = {
				219 = {
					is_owned_and_controlled_by = SOV
				}
				195 = {
					is_owned_and_controlled_by = SOV
				}
				217 = {
					is_owned_and_controlled_by = SOV
				}
			}
		}
		cost = 3
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 10
				has_war = yes
			}
		}
		search_filters = {
			FOCUS_FILTER_EMERGENCY
		}

		completion_reward = {
			if = {
				limit = {
					219 = {
						is_controlled_by = SOV
					}
				}
				219 = {
					custom_effect_tooltip = SOV_defense_of_the_motherland_forts
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 3391
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 6
							province = 13394
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 9348
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 6
							province = 301
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 13395
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 6348
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 6290
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 9282
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 9302
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 3358
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 6
							province = 3259
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 11282
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 6380
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 13236
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 13237
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 13238
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 13239
							instant_build = yes
						}
						add_building_construction = {
							type = anti_air_building
							level = 7
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = {
					217 = {
						is_controlled_by = SOV
					}
				}
				217 = {
					hidden_effect = {
						add_building_construction = {
							type = anti_air_building
							level = 7
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 7
							province = 13232
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 7
							province = 13234
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 7
							province = 3529
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 7
							province = 13235
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11484
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11474
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 520
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = {
					195 = {
						is_controlled_by = SOV
					}
				}
				195 = {
					hidden_effect = {
						add_building_construction = {
							type = anti_air_building
							level = 7
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 7
							province = 13241
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 7
							province = 3151
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 7
							province = 13243
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 149
							instant_build = yes
						}
					}
				}
			}
		}
	}

	focus = {
		id = SOV_patriarch_of_all_russia
		icon = GFX_focus_SOV_patriarch_of_all_russia
		prerequisite = { focus = SOV_expand_komsomol_memebership }
		x = 1
		y = 1
		relative_position_id = SOV_expand_komsomol_memebership
		cost = 4
		available = {
			surrender_progress > 0.24
			any_enemy_country = {
				is_major = yes
			}
		}
		search_filters = {
			FOCUS_FILTER_STABILITY
			FOCUS_FILTER_EMERGENCY
		}
		completion_reward = {
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.1
			}
			custom_effect_tooltip = SOV_reestablish_the_Patriarchate_tt
			hidden_effect = {
				set_variable = {
					SOV_Peasants_stability = 2
				}
				set_variable = {
					SOV_Peasants_attitude = 2
				}
				add_to_variable = {
					SOV_Peasants_influence = 2
				}
				SOV_political_instability_update_effect = yes
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_patriarch_sergy
		}
	}

	############################################
	############### STALIN BRANCH ##############
	############################################

	focus = {
		id = SOV_socialism_in_one_country
		icon = GFX_focus_SOV_socialism_in_one_country
		x = 58
		y = 0
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_SOV_POLITICAL_PARANOIA
		}
		completion_reward = {
			add_to_variable = {
				SOV_the_politburo_communism_drift = 0.05
			}
			add_to_variable = {
				SOV_the_politburo_drift_defence_factor = 0.05
			}
			custom_effect_tooltip = SOV_socialism_in_one_country_tt
			SOV_paranoia_low_decrease_effect = yes
			add_ideas = SOV_socialist_emulation_1_ns
		}
	}
	focus = {
		id = SOV_the_stalin_constitution
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = SOV_socialism_in_one_country
		}
		x = 0
		y = 1
		relative_position_id = SOV_socialism_in_one_country
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_SOV_POLITICAL_PARANOIA
			FOCUS_FILTER_STABILITY
		}
		completion_reward = {
			add_to_variable = {
				SOV_the_politburo_political_power_factor = 0.05
			}
			add_to_variable = {
				SOV_the_politburo_drift_defence_factor = 0.05
			}
			custom_effect_tooltip = SOV_the_stalin_constitution_ns_tt
			add_stability = 0.05
			add_timed_idea = {
				idea = celebration_of_the_constitution
				days = 42
			}
			SOV_paranoia_low_decrease_effect = yes
		}
	}
	focus = {
		id = SOV_stalins_cult_of_personality
		icon = GFX_focus_SOV_stalins_cult_of_personality
		prerequisite = { focus = SOV_the_stalin_constitution }
		x = 0
		y = 1
		relative_position_id = SOV_the_stalin_constitution
		cost = 3
		available = {
			has_country_flag = {
				flag = SOV_third_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_cult_tt
				has_country_flag = {
					flag = SOV_third_moscow_trial_flag
					days > 175
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_PROPAGANDA
		}
		completion_reward = {
			add_political_power = 25
			add_country_leader_trait = personality_cult
			swap_ideas = {
				remove_idea = fear_from_the_purge
				add_idea = fear_from_the_purge_2
			}
			custom_effect_tooltip = unlock_propaganda_campaign_tt
			#unlock_decision_tooltip = SOV_propaganda_stalin
			custom_effect_tooltip = propaganda_campaign_requirement_tt
		}
	}
	focus = {
		id = SOV_inheritor_of_the_mantle_of_lenin
		icon = GFX_focus_generic_support_the_left_right
		prerequisite = { focus = SOV_stalins_cult_of_personality
		}
		x = -1
		y = 1
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 5
		mutually_exclusive = {
			focus = SOV_the_faithful_servant_of_lenin
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_5_or_greater_tt
				check_variable = {
					SOV_propaganda_campaigns_taken = 5
					compare = greater_than_or_equals
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_WAR_SUPPORT
		}
		completion_reward = {
			add_war_support = 0.05
			add_country_leader_trait = stalin_inheritor_of_lenin
		}
	}
	focus = {
		id = SOV_brilliant_genius
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = SOV_inheritor_of_the_mantle_of_lenin
		}
		x = -1
		y = 1
		relative_position_id = SOV_inheritor_of_the_mantle_of_lenin
		cost = 10
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = {
					SOV_propaganda_campaigns_taken = 10
					compare = greater_than_or_equals
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
		completion_reward = {
			#Academies of Sciences decisions are 50% cheaper
			divide_variable = {
				SOV_national_academy_of_sciences_construction_cost = 2
			}
			custom_effect_tooltip = SOV_brilliant_genius_academies_of_sciences_tt
			if = {
				limit = {
					has_completed_focus = SOV_leader_of_the_party_and_the_people
				}
				swap_ruler_traits = {
					remove = stalin_inheritor_of_lenin_leader
					add = stalin_inheritor_of_lenin_final
				}
			}
			else = {
				swap_ruler_traits = {
					remove = stalin_inheritor_of_lenin
					add = stalin_inheritor_of_lenin_genius
				}
			}
		}
	}
	focus = {
		id = SOV_the_faithful_servant_of_lenin
		icon = GFX_goal_generic_neutrality_focus
		prerequisite = { focus = SOV_stalins_cult_of_personality
		}
		x = 1
		y = 1
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 5
		mutually_exclusive = {
			focus = SOV_inheritor_of_the_mantle_of_lenin
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_5_or_greater_tt
				check_variable = {
					SOV_propaganda_campaigns_taken = 5
					compare = greater_than_or_equals
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_STABILITY
		}
		completion_reward = {
			add_stability = 0.1
			add_country_leader_trait = stalin_servant_of_lenin
		}
	}
	focus = {
		id = SOV_ban_excessive_hero_worship
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SOV_the_faithful_servant_of_lenin
		}
		x = 1
		y = 1
		relative_position_id = SOV_the_faithful_servant_of_lenin
		cost = 10
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = {
					SOV_propaganda_campaigns_taken = 10
					compare = greater_than_or_equals
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
		completion_reward = {
			custom_effect_tooltip = SOV_ban_excessive_hero_worship_dec_cost_tt
			SOV_foreign_politics_decision_cost_reduction_effect = yes
			if = {
				limit = {
					has_completed_focus = SOV_leader_of_the_party_and_the_people
				}
				swap_ruler_traits = {
					remove = stalin_servant_of_lenin_leader
					add = stalin_servant_of_lenin_final
				}
			}
			else = {
				swap_ruler_traits = {
					remove = stalin_servant_of_lenin
					add = stalin_servant_of_lenin_worship
				}
			}
		}
	}
	focus = {
		id = SOV_leader_of_the_party_and_the_people
		icon = GFX_focus_YUG_pan_slavic_congress
		prerequisite = { focus = SOV_inheritor_of_the_mantle_of_lenin focus = SOV_the_faithful_servant_of_lenin }
		x = 1
		y = 1
		relative_position_id = SOV_inheritor_of_the_mantle_of_lenin
		cost = 5
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = {
					SOV_propaganda_campaigns_taken = 10
					compare = greater_than_or_equals
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
		completion_reward = {
			add_political_power = 50
			#Swap Stalin's Trait
			if = {
				#INHERITOR BRANCH
				limit = {
					has_completed_focus = SOV_inheritor_of_the_mantle_of_lenin
				}
				if = {
					limit = {
						has_completed_focus = SOV_brilliant_genius
					}
					swap_ruler_traits = {
						remove = stalin_inheritor_of_lenin_genius
						add = stalin_inheritor_of_lenin_final
					}
				}
				else = {
					swap_ruler_traits = {
						remove = stalin_inheritor_of_lenin
						add = stalin_inheritor_of_lenin_leader
					}
				}
			}
			else_if = {
				#SERVANT BRANCH
				limit = {
					has_completed_focus = SOV_the_faithful_servant_of_lenin
				}
				if = {
					limit = {
						has_completed_focus = SOV_ban_excessive_hero_worship
					}
					swap_ruler_traits = {
						remove = stalin_servant_of_lenin_worship
						add = stalin_servant_of_lenin_final
					}
				}
				else = {
					swap_ruler_traits = {
						remove = stalin_servant_of_lenin
						add = stalin_servant_of_lenin_leader
					}
				}
			}
			else = {
				custom_effect_tooltip = SOV_leader_of_the_party_and_the_people_trait_tt
			}
		}
	}
	focus = {
		id = SOV_great_commander
		icon = GFX_focus_generic_military_dictatorship
		prerequisite = { focus = SOV_inheritor_of_the_mantle_of_lenin
		}
		prerequisite = { focus = SOV_leader_of_the_party_and_the_people
		}
		x = -1
		y = 1
		relative_position_id = SOV_leader_of_the_party_and_the_people
		cost = 5
		mutually_exclusive = {
			focus = SOV_architect_of_communism
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_15_or_greater_tt
				check_variable = {
					SOV_propaganda_campaigns_taken = 15
					compare = greater_than_or_equals
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_WAR_SUPPORT
		}
		completion_reward = {
			add_country_leader_trait = stalin_great_commander
			add_field_marshal_role = {
				character = "SOV_iosif_stalin"
				traits = {
					old_guard
					politically_connected
					media_personality
					harsh_leader
				}
				skill = 3
				attack_skill = 1
				defense_skill = 3
				planning_skill = 3
				logistics_skill = 3
				legacy_id = 0
			}
		}
	}
	focus = {
		id = SOV_architect_of_communism
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_the_faithful_servant_of_lenin
		}
		prerequisite = { focus = SOV_leader_of_the_party_and_the_people
		}
		x = 1
		y = 1
		relative_position_id = SOV_leader_of_the_party_and_the_people
		cost = 5
		mutually_exclusive = {
			focus = SOV_great_commander
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_15_or_greater_tt
				check_variable = {
					SOV_propaganda_campaigns_taken = 15
					compare = greater_than_or_equals
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			add_country_leader_trait = stalin_architect_of_communism
		}
	}
	focus = {
		id = SOV_father_of_nations
		icon = GFX_focus_SOV_father_of_nations
		prerequisite = { focus = SOV_great_commander
			focus = SOV_architect_of_communism
		}
		x = 1
		y = 1
		relative_position_id = SOV_great_commander
		cost = 10
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_20_or_greater_tt
				check_variable = {
					SOV_propaganda_campaigns_taken = 20
					compare = greater_than_or_equals
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_MANPOWER
			FOCUS_FILTER_STABILITY
		}
		completion_reward = {
			swap_ruler_traits = {
				remove = stalin_heart_of_steel
				add = stalin_father_of_nations
			}
			hidden_effect = {
				play_song = "comintern_war_1"		#TODO_Manu: Too abrupt (just like speeches) -> Pending feedback for removal
			}
		}
	}

	focus = {
		id = SOV_great_purge
		icon = GFX_goal_GER_anti_comintern_pact
		prerequisite = { focus = SOV_socialism_in_one_country }
		x = -4
		y = 1
		relative_position_id = SOV_socialism_in_one_country
		available = {
			NOT = {
				has_country_flag = counter_purge
			}
			has_government = communism
			date > 1936.7.1
		}
		cost = 5
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		bypass = {
			custom_trigger_tooltip = {
				tooltip = SOV_great_purge_bypass_tt
				has_country_flag = counter_purge
			}
			NOT = {
				has_country_leader = {
					ruling_only = yes
					name = "Leon Trotsky"
				}
			}
		}
		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag			#This focus cannot be canceled
			country_event = {
			 	id = soviet.24
			 	days = 3
			}
			set_country_flag = SOV_purge_started
		}
		completion_reward = {
			add_ideas = SOV_politicized_military
			add_timed_idea = {
				idea = officers_purged
				days = 1910
			}
			hidden_effect = {
				country_event = {
					id = soviet.37
					days = 111
				}
			}
			remove_ideas = trotskyite_plot_nsb
			add_ideas = trotskyite_plot_purged
			add_ideas = fear_from_the_purge
			add_ideas = power_cemented
			custom_effect_tooltip = SOV_great_purge_tt3
			hidden_effect = {
				subtract_from_variable = {
					var = SOV_Army_political_power_gain
					value = 3
				}
				subtract_from_variable = {
					var = SOV_Army_influence
					value = 3
				}
				SOV_political_instability_update_effect = yes
			}
		}
	}
	focus = {
		id = SOV_the_zinovyevite_terrorist_center
		icon = GFX_focus_SOV_purge_zinovyevists
		prerequisite = { focus = SOV_great_purge
		}
		x = 0
		y = 1
		relative_position_id = SOV_great_purge
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_SOV_POLITICAL_PARANOIA
		}
		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag			#This focus cannot be canceled
		}
		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = {
				flag = SOV_paranoia_random_purge_cooldown_from_focus_flag
				days = 15
			}
			#Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_first_moscow_trial_flag			#Used to unlock the next purge focus
			SOV_paranoia_high_increase_effect = yes
			#HISTORICAL
			#Zinovyev
			if = {
				limit = {
					has_character = SOV_grigory_zinovyev
				}
				SOV_grigory_zinovyev = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Kamenev
			if = {
				limit = {
					has_character = SOV_lev_kamenev
				}
				SOV_lev_kamenev = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Smirnov
			if = {
				limit = {
					has_character = SOV_ivan_smirnov
				}
				SOV_ivan_smirnov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#NOT-SO-HISTORICAL
			#Sokolnikov
			if = {
				limit = {
					has_character = SOV_grigory_sokolnikov
				}
				SOV_grigory_sokolnikov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Shlyapnikov
			if = {
				limit = {
					has_character = SOV_aleksandr_shlyapnikov
				}
				SOV_aleksandr_shlyapnikov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag				#No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_trigger_great_purge_moscow_trial_effect = yes				#FIRST MOSCOW TRIAL -> Zinovyev & friends
			}
			custom_effect_tooltip = SOV_trigger_first_moscow_trial_tt
		}
	}
	focus = {
		id = SOV_the_anti_soviet_trotskyist_center
		icon = GFX_focus_SOV_purge_trotskyists
		prerequisite = { focus = SOV_the_zinovyevite_terrorist_center
		}
		x = 0
		y = 1
		relative_position_id = SOV_the_zinovyevite_terrorist_center
		cost = 3
		available = {
			has_country_flag = {
				flag = SOV_first_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_tt
				has_country_flag = {
					flag = SOV_first_moscow_trial_flag
					days > 175
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_SOV_POLITICAL_PARANOIA
		}
		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag			#This focus cannot be canceled
		}
		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = {
				flag = SOV_paranoia_random_purge_cooldown_from_focus_flag
				days = 15
			}
			#Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_second_moscow_trial_flag			#Used to unlock the next purge focus
			SOV_paranoia_high_increase_effect = yes
			#HISTORICAL
			#Radek
			if = {
				limit = {
					has_character = SOV_karl_radek
				}
				SOV_karl_radek = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#NOT-SO-HISTORICAL
			#Smilga
			if = {
				limit = {
					has_character = SOV_ivar_smilga
				}
				SOV_ivar_smilga = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Preobrazhensky
			if = {
				limit = {
					has_character = SOV_yevgeny_preobrazhensky
				}
				SOV_yevgeny_preobrazhensky = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Ryutin
			if = {
				limit = {
					has_character = SOV_martemyan_ryutin
				}
				SOV_martemyan_ryutin = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Ustryalov
			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				if = {
					limit = {
						has_character = SOV_nikolay_ustryalov
					}
					SOV_nikolay_ustryalov = {
						set_character_flag = SOV_targeted_for_purge_flag
					}
				}
				else = {
					SOV_add_random_character_to_purge_targets_effect = yes
				}
			}
			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag				#No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_trigger_great_purge_moscow_trial_effect = yes				#SECOND MOSCOW TRIAL -> Left Opposition
			}
			custom_effect_tooltip = SOV_trigger_second_moscow_trial_tt
			hidden_effect = {
				swap_ruler_traits = {
					remove = stalin_political_paranoia
					add = stalin_political_paranoia_advanced
				}
				add_to_variable = {
					SOV_paranoia_weekly_modifiers_amount = 1
				}
				SOV_paranoia_modifier_update_gui_tooltip = yes
			}
			custom_effect_tooltip = SOV_increase_weekly_paranoia_in_trait_tt
		}
	}
	focus = {
		id = SOV_the_military_conspiracy
		icon = GFX_focus_SOV_military_purge
		prerequisite = { focus = SOV_the_anti_soviet_trotskyist_center
		}
		x = 0
		y = 1
		relative_position_id = SOV_the_anti_soviet_trotskyist_center
		cost = 3
		available = {
			has_country_flag = {
				flag = SOV_second_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_military_tt
				has_country_flag = {
					flag = SOV_second_moscow_trial_flag
					days > 175
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_SOV_POLITICAL_PARANOIA
		}
		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag			#This focus cannot be canceled
		}
		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = {
				flag = SOV_paranoia_random_purge_cooldown_from_focus_flag
				days = 15
			}
			#Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_trial_of_the_generals_flag			#Used to unlock the next purge focus
			SOV_paranoia_high_increase_effect = yes
			#Historical
			if = {
				limit = {
					has_character = SOV_mikhail_tukhachevsky
				}
				SOV_mikhail_tukhachevsky = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#NOT-SO-HISTORICAL
			#Yegorov
			if = {
				limit = {
					has_character = SOV_aleksandr_yegorov
				}
				SOV_aleksandr_yegorov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Blyukher
			if = {
				limit = {
					has_character = SOV_vasily_blyukher
				}
				SOV_vasily_blyukher = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Primakov
			if = {
				limit = {
					has_character = SOV_vitaly_primakov
				}
				SOV_vitaly_primakov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag				#No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_great_purge_army_trial_of_the_generals_effect = yes				#TRIAL OF THE GENERALS -> Tukhachevsky
			}
			set_country_flag = SOV_stalinist_military_flag			#New Generals have more chances of being Stalinists after this
		}
	}
	focus = {
		id = SOV_the_kulak_operation
		icon = GFX_focus_spr_masters_of_our_own_fate
		prerequisite = { focus = SOV_the_military_conspiracy }
		x = 1
		y = 1
		relative_position_id = SOV_the_military_conspiracy
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			add_to_variable = {
				SOV_the_politburo_political_power_factor = 0.05
			}
			add_to_variable = {
				SOV_the_politburo_max_surrender_limit_offset = 0.05
			}
			custom_effect_tooltip = SOV_the_workers_dictatorship_ns_tt
			SOV_paranoia_low_decrease_effect = yes
		}
	}
	focus = {
		id = SOV_the_polish_operation
		icon = GFX_goal_generic_attack_allies
		prerequisite = { focus = SOV_the_kulak_operation }
		x = 1
		y = 1
		relative_position_id = SOV_the_kulak_operation
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			add_to_variable = {
				SOV_the_politburo_political_power_factor = 0.05
			}
			add_to_variable = {
				SOV_the_politburo_max_surrender_limit_offset = 0.05
			}
			custom_effect_tooltip = SOV_the_workers_dictatorship_ns_tt
			SOV_paranoia_low_decrease_effect = yes
		}
	}
	focus = {
		id = SOV_the_bloc_of_rights_and_trotskyites
		icon = GFX_focus_SOV_purge_bukharinists
		prerequisite = { focus = SOV_the_military_conspiracy
		}
		x = 0
		y = 2
		relative_position_id = SOV_the_military_conspiracy
		cost = 3
		available = {
			has_country_flag = {
				flag = SOV_trial_of_the_generals_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_rights_tt
				has_country_flag = {
					flag = SOV_trial_of_the_generals_flag
					days > 175
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_SOV_POLITICAL_PARANOIA
		}
		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag			#This focus cannot be canceled
		}
		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = {
				flag = SOV_paranoia_random_purge_cooldown_from_focus_flag
				days = 15
			}
			#Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_third_moscow_trial_flag			#Used to unlock the next purge focus
			#HISTORICAL
			#Bukharin
			if = {
				limit = {
					has_character = SOV_nikolay_bukharin
				}
				SOV_nikolay_bukharin = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Rykov
			if = {
				limit = {
					has_character = SOV_aleksey_rykov
				}
				SOV_aleksey_rykov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#NOT-SO-HISTORICAL
			#Tomsky
			if = {
				limit = {
					has_character = SOV_mikhail_tomsky
				}
				SOV_mikhail_tomsky = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Litvinov
			if = {
				limit = {
					has_character = SOV_maksim_litvinov
				}
				SOV_maksim_litvinov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag				#No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_trigger_great_purge_moscow_trial_effect = yes				#THIRD MOSCOW TRIAL -> Right Opposition
			}
			custom_effect_tooltip = SOV_trigger_third_moscow_trial_tt
			SOV_remove_paranoia_effect = yes			#REMOVE PARANOIA SYSTEM
		}
	}
	focus = {
		id = SOV_end_the_terror
		icon = GFX_goal_generic_war_with_comintern
		prerequisite = { focus = SOV_the_bloc_of_rights_and_trotskyites }
		x = -2
		y = 1
		relative_position_id = SOV_the_bloc_of_rights_and_trotskyites
		cost = 3
		available = {
			has_idea = SOV_lavrenty_beriya
		}
		search_filters = {
			FOCUS_FILTER_INTERNAL_AFFAIRS
			FOCUS_FILTER_STABILITY
		}
		completion_reward = {
			add_to_variable = {
				SOV_the_politburo_political_power_factor = 0.05
			}
		}
	}
	focus = {
		id = SOV_behead_the_snake
		icon = GFX_focus_SOV_behead_the_snake
		prerequisite = { focus = SOV_the_bloc_of_rights_and_trotskyites }
		x = 0
		y = 1
		relative_position_id = SOV_the_bloc_of_rights_and_trotskyites
		cost = 4
		available = {
			has_government = communism
		}
		search_filters = {
			FOCUS_FILTER_SOV_POLITICAL_PARANOIA
		}
		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				custom_effect_tooltip = SOV_behead_the_snake_lar_tt
				create_operative_leader = {
					name = "Ramón Mercader"
					GFX = GFX_portrait_SOV_ramon_mercader
					traits = {
						operative_tough
						operative_infiltrator
					}
					bypass_recruitment = no
					available_to_spy_master = yes
					nationalities = {
						SOV
						SPR
						MEX
					}
				}
				#Extra operative slot
				set_variable = {
					SOV_the_politburo_operative_slot = 1
				}
				custom_effect_tooltip = SOV_behead_the_snake_ns_tt
			}
			else = {
				custom_effect_tooltip = SOV_behead_the_snake_no_lar_tt
			}
			if = {
				limit = {
					has_idea = trotskyite_plot_purged
				}
				swap_ideas = {
					remove_idea = trotskyite_plot_purged
					add_idea = trotskyite_plot_purged_2
				}
			}
			else_if = {
				limit = {
					has_idea = trotskyite_plot_purged_2
				}
				remove_ideas = trotskyite_plot_purged_2
			}
			SOV_paranoia_high_decrease_effect = yes
		}
	}
	############## NKVD #################
	focus = {
		id = SOV_nkvd_primacy
		icon = GFX_goal_generic_military_deal
		prerequisite = { focus = SOV_great_purge }
		x = -3
		y = 1
		relative_position_id = SOV_great_purge
		cost = 3
		available = {
		}
		search_filters = {
			FOCUS_FILTER_SOV_POLITICAL_PARANOIA
		}
		completion_reward = {
			custom_effect_tooltip = SOV_formation_of_the_nkvd_tt
			hidden_effect = {
				add_to_variable = {
					var = SOV_Commissars_attitude
					value = 1
				}
				add_to_variable = {
					var = SOV_Commissars_political_power_gain
					value = 4
				}
				add_to_variable = {
					var = SOV_Commissars_stability
					value = 2
				}
				SOV_political_instability_update_effect = yes
			}
			add_ideas = nkvd
			SOV_paranoia_medium_increase_effect = yes
		}
	}
	focus = {
		id = SOV_nkvd_divisions
		icon = GFX_goal_generic_build_army_usa
		prerequisite = { focus = SOV_nkvd_primacy }
		x = 0
		y = 1
		relative_position_id = SOV_nkvd_primacy
		cost = 3
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				any_claim = yes
				has_war = yes
			}
		}

		available = {
			threat > 0.45 
		}
		completion_reward = {
			custom_effect_tooltip = SOV_nkvd_divisions_tt
			custom_effect_tooltip = SOV_nkvd_upgrade_tooltip
			hidden_effect = {
				add_to_variable = {
					var = SOV_Commissars_influence
					value = 2
				}
				SOV_political_instability_update_effect = yes
			}
			add_units_to_division_template = {
				template_name = "NKVD Strelkovaya Diviziya"
				regiments = {
					heavy_infantry = 2
					heavy_infantry = 2
					heavy_infantry = 2
					artillery_brigade = 3
				}
				support = {
					normal_engineer = 0
					artillery = 1
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"1ya NKVD Motostrelkovaya Div.\" division_template = \"Motostrelkovaya Diviziya\" start_experience_factor = 0.5 start_equipment_factor = 0.1"
					owner = ROOT
				}
			}
			swap_ideas = {
				remove_idea = nkvd
				add_idea = nkvd_2
			}
		}
	}
	focus = {
		id = SOV_peoples_militia
		icon = GFX_focus_YUG_pan_slavic_congress
		prerequisite = { focus = SOV_nkvd_divisions
		}
		x = 1
		y = 1
		relative_position_id = SOV_nkvd_divisions
		cost = 5
		available = {
			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
			surrender_progress > 0.29
		}
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = no
		completion_reward = {
			custom_effect_tooltip = SOV_peoples_militias
			hidden_effect = {
				division_template = {
					name = "Narodnoe Opolcheniye Divisíon"
					is_locked = yes
					division_names_group = SOV_GAR_01
					priority = 2
					regiments = {
						heavy_militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						artillery_brigade = { x = 0 y = 3 }

						heavy_militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
						artillery_brigade = { x = 1 y = 3 }

						heavy_militia = { x = 2 y = 0 }
						militia = { x = 2 y = 1 }
						militia = { x = 2 y = 2 }
						artillery_brigade = { x = 2 y = 3 }

						heavy_militia = { x = 3 y = 0 }
						militia = { x = 3 y = 1 }
						militia = { x = 3 y = 2 }
						artillery_brigade = { x = 3 y = 3 }
					}
					support = {
						engineer = { x = 0 y = 0 }
						horse_logistics_company = { x = 0 y = 1 }
						recon = { x = 1 y = 0 }
						artillery = { x = 1 y = 1 }
						anti_air = { x = 1 y = 2 }
					}
				}
			}
		}
	}
	focus = {
		id = SOV_barrier_troops
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = SOV_peoples_militia }
		x = 0
		y = 1
		relative_position_id = SOV_peoples_militia
		cost = 5
		available = {
		}
		ai_will_do = {
			factor = 2
		}
		search_filters = {
		}
		completion_reward = {
			add_to_variable = {
				SOV_the_red_army_army_org_regain = 0.1
			}
			custom_effect_tooltip = SOV_barrier_troops_ns_tt
		}
	}
	focus = {
		id = SOV_penal_battalions
		icon = GFX_focus_SOV_penal_battalions
		prerequisite = { focus = SOV_barrier_troops }
		x = 0
		y = 1
		relative_position_id = SOV_barrier_troops
		cost = 4
		available = {
			has_war = yes
		}
		search_filters = {
		}
		completion_reward = {
			#Spawn Penal divisions
			custom_effect_tooltip = SOV_penal_battalions_spawn_tt
			hidden_effect = {
				set_technology = {
					penal_infantry = 1
					popup = no
				}
				division_template = {
					name = "Shtrafnaya Chast"
					division_names_group = SOV_PEN_01
					is_locked = yes
					regiments = {
						penal_battalion = { x = 0 y = 0 }
						penal_battalion = { x = 0 y = 1 }
						penal_battalion = { x = 0 y = 2 }

						penal_battalion = { x = 1 y = 0 }
						penal_battalion = { x = 1 y = 1 }
						penal_battalion = { x = 1 y = 2 }

						penal_battalion = { x = 2 y = 0 }
						penal_battalion = { x = 2 y = 1 }
						penal_battalion = { x = 2 y = 2 }
					}
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
				SOV_spawn_penal_divisions_effect = yes
			}
		}
	}
	focus = {
		id = SOV_conscript_men_into_labour
		icon = GFX_goal_SOV_propaganda_communism
		prerequisite = { focus = SOV_nkvd_divisions }
		x = -1
		y = 1
		relative_position_id = SOV_nkvd_divisions
		cost = 2
		available = {
			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}
		ai_will_do = {
			factor = 40
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_EMERGENCY
		}
		completion_reward = {
			if = {
				limit = { 
					NOT = { has_idea = conscript_men_into_the_factories } 
				}
				add_ideas = conscript_men_into_the_factories
			}
			else = {
				add_political_power = 150
			}
		}
	}
	focus = {
		id = SOV_smersh
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = SOV_conscript_men_into_labour }
		x = 0
		y = 1
		relative_position_id = SOV_conscript_men_into_labour
		cost = 4
		available = {
		}
		ai_will_do = {
			factor = 40
		}
		search_filters = {
			FOCUS_FILTER_PROPAGANDA
			FOCUS_FILTER_AGENCY
		}
		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_ideas = SOV_smersh
			}
			else = {
				add_ideas = SOV_smersh_no_lar
			}
		#	if = {
		#		limit = {
		#			has_government = communism
		#		}
		#		custom_effect_tooltip = unlock_propaganda_campaign_tt
		#		unlock_decision_tooltip = SOV_propaganda_treacherous_enemy
		#		unlock_decision_tooltip = SOV_propaganda_do_not_blab
		#		custom_effect_tooltip = propaganda_campaign_requirement_tt
		#	}
		}
	}	
	focus = {
		id = SOV_organization_of_the_partisans
		icon = GFX_focus_focus_fra_maquis
		prerequisite = { focus = SOV_smersh }
		x = 0
		y = 1
		relative_position_id = SOV_smersh
		cost = 6
		available = {
			any_owned_state = {
				controller = {
					has_war_with = ROOT
				}
			}
		}
		ai_will_do = {
			factor = 80
		}
		search_filters = {
			FOCUS_FILTER_PROPAGANDA
		}
		completion_reward = {
			add_to_variable = {
				SOV_the_red_army_operative_slot = 1
			}
			custom_effect_tooltip = SOV_organization_of_the_partisans_ns_tt
			if = {
				limit = {
					has_government = communism
				}
				show_unit_leaders_tooltip = SOV_vasily_korzh
				show_unit_leaders_tooltip = SOV_sidor_kovpak
			}
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				if = {
					limit = {
						has_government = communism
					}
					create_operative_leader = {
						name = "Dmitry Medvedev"
						GFX = GFX_Portrait_dmitry_medvedev
						female = yes
						traits = {
							operative_demolition_expert
							operative_commando
						}
						bypass_recruitment = no
						available_to_spy_master = yes
						nationalities = {
							SOV
						}
					}
				}
				add_timed_idea = {
					idea = SOV_central_headquarters_of_the_partisan_movement
					days = 720
				}
			}
			else = {
				add_timed_idea = {
					idea = SOV_central_headquarters_of_the_partisan_movement_no_lar
					days = 720
				}
			}
			#	if = {
			#		limit = {
			#			has_government = communism
			#		}
			#		custom_effect_tooltip = unlock_propaganda_campaign_tt
			#		unlock_decision_tooltip = SOV_propaganda_glory_to_partisans
			#		unlock_decision_tooltip = SOV_propaganda_death_to_invaders
			#		custom_effect_tooltip = propaganda_campaign_requirement_tt
			#	}
		}
	}

}