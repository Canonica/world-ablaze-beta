SAMPLE_add_point_to_line = {
	# Adds a random point to the line graph
	# This count is displayed as an x-axis label, increment it
	add_to_variable = {
		SAMPLE_count = 1
	}
	# We keep track of the last y position so we can calculate the slope
	set_variable = {
		SAMPLE_last_y_position_green = SAMPLE_y_position_green
	}
	set_variable = {
		SAMPLE_last_y_position_red = SAMPLE_y_position_red
	}
	# Random new y position, 10-90
	set_variable = {
		SAMPLE_y_position_green = SAMPLE_y_position_green
	}
	set_variable = {
		SAMPLE_y_position_red = SAMPLE_y_position_red
	}
	# multiply_variable = {
	# 	SAMPLE_y_position_green = 800
	# }
	add_to_variable = {
		SAMPLE_y_position_green = 2
	}
	add_to_variable = {
		SAMPLE_y_position_red = 4
	}
	round_variable = SAMPLE_y_position_green
	round_variable = SAMPLE_y_position_red
	# Prune arrays so they hold at most 20 elements
	if = {
		limit = {
			check_variable = {
				SAMPLE_count > 40
			}
		}
		remove_from_array = {
			array = SAMPLE_graph_offsets_green
			index = 0
		}
		remove_from_array = {
			array = SAMPLE_graph_slopes_green
			index = 0
		}
		remove_from_array = {
			array = SAMPLE_graph_offsets_red
			index = 0
		}
		remove_from_array = {
			array = SAMPLE_graph_slopes_red
			index = 0
		}
		remove_from_array = {
			array = SAMPLE_numbers
			index = 0
		}
	}
	
	# The y position offset is the inverse of the y position
	set_temp_variable = {
		offset_green = SAMPLE_last_y_position_green
	}
	set_temp_variable = {
		offset_red = SAMPLE_last_y_position_red
	}
	multiply_temp_variable = {
		offset_green = -1
	}
	multiply_temp_variable = {
		offset_red = -1
	}
	add_to_array = {
		SAMPLE_graph_offsets_green = offset_green
	}
	add_to_array = {
		SAMPLE_graph_offsets_red = offset_red
	}
	# The 'slope' here is simply the difference between the current y value and the last one, divided by 2 plus 50
	# These last two changes are needed for the shader
	set_temp_variable = {
		diff_green = SAMPLE_y_position_green
	}
	subtract_from_temp_variable = {
		diff_green = SAMPLE_last_y_position_green
	}
	divide_temp_variable = {
		diff_green = 2
	}
	add_to_temp_variable = {
		diff_green = 50
	}
	add_to_array = {
		SAMPLE_graph_slopes_green = diff_green
	}
	set_temp_variable = {
		diff_red = SAMPLE_y_position_red
	}
	subtract_from_temp_variable = {
		diff_red = SAMPLE_last_y_position_red
	}
	divide_temp_variable = {
		diff_red = 2
	}
	add_to_temp_variable = {
		diff_red = 50
	}
	add_to_array = {
		SAMPLE_graph_slopes_red = diff_red
	}
	add_to_array = {
		SAMPLE_numbers = SAMPLE_count
	}
}
